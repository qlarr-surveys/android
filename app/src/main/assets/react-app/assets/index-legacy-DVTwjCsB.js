!function(){function e(e,t,r,a,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,n)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function r(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(a=o.call(r)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}System.register(["./index-legacy-Bv2eXh2I.js","./use-service-legacy-BhwPSb5M.js","./Image-legacy-GdCsba4I.js","./DateUtils-legacy-BTmsWpOC.js","./Web-legacy-DMYfs4qb.js","./dayjs.min-legacy-D2kfUQ6k.js","./Delete-legacy-CjI8dQo2.js","./common-legacy-CbMEUs9u.js","./TextField-legacy-BOwGRc-U.js","./Card-legacy-PAZ1B7n8.js","./Close-legacy-C5_q_DGr.js","./Divider-legacy-DAl_ktB-.js","./yup-legacy-BRsgz7LH.js","./survey-legacy-BBPrODqM.js","./TablePagination-legacy-Bh7h0Xtm.js","./Checkbox-legacy-D8PzMjCa.js","./SwitchBase-legacy-POzBzpU5.js","./Tabs-legacy-BZ8LdgyE.js","./radioClasses-legacy-rUP_5iUL.js","./tableRowClasses-legacy-DaBQNcvJ.js","./FormControlLabel-legacy-Cd6ySi2s.js","./TableCell-legacy-V6qlCnyo.js","./Toolbar-legacy-CEJ92uAj.js"],(function(t,a){"use strict";var o,i,s,l,c,d,u,p,m,h,g,_,v,f,x,y,b,j,k,w,C,S,z,O,I,N,$,D,T,P,E,M,A,B,R,F,U,W,V,H,G,L,Y,Q,q,Z,X,J,K,ee,te,re,ae,ne,oe,ie,se,le,ce,de,ue,pe,me,he,ge,_e,ve,fe;return{setters:[e=>{o=e.h,i=e.r,s=e.b,l=e._,c=e.d,d=e.j,u=e.q,p=e.B,m=e.s,h=e.aj,g=e.z},e=>{_=e.f,v=e.j,f=e.x,x=e.c,y=e.e,b=e.K,j=e.T,k=e.bf,w=e.I,C=e.M,S=e.R,z=e.U,O=e.aO,I=e.X,N=e.aR,$=e.bg,D=e.V,T=e.aN,P=e.aQ,E=e.a_,M=e.J},e=>{A=e.u,B=e.d,R=e.a,F=e.D},e=>{U=e.s,W=e.l},e=>{V=e.b,H=e.g,G=e.T,L=e.E,Y=e.S,Q=e.a,q=e.A,Z=e.i,X=e.d,J=e.c,K=e.e,ee=e.u,te=e.F,re=e.R,ae=e.f,ne=e.h},e=>{oe=e.d},e=>{ie=e.d},e=>{se=e.b},e=>{le=e.T},e=>{ce=e.C},e=>{de=e.C,ue=e.a},e=>{pe=e.D},e=>{me=e.c,he=e.a,ge=e.o,_e=e.L},e=>{ve=e.S},e=>{fe=e.T},null,null,null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent="._mainContainer_1kl2v_1{margin:auto;min-width:300px;height:calc(100vh - 64px);overflow:auto}._newSurveysButton_1kl2v_8{margin-bottom:48px;justify-content:flex-start}._content_1kl2v_13{display:flex;flex-direction:column;gap:.5rem;margin-top:30px}._loadingWrapper_1kl2v_20{width:100%;height:100%;text-align:center;padding-top:50px}._allButton_1kl2v_27{margin-top:2rem!important;background-color:#16205b!important;color:#fff!important;border-radius:50px!important;font-size:1.5rem!important;padding:.25rem 6rem!important;text-transform:none!important}@media only screen and (max-width: 1024px){._content_1kl2v_13{padding:0 1rem}}._surveyCardsContainer_1kl2v_43{margin-top:24px;padding:16px;border:2px dashed #ccc;border-radius:8px;background-color:#f9f9f9}._noSurveys_1kl2v_51{text-align:center}._surveyHeader_k7hfg_1{padding:5px;color:#fff;text-transform:capitalize}._contentCard_k7hfg_7{padding:5px}._actionBtn_k7hfg_11{margin-top:30px;display:flex;justify-content:space-between}._card_k7hfg_17{border-radius:5px!important;box-shadow:none!important}._cardContent_k7hfg_22{display:flex;align-items:center;gap:2rem}._imageContainer_k7hfg_28{padding:1rem;background-color:#f7f8fc;display:flex;justify-content:center}._surveyContent_k7hfg_35{display:flex;align-items:center;gap:7rem;flex:1;width:100%}._surveyTitle_k7hfg_43{width:13rem;color:#181735}._surveyStatus_k7hfg_48{display:flex;align-items:center;gap:.5rem;width:5rem}._badge_k7hfg_55{height:.5rem;width:.5rem;border-radius:99999px}._textTransform_k7hfg_61{text-transform:capitalize}._surveyResponse_k7hfg_65{display:flex;align-items:center;width:9rem;gap:.5rem}._surveyActions_k7hfg_72{display:flex;flex-direction:row!important;justify-content:flex-start;gap:.5rem;margin-right:1rem;flex:auto;width:15rem}._iconButton_k7hfg_82{border:2px solid #d7d7d7!important;border-radius:14px!important;padding:.3rem 1rem!important;height:fit-content;width:6rem}@media only screen and (max-width: 1024px){._cardContent_k7hfg_22{flex-direction:column;padding:0rem 1rem 1rem}._surveyContent_k7hfg_35{flex-direction:column;gap:1rem;align-items:flex-start}._imageContainer_k7hfg_28,._surveyActions_k7hfg_72{width:100%}}@media only screen and (min-width: 1024px) and (max-width: 1440px){._surveyContent_k7hfg_35{gap:2rem}._surveyResponse_k7hfg_65{width:7rem}}._logo_k7hfg_126{display:flex;justify-content:center;align-items:center}._logo_k7hfg_126 img{margin:auto;display:block;object-fit:contain}._logoImageWrapper_k7hfg_139{position:relative}._imageOverlay_k7hfg_143{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);opacity:1;transition:opacity .3s ease}._cameraIconWrapper_k7hfg_155{position:absolute;top:8px;right:8px;opacity:0;transition:opacity .3s ease;z-index:1}._logoImageWrapper_k7hfg_139:hover ._cameraIconWrapper_k7hfg_155{opacity:1}._cameraIcon_k7hfg_155{color:#fff;pointer-events:none}._logoImageWrapper_k7hfg_139{position:relative;display:inline-block;flex:1}._relativeContainer_k7hfg_182{position:relative;background-color:rgba(0,0,0,.4)}._absoluteOverlay_k7hfg_187{width:100%;position:absolute;z-index:99999;bottom:0;color:#fff}._container_k7hfg_200{display:flex;flex-direction:column;width:100%}._truncatedText_k7hfg_206{overflow:hidden;text-overflow:ellipsis;display:inline-block;line-height:1.5em;max-height:4.5em;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;white-space:normal;word-wrap:break-word}._exampleTruncatedText_k7hfg_220{overflow:hidden;text-overflow:ellipsis;display:inline-block;line-height:1.5em;max-height:15em;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:10;line-clamp:10;white-space:normal;word-wrap:break-word}._titleContainer_k7hfg_235{display:flex;align-items:center;width:100%;justify-content:space-between;position:relative}._surveyLink_k7hfg_243{flex-grow:1;color:inherit}._nameIcon_k7hfg_248{position:absolute!important;right:3px;opacity:0}._titleContainer_k7hfg_235:hover ._nameIcon_k7hfg_248{opacity:1}._descriptionContainer_k7hfg_259{display:flex;align-items:center;width:100%;justify-content:space-between;position:relative}._truncatedText_k7hfg_206{flex-grow:1;color:inherit}._descriptionIcon_k7hfg_272{opacity:0;transition:opacity .2s ease-in-out}._descriptionContainer_k7hfg_259:hover ._descriptionIcon_k7hfg_272{opacity:1}._photoIcon_k7hfg_281{position:absolute;top:5px;right:5px;opacity:0;cursor:pointer}._logoImageWrapper_k7hfg_139:hover ._photoIcon_k7hfg_281{opacity:1}._exampleSurveysContainer_apkeh_1{background-color:#f7f7f9;padding:16px;margin-bottom:48px;border-radius:8px}._createUserCard_zrfc2_1._createUserCard_zrfc2_1{padding:2rem;border-radius:20px;box-shadow:rgba(0,0,0,.1) 0 4px 6px -1px,rgba(0,0,0,.06) 0 2px 4px -1px;margin-bottom:50px}._formGroup_zrfc2_9._formGroup_zrfc2_9{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:2rem}._rightContainer_zrfc2_16._rightContainer_zrfc2_16{display:flex;flex-direction:row;gap:2.5rem;flex:auto;justify-content:flex-end}._createButton_zrfc2_24._createButton_zrfc2_24{text-transform:none;color:#fff;padding:.75rem 7rem;background-color:#04bdf3;border-radius:20px;height:fit-content;transition:background-color .3s ease,color .3s ease,border .3s ease}._createButton_zrfc2_24._createButton_zrfc2_24:hover{border:1px solid #04bdf3;color:#04bdf3;background-color:#fff}._surveyNameInput_zrfc2_39{padding-left:14px}@media only screen and (max-width: 768px){._createUserCard_zrfc2_1._createUserCard_zrfc2_1{padding:1rem}._formGroup_zrfc2_9._formGroup_zrfc2_9{flex-direction:column}._rightContainer_zrfc2_16._rightContainer_zrfc2_16{width:100%;flex-direction:column;gap:2rem}._selectInput_zrfc2_55{width:100%!important}._surveyNameInput_zrfc2_39._surveyNameInput_zrfc2_39{width:100%}}._errorText_zrfc2_63{color:#eb5757!important;padding-left:14px}\n/*$vite$:1*/",document.head.appendChild(a),t("default",(function(){var e,t;const a=S("survey"),o=n(i.useState(null),2),s=o[0],l=o[1],c=n(i.useState(!0),2),u=c[0],m=c[1],h=n(i.useState(1),2),_=h[0],v=h[1],f=n(i.useState(5),2),x=f[0],y=f[1],b=n(i.useState("all"),2),k=b[0],$=b[1],A=n(i.useState("last_modified_desc"),2),B=A[0],R=A[1],U=n(i.useState(!1),2),W=U[0],V=U[1],H=n(i.useState(),2),G=H[0],L=H[1],Y=z(),Q=C("manage").t,q=()=>{a.getAllSurveys(_,x,k,B).then((e=>{e&&(m(!1),l(e))})).catch((e=>{m(!1)}))};i.useEffect((()=>{q()}),[_,x,B,k]);const Z=(e,t)=>{l((a=>r(r({},a),{},{surveys:a.surveys.map((a=>a.id===e?r(r({},a),{},{status:t}):a))})))},X=()=>{const e=M.getUser().roles;return e.indexOf(ne.SUPER_ADMIN)>-1||e.indexOf(ne.SURVEY_ADMIN)>-1},J=n(i.useState(""),2),K=J[0],ee=J[1],te=n(i.useState(""),2),re=te[0],oe=te[1],ie=n(i.useState(null),2),se=ie[0],le=ie[1],ce=n(i.useState(!1),2),de=ce[0],pe=ce[1],me=n(i.useState(Q("action_btn.delete")),2),he=me[0],ge=me[1],_e=n(i.useState(!1),2),ve=_e[0],xe=_e[1],ye=n(i.useState(!1),2),be=ye[0],je=ye[1],Se=e=>{L(e),V(!0)},Oe=e=>{Y(I(!0)),a.deleteSurvey(e).then((()=>{q()})).catch((e=>{Y(I(!1))})).finally((()=>{Y(I(!1))}))},Ie=e=>{Y(I(!0)),a.closeSurvey(e).then((t=>{Z(e,"closed")})).catch((e=>{e.name==N.INVALID_SURVEY_DATES.name&&setSurveyDateError(Q(`processed_errors.${processed.name}`))})).finally((()=>{Y(I(!1))}))},Ne=(e,t)=>{l((a=>{const n=a.surveys.map((a=>a.id===e?r(r({},a),{},{name:t}):a));return r(r({},a),{},{surveys:n})}))},$e=(e,t)=>{l((a=>{const n=a.surveys.map((a=>a.id===e?r(r({},a),{},{description:t}):a));return r(r({},a),{},{surveys:n})}))},De=(e,t)=>{l((a=>{const n=a.surveys.map((a=>a.id===e?r(r({},a),{},{image:t}):a));return r(r({},a),{},{surveys:n})}))},Te=D();return d.jsxs(p,{className:ze.mainContainer,children:[d.jsx(T,{children:d.jsxs(p,{className:ze.content,children:[d.jsxs(O,{className:ze.newSurveysButton,direction:"row",spacing:2,children:[X()&&!ve&&d.jsx(P,{variant:"contained",color:"primary",startIcon:d.jsx(ke,{}),onClick:()=>{xe(!0)},children:Q("create_new_survey")}),X()&&!be&&d.jsx(P,{variant:"contained",color:"primary",startIcon:d.jsx(we,{}),onClick:()=>{je(!0)},children:Q("copy_example_surveys")})]}),ve&&d.jsx(E,{in:ve,timeout:300,children:d.jsxs("div",{style:{position:"relative"},children:[d.jsx(w,{onClick:()=>{xe(!1)},"aria-label":"close",style:r(r({position:"absolute",top:0},"ltr"===Te?{right:0}:{left:0}),{},{color:"black",zIndex:1}),children:d.jsx(ue,{color:"#000"})}),d.jsx(bt,{onSurveyCreated:q})]})}),be&&d.jsx(E,{in:be,timeout:300,children:d.jsxs("div",{style:{position:"relative"},children:[d.jsx(w,{onClick:()=>{je(!1)},"aria-label":"close",style:r(r({position:"absolute",top:0},"ltr"===Te?{right:0}:{left:0}),{},{color:"black",zIndex:1}),children:d.jsx(ue,{color:"#000"})}),d.jsx(ft,{onClone:e=>Se(e)})]})}),d.jsx(_t,{filter:k,onFilterSelected:e=>{v(1),$(e.target.value)},sort:B,onSortSelected:e=>{v(1),R(e.target.value)}}),d.jsx(p,{className:ze.surveyCardsContainer,children:u?d.jsx(g,{}):d.jsx(d.Fragment,{children:(null==s||null===(e=s.surveys)||void 0===e?void 0:e.length)>0?d.jsx(p,{sx:{mt:3,columnGap:2,display:"grid",rowGap:{xs:4,md:5},gridTemplateColumns:{xs:"1fr",sm:"repeat(auto-fit, minmax(280px, 1fr))",md:"repeat(auto-fit, minmax(330px, 350px))"}},children:null==s||null===(t=s.surveys)||void 0===t?void 0:t.map((e=>d.jsx(gt,{survey:e,onStatusChange:Z,onClone:()=>Se(e),onDelete:()=>(e=>{oe("delete"),ge(Q("action_btn.delete")),le(e),ee(Q("edit_survey.delete_survey",{survey_name:e.name})),pe(!0)})(e),onClose:()=>(e=>{oe("close"),ge(Q("action_btn.close")),le(e),ee(Q("edit_survey.close_survey",{survey_name:e.name})),pe(!0)})(e),onUpdateTitle:Ne,onUpdateDescription:$e,onUpdateImage:De},e.id)))}):d.jsxs("div",{className:ze.noSurveys,children:[d.jsx(Ce,{sx:{fontSize:48,color:"#ccc"}}),d.jsx(j,{variant:"h6",color:"textSecondary",sx:{mt:2},children:Q("create_survey.empty_state_message")})]})})}),s&&d.jsx(fe,{rowsPerPageOptions:[5,10,20,50],component:"div",labelDisplayedRows:({from:e,to:t,count:r,page:a})=>Q("responses.label_displayed_rows",{from:e,to:t,count:r}),labelRowsPerPage:Q("responses.label_surveys_per_page"),count:null==s?void 0:s.totalCount,rowsPerPage:x,page:_-1,onPageChange:(e,t)=>{v(t+1)},onRowsPerPageChange:e=>{y(parseInt(e.target.value,10)),v(1)}})]})}),d.jsx(ae,{open:W,onClose:e=>{V(!1),e&&q()},survey:G}),d.jsx(F,{open:de,description:K,handleClose:()=>pe(!1),handleDelete:()=>{"delete"===re?(Oe(se.id),pe(!1)):"close"===re&&(Ie(se.id),pe(!1))},title:he})]})}));const xe=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],ye=_("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),be=_("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const r=e.ownerState;return[t.badge,t[r.variant],t[`anchorOrigin${o(r.anchorOrigin.vertical)}${o(r.anchorOrigin.horizontal)}${o(r.overlap)}`],"default"!==r.color&&t[`color${o(r.color)}`],r.invisible&&t.invisible]}})((({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(t=e.vars)?t:e).palette).filter((t=>{var r,a;return(null!=(r=e.vars)?r:e).palette[t].main&&(null!=(a=e.vars)?a:e).palette[t].contrastText})).map((t=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main,color:(e.vars||e).palette[t].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${V.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${V.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${V.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${V.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${V.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${V.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${V.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${V.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}})),je=i.forwardRef((function(e,t){var r,a,n,i,u,p;const m=v({props:e,name:"MuiBadge"}),h=m.anchorOrigin,g=void 0===h?{vertical:"top",horizontal:"right"}:h,_=m.className,y=m.component,b=m.components,j=void 0===b?{}:b,k=m.componentsProps,w=void 0===k?{}:k,C=m.children,S=m.overlap,z=void 0===S?"rectangular":S,O=m.color,I=void 0===O?"default":O,N=m.invisible,$=void 0!==N&&N,D=m.max,T=void 0===D?99:D,P=m.badgeContent,E=m.slots,M=m.slotProps,B=m.showZero,R=void 0!==B&&B,F=m.variant,U=void 0===F?"standard":F,W=s(m,xe),V=function(e){const t=e.badgeContent,r=e.invisible,a=void 0!==r&&r,n=e.max,o=void 0===n?99:n,i=e.showZero,s=void 0!==i&&i,l=A({badgeContent:t,max:o});let c=a;!1!==a||0!==t||s||(c=!0);const d=c?l:e,u=d.badgeContent,p=d.max,m=void 0===p?o:p;return{badgeContent:u,invisible:c,max:m,displayValue:u&&Number(u)>m?`${m}+`:u}}({max:T,invisible:$,badgeContent:P,showZero:R}),G=V.badgeContent,L=V.invisible,Y=V.max,Q=V.displayValue,q=A({anchorOrigin:g,color:I,overlap:z,variant:U,badgeContent:P}),Z=L||null==G&&"dot"!==U,X=Z?q:m,J=X.color,K=void 0===J?I:J,ee=X.overlap,te=void 0===ee?z:ee,re=X.anchorOrigin,ae=void 0===re?g:re,ne=X.variant,oe=void 0===ne?U:ne,ie="dot"!==oe?Q:void 0,se=l({},m,{badgeContent:G,invisible:Z,max:Y,displayValue:ie,showZero:R,anchorOrigin:ae,color:K,overlap:te,variant:oe}),le=(e=>{const t=e.color,r=e.anchorOrigin,a=e.invisible,n=e.overlap,i=e.variant,s=e.classes,l=void 0===s?{}:s,c={root:["root"],badge:["badge",i,a&&"invisible",`anchorOrigin${o(r.vertical)}${o(r.horizontal)}`,`anchorOrigin${o(r.vertical)}${o(r.horizontal)}${o(n)}`,`overlap${o(n)}`,"default"!==t&&`color${o(t)}`]};return x(c,H,l)})(se),ce=null!=(r=null!=(a=null==E?void 0:E.root)?a:j.Root)?r:ye,de=null!=(n=null!=(i=null==E?void 0:E.badge)?i:j.Badge)?n:be,ue=null!=(u=null==M?void 0:M.root)?u:w.root,pe=null!=(p=null==M?void 0:M.badge)?p:w.badge,me=f({elementType:ce,externalSlotProps:ue,externalForwardedProps:W,additionalProps:{ref:t,as:y},ownerState:se,className:c(null==ue?void 0:ue.className,le.root,_)}),he=f({elementType:de,externalSlotProps:pe,ownerState:se,className:c(le.badge,null==pe?void 0:pe.className)});return d.jsxs(ce,l({},me,{children:[C,d.jsx(de,l({},he,{children:ie}))]}))})),ke=y(d.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),we=y(d.jsx("path",{d:"M18 2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H9V4h9zM3 15v-2h2v2zm0-5.5h2v2H3zM10 20h2v2h-2zm-7-1.5v-2h2v2zM5 22c-1.1 0-2-.9-2-2h2zm3.5 0h-2v-2h2zm5 0v-2h2c0 1.1-.9 2-2 2M5 6v2H3c0-1.1.9-2 2-2"}),"CopyAll"),Ce=y(d.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),Se=y(d.jsx("path",{d:"M6 6h12v12H6z"}),"Stop"),ze={mainContainer:"_mainContainer_1kl2v_1",newSurveysButton:"_newSurveysButton_1kl2v_8",content:"_content_1kl2v_13",loadingWrapper:"_loadingWrapper_1kl2v_20",allButton:"_allButton_1kl2v_27",surveyCardsContainer:"_surveyCardsContainer_1kl2v_43",noSurveys:"_noSurveys_1kl2v_51"};var Oe={},Ie=u;Object.defineProperty(Oe,"__esModule",{value:!0});var Ne=Oe.default=void 0,$e=Ie(b()),De=d;Ne=Oe.default=(0,$e.default)((0,De.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article");const Te="_badge_k7hfg_55",Pe="_textTransform_k7hfg_61",Ee="_surveyActions_k7hfg_72",Me="_iconButton_k7hfg_82",Ae="_logo_k7hfg_126",Be="_logoImageWrapper_k7hfg_139",Re="_imageOverlay_k7hfg_143",Fe="_cameraIcon_k7hfg_155",Ue="_relativeContainer_k7hfg_182",We="_absoluteOverlay_k7hfg_187",Ve="_truncatedText_k7hfg_206",He="_exampleTruncatedText_k7hfg_220",Ge="_titleContainer_k7hfg_235",Le="_nameIcon_k7hfg_248",Ye="_descriptionContainer_k7hfg_259",Qe="_descriptionIcon_k7hfg_272",qe="_photoIcon_k7hfg_281";function Ze(e,t){return e?oe(e).format("DD MMM YYYY"):""}var Xe={},Je=u;Object.defineProperty(Xe,"__esModule",{value:!0});var Ke=Xe.default=void 0,et=Je(b()),tt=d;Ke=Xe.default=(0,et.default)((0,tt.jsx)("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"}),"FormatQuote");var rt={},at=u;Object.defineProperty(rt,"__esModule",{value:!0});var nt=rt.default=void 0,ot=at(b()),it=d;nt=rt.default=(0,ot.default)((0,it.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");const st=({survey:e,onSave:t,isEditable:r=!0})=>{const a=n(i.useState(!1),2),o=a[0],s=a[1],l=n(i.useState(e.name),2),c=l[0],u=l[1];return d.jsx(p,{className:Ge,children:o?d.jsx(le,{sx:{px:3,flexGrow:1},value:c,onChange:e=>{u(e.target.value)},onBlur:()=>{""===c.trim()?u(e.name):c!==e.name&&t(c,(()=>u(e.name))),s(!1)},autoFocus:!0,variant:"standard",fullWidth:!0,InputProps:{style:{color:"white"}}}):d.jsxs(d.Fragment,{children:[d.jsx(G,{title:c.length>20?c:"",sx:{fontSize:"1.2rem"},arrow:!0,children:d.jsx(j,{variant:"h4",sx:{px:3},noWrap:!0,children:k(c,18)})}),r&&d.jsx(w,{className:Le,onClick:e=>{e.stopPropagation(),s(!0)},sx:{ml:1},children:d.jsx(L,{sx:{color:"white"}})})]})})},lt=({survey:e,onSave:t,isEditable:r=!0,isExample:a})=>{const o=n(i.useState(!1),2),s=o[0],l=o[1],c=n(i.useState(e.description),2),u=c[0],m=c[1],h=a?450:125;return d.jsx(p,{className:Ye,children:s?d.jsx(le,{sx:{px:3},value:u,onChange:e=>{m(e.target.value)},onBlur:()=>{u!==e.description&&t(u,(()=>m(e.description))),l(!1)},autoFocus:!0,variant:"standard",fullWidth:!0,multiline:!0,rows:3}):d.jsxs(d.Fragment,{children:[d.jsx(G,{title:(null==u?void 0:u.length)>h?u:"",sx:{fontSize:"1.2rem"},arrow:!0,children:d.jsx(j,{variant:"caption",sx:{px:3,color:u?"inherit":"gray",flexGrow:1},className:`${a?He:Ve}`,children:k(u,h)||"Click to add a description..."})}),r&&d.jsx(w,{className:`${Qe}`,onClick:e=>{e.stopPropagation(),l(!0)},sx:{ml:1},children:d.jsx(L,{sx:{color:"gray"}})})]})})},ct="draft",dt="closed",ut="active",pt="expired",mt="scheduled",ht=e=>{switch(e){case ct:return"#e9db3e";case dt:return"#d32f2f";case pt:return"#9d4435";case mt:return"#607d8b";case ut:return"#669834";default:return}},gt=({survey:e,example:t=!1,onClone:a,onDelete:o,onClose:s,onUpdateTitle:l,onUpdateDescription:c,onUpdateImage:u})=>{const g=C("manage").t,_=(e=>{switch(e.status){case"draft":default:return ct;case"closed":return dt;case"active":return e.endDate&&U(e.endDate)<Date.now()?pt:e.startDate&&U(e.startDate)>Date.now()?mt:ut}})(e),v=S("survey"),f=S("design"),x=n(i.useState(!1),2),y=x[0],b=x[1],k=n(i.useState(null),2),$=k[0],D=k[1],T=m(),P=z(),E=h(),M=()=>{b(!1)};return d.jsxs(d.Fragment,{children:[d.jsx(Y,{}),d.jsx(Q,{open:y,autoHideDuration:6e3,onClose:M,children:d.jsx(q,{onClose:M,severity:"error",children:$})}),d.jsxs(ce,{sx:{"&:hover":{boxShadow:e=>e.customShadows.z24}},children:[d.jsxs(O,{sx:{pb:0},children:[d.jsxs(O,{spacing:.5,sx:{mb:1},children:[d.jsxs(p,{className:Ue,children:[d.jsx(p,{className:We,children:d.jsx(st,{survey:e,onSave:(t,a)=>{P(I(!0)),v.putSurvey(r(r({},e),{},{name:t}),e.id).then((()=>{l(e.id,t)})).catch((e=>{e.name==N.DUPLICATE_SURVEY_NAME.name&&(D(g(`processed_errors.${e.name}`)),b(!0),a())})).finally((()=>{P(I(!1))}))},isEditable:Z()&&!t})}),d.jsxs(p,{className:Ae,children:[d.jsxs(p,{className:`${Be}`,children:[d.jsx(de,{component:"img",image:e.image?se(e.image,e.id,t):"/qlarr.png",height:"150"}),d.jsx(p,{className:Re}),Z()&&!e.example&&d.jsx(p,{className:qe,onClick:t=>{t.stopPropagation(),document.getElementById(`imageInput-${e.id}`).click()},children:d.jsx(B,{className:Fe})})]}),d.jsx("input",{id:`imageInput-${e.id}`,type:"file",accept:"image/*",style:{display:"none"},onChange:t=>{const r=t.target.files[0],a=new FileReader;a.onload=()=>{f.uploadResource(r,e.id).then((t=>{v.putSurvey({image:t.name},e.id).then((r=>{u(e.id,t.name)})).catch((e=>{D(g(`processed_errors.${e.name}`)),b(!0)})).finally((()=>{P(I(!1))}))})).catch((e=>{D(g(`processed_errors.${e.name}`)),b(!0)})).finally((()=>{P(I(!1))}))},a.readAsDataURL(r)}})]})]}),d.jsx(lt,{survey:e,isExample:t,onSave:t=>{P(I(!0)),v.putSurvey(r(r({},e),{},{description:t}),e.id).then((()=>{c(e.id,t)})).catch((e=>{})).finally((()=>{P(I(!1))}))},isEditable:Z()&&!t}),!t&&d.jsxs(d.Fragment,{children:[d.jsxs(O,{direction:"row",alignItems:"center",spacing:.5,sx:{px:3,typography:"body2",color:"text.secondary"},children:[d.jsx("span",{style:{backgroundColor:ht(_)},className:Te})," ",d.jsx(j,{variant:"subtitle2",className:Pe,children:g(`status.${_}`)})]}),d.jsxs(p,{sx:{px:3,display:"flex",gap:2,my:.5},children:[!t&&"closed"!==e.status&&!1===e.latestVersion.published&&d.jsx(G,{title:"Has unpublished changes",children:d.jsx(nt,{sx:{color:"text.secondary"}})}),d.jsx(G,{title:`Complete Responses: ${e.completeResponseCount}`,children:d.jsx(je,{badgeContent:e.completeResponseCount,color:"primary",anchorOrigin:{vertical:"top",horizontal:"right"},children:d.jsx(X,{sx:{color:"text.secondary"}})})}),d.jsx(G,{title:e.surveyQuota>0?`Quota: ${e.surveyQuota}`:"No Quota",children:d.jsx(je,{badgeContent:e.surveyQuota>0?e.surveyQuota:0,color:"primary",anchorOrigin:{vertical:"top",horizontal:"right"},children:d.jsx(Ke,{sx:{color:"text.secondary"}})})})]})]})]}),d.jsxs(j,{variant:"caption",sx:{px:3,color:"text.disabled"},children:[d.jsx("strong",{children:g("edit_survey.metadata.created")}),":"," ",Ze(e.creationDate)]}),d.jsxs(j,{variant:"caption",sx:{px:3,color:"text.disabled"},children:[d.jsx("strong",{children:g("edit_survey.metadata.last_modified")}),":"," ",Ze(e.lastModified)]}),!t&&e.startDate&&d.jsxs(j,{variant:"caption",sx:{px:3,color:"text.disabled"},children:[d.jsx("strong",{children:g("edit_survey.metadata.start_date")}),":"," ",Ze(e.startDate)]}),!t&&e.endDate&&d.jsxs(j,{variant:"caption",sx:{px:3,color:"text.disabled"},children:[d.jsx("strong",{children:g("edit_survey.metadata.end_date")}),":"," ",Ze(e.endDate)]})]}),d.jsx(pe,{sx:{borderStyle:"dashed",my:1}}),d.jsxs(O,{sx:{p:3,pt:0,typography:"body2",color:"text.secondary",textTransform:"capitalize"},className:Ee,children:[d.jsx(w,{className:Me,sx:{backgroundColor:E.palette.primary.main,"&:hover":{backgroundColor:E.palette.primary.main}},"aria-label":"redirect",size:"large",onClick:t=>{t.stopPropagation();const r=e.example?`/guest/preview/${e.id}`:`/design-survey/${e.id}`;T(r)},children:t?d.jsx(R,{sx:{color:"#fff"}}):d.jsx(Ne,{sx:{color:"#fff"}})}),Z()&&!t&&"active"===e.status&&d.jsx(G,{title:g("edit_survey.close_title"),children:d.jsx(w,{className:Me,"aria-label":"stop",size:"large",onClick:()=>s(e.id),children:d.jsx(Se,{color:"primary"})})}),Z()&&d.jsx(G,{title:g("edit_survey.clone_survey"),children:d.jsx(w,{className:Me,"aria-label":"clone",size:"large",onClick:a,children:d.jsx(J,{color:"primary"})})}),!t&&e.status!==ut&&d.jsx(G,{title:g("action_btn.delete"),children:d.jsx(w,{className:Me,"aria-label":"delete",size:"large",onClick:()=>o(e.id),children:d.jsx(ie,{color:"primary"})})})]})]})]})},_t=({sort:e,filter:t,onFilterSelected:r,onSortSelected:a})=>{const n=[{value:"all",label:"status.all"},{value:ut,label:`status.${ut}`},{value:mt,label:`status.${mt}`},{value:ct,label:`status.${ct}`},{value:pt,label:`status.${pt}`},{value:dt,label:`status.${dt}`}],o=C("manage").t;return d.jsxs(p,{rowGap:2.5,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[d.jsx(j,{variant:"h5",flex:"1",textTransform:"uppercase",fontWeight:"600",children:o("my_surveys")}),d.jsxs(O,{width:"100%",spacing:2.5,direction:{xs:"column",md:"row"},alignItems:"center",children:[d.jsx(K,{onChange:a,native:!0,value:e,name:"Status",label:o("label.sort_by"),children:[{value:"responses_desc",label:"survey_sort_options.responses_desc"},{value:"last_modified_desc",label:"survey_sort_options.last_modified_desc"}].map((e=>d.jsx("option",{value:e.value,children:o(e.label)},e.value)))}),d.jsx(K,{onChange:r,native:!0,value:t,name:"Status",label:o("edit_survey.status"),children:n.map((e=>d.jsx("option",{value:e.value,children:o(e.label)},e.value)))})]})]})},vt="_exampleSurveysContainer_apkeh_1",ft=({onClone:e})=>{const t=C("manage").t,a=n(i.useState(!1),2),o=a[0],s=a[1],l=n(i.useState([]),2),c=l[0],u=l[1],m=S("survey");return i.useEffect((()=>{s(!0),m.getGuestsSurveys().then((e=>{if(s(!1),e){const t=e.map((e=>r(r({},e),{},{example:!0})));u(t)}})).catch((e=>{s(!1),$(e)}))}),[]),d.jsxs(d.Fragment,{children:[d.jsx(j,{variant:"h5",marginBottom:2,fontWeight:600,textTransform:"uppercase",children:t("example_surveys")}),o?d.jsx(g,{}):d.jsx(p,{className:vt,sx:{mt:3,columnGap:4,display:"grid",rowGap:{xs:4,md:5},gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"}},children:null==c?void 0:c.map((t=>d.jsx(gt,{survey:t,onClone:()=>e(t),example:!0},t.id)))})]})},xt={createUserCard:"_createUserCard_zrfc2_1",formGroup:"_formGroup_zrfc2_9",rightContainer:"_rightContainer_zrfc2_16",createButton:"_createButton_zrfc2_24",surveyNameInput:"_surveyNameInput_zrfc2_39",selectInput:"_selectInput_zrfc2_55",errorText:"_errorText_zrfc2_63"},yt=[{value:ve.WEB,label:`mode.${ve.WEB}`},{value:ve.OFFLINE,label:`mode.${ve.OFFLINE}`},{value:ve.MIXED,label:`mode.${ve.MIXED}`}];function bt({onSurveyCreated:t}){const r=S("survey"),a=C("manage").t,n=z(),o={surveyName:"",surveyMode:ve.MIXED,surveyActiveFrom:"",surveyActiveTo:""},i=me().shape({surveyName:he().required(a("survey_required")).max(50,a("survey_too_long"))}),s=ee({resolver:ge(i),defaultValues:o}),l=s.setError,c=s.reset,u=s.handleSubmit,m=s.formState.isSubmitting,h=u(function(){var o,i=(o=function*(e){n(I(!0));const o={name:e.surveyName,usage:e.surveyMode};e.surveyActiveFrom&&(o.startDate=W(surveyActiveFrom)),e.surveyActiveTo&&(o.endDate=W(surveyActiveTo)),r.createSurvey(o).then((()=>{t&&(t(),c())})).catch((e=>{e.name==N.DUPLICATE_SURVEY_NAME.name?l("surveyName",{type:"manual",message:a(`processed_errors.${e.name}`)}):e.name==N.INVALID_SURVEY_DATES.name&&l("surveyActiveFrom",{type:"manual",message:a(`processed_errors.${e.name}`)})})).finally((()=>{n(I(!1))}))},function(){var t=this,r=arguments;return new Promise((function(a,n){var i=o.apply(t,r);function s(t){e(i,a,n,s,l,"next",t)}function l(t){e(i,a,n,s,l,"throw",t)}s(void 0)}))});return function(e){return i.apply(this,arguments)}}());return d.jsx(ce,{className:xt.createUserCard,children:d.jsx(te,{methods:s,onSubmit:h,children:d.jsxs(p,{rowGap:2.5,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(3, 1fr)"},children:[d.jsx(re,{name:"surveyName",label:a("label.survey_name")}),d.jsx(K,{name:"surveyMode",label:a("label.survey_mode"),children:yt.map((e=>d.jsx("option",{value:e.value,children:a(e.label)},e.value)))}),d.jsx(_e,{fullWidth:!0,size:"large",color:"primary",type:"submit",variant:"contained",loading:m,children:a("action_btn.create")})]})})})}}}}))}();
