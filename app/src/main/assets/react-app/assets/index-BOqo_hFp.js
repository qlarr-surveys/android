import{s as k,A as I,u as A,j as s}from"./index-BdaHkdQl.js";import{c as R,a as m,b as T,o as F}from"./yup-DY16kGze.js";import{u as L,F as $,R as l,I as a,r as q}from"./Web-Xt-AHKsA.js";import{R as z}from"./router-link-CfAjyfVJ.js";import{A as B,y as C,D as E,l as D,F as H,am as o,a3 as V,T as W,I as p}from"./use-service-D09swmN7.js";import{u as O}from"./use-boolean-Bxf0TRXb.js";import{I as u}from"./InputAdornment-CMc9n4GQ.js";import{L as Z}from"./LoadingButton-CeTIEj79.js";import{L as G}from"./Link-Iys5U15E.js";import"./TextField-B66jFwFo.js";import"./useFormControl-BousA45m.js";import"./Checkbox-0qy6A3Vu.js";import"./SwitchBase-outpB1OY.js";import"./Tabs-CXy611xA.js";import"./radioClasses-DNdhtY0L.js";import"./tableRowClasses-D2zlaSzG.js";import"./FormControlLabel-DrGXXvQK.js";function cs({confirmNewUser:t=!1}){const h=B("auth"),{t:e}=C("manage"),x=k(),w=E(),f=D(),r=O(),[g]=I(),{token:j}=A(),b=g.get("token"),v=R().shape({password:m().required(e("password_required")).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/,e("error.invalid_password")),confirmPassword:m().required(e("password_required")).oneOf([T("password")],e("error.password_should_match"))}),_={email:""},n=L({resolver:F(v),defaultValues:_}),{setError:i,handleSubmit:d,formState:{isSubmitting:y}}=n,S=d(async P=>{try{await h.resetPassword(t,t?j:b,P.password),x("/")}catch(c){i("password",{type:"manual",message:e("processed_errors.".concat(c.name))}),i("confirmPassword",{type:"manual",message:e("processed_errors.".concat(c.name))})}finally{w(H(!1))}});return s.jsx(s.Fragment,{children:s.jsx(o,{alignItems:"center",justifyContent:"center",sx:{px:2,py:12,minHeight:"100vh"},children:s.jsx(o,{spacing:4,sx:{p:4,width:1,mx:"auto",flexShrink:0,maxWidth:400,borderRadius:2,bgcolor:"background.default",boxShadow:f.customShadows.z24,textAlign:{xs:"center",md:"left"}},children:s.jsxs(o,{sx:{textAlign:"center"},children:[s.jsx(V,{alt:"reset password",src:"/ic_lock_password.svg",sx:{mb:5,width:96,height:96,mx:"auto"}}),s.jsx(W,{variant:"h3",paragraph:!0,children:e("reset_password.title")}),s.jsxs($,{methods:n,onSubmit:d(S),children:[s.jsxs(o,{spacing:2.5,children:[s.jsx(l,{name:"password",label:e("label.new_password"),type:r.value?"text":"password",InputProps:{endAdornment:s.jsx(u,{position:"end",children:s.jsx(p,{onClick:r.onToggle,edge:"end",children:s.jsx(a,{icon:r.value?"carbon:view":"carbon:view-off"})})})}}),s.jsx(l,{name:"confirmPassword",label:e("label.confirm_new_password"),type:r.value?"text":"password",InputProps:{endAdornment:s.jsx(u,{position:"end",children:s.jsx(p,{onClick:r.onToggle,edge:"end",children:s.jsx(a,{icon:r.value?"carbon:view":"carbon:view-off"})})})}})]}),s.jsx(Z,{fullWidth:!0,size:"large",color:"primary",type:"submit",variant:"contained",loading:y,sx:{mt:2.5},children:e("reset_password.reset")})]}),s.jsxs(G,{component:z,href:q.login,color:"inherit",variant:"subtitle2",sx:{mt:3,mx:"auto",alignItems:"center",display:"inline-flex"},children:[s.jsx(a,{icon:"carbon:chevron-left",width:16,sx:{mr:1}}),e("forgot_password.return_to_signin")]})]})})})})}export{cs as default};
