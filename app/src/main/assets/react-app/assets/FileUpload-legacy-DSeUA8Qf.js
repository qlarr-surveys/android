!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,l,o,a,r=[],d=!0,s=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;d=!1}else for(;!(d=(i=o.call(t)).done)&&(r.push(i.value),r.length!==n);d=!0);}catch(e){s=!0,l=e}finally{try{if(!d&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw l}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}System.register(["./index-legacy-DMBe9EAg.js","./use-service-legacy-CgI9X4sP.js","./index-legacy-C-i1VDP4.js","./Link-legacy-EkQEaKQD.js","./isTouchDevice-legacy-DkWZCMK4.js","./common-legacy-ztB9Cads.js","./ArrowBack-legacy-BOcXtrdD.js"],(function(n,t){"use strict";var i,l,o,a,r,d,s,c,u,f,v,m,p,x,j,y,h,g;return{setters:[e=>{i=e.r,l=e.j,o=e.R,a=e.z},e=>{r=e.e,d=e.A,s=e.l,c=e.y,u=e.aJ,f=e.v,v=e.D,m=e.an,p=e.ax,x=e.av,j=e.az,y=e.aq},e=>{h=e.a},e=>{g=e.L},null,null,null],execute:function(){n("default",(function(n){var r,_,b,w,z;const A=d("run"),S=s(),C=c("run").t;let F=u(null===(r=n.component.validation)||void 0===r||null===(r=r.validation_file_types)||void 0===r?void 0:r.fileTypes);const k=(null===(_=n.component.validation)||void 0===_||null===(_=_.validation_max_file_size)||void 0===_?void 0:_.isActive)&&(null===(b=n.component.validation)||void 0===b||null===(b=b.validation_max_file_size)||void 0===b?void 0:b.max_size)||-1,q=f((e=>{let t=e.runState.values[n.component.qualifiedCode];return null==t?void 0:t.value})),M=f((e=>e.runState.preview)),O=v(),D=e(i.useState(),2),I=D[0],K=D[1],T=e(i.useState(!1),2),L=T[0],U=T[1],B=!L&&I&&F.length>0&&!F.includes(I.type),E=!L&&I&&k>0&&I.size/1024>k,J=()=>{K(void 0)};let R=I&&!B&&!E;return l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"contained-button-file",children:[l.jsx(t,{id:"contained-button-file",type:"file",accept:F?F.join(","):void 0,onChange:e=>{O(x(n.component.qualifiedCode)),K(e.target.files[0])}}),l.jsx(m,{disabled:L,onClick:e=>{if(window.Android){const t=n.component.qualifiedCode;e.preventDefault(),window.Android.selectFile(t,(null==F?void 0:F.join(","))||"",k||-1),window["onFileSelected"+t]=(e,t,i)=>{O(x(n.component.qualifiedCode)),K({name:e,size:t,type:i})}}},variant:"contained",component:"span",children:C("choose_file")})]}),I?l.jsxs(o.Fragment,{children:[l.jsxs("span",{children:["Â ",I.name," - ",Math.round(I.size/1024),"K"]}),R?l.jsx(m,{disabled:L,variant:"text",onClick:()=>{U(!0),j(A,n.component.qualifiedCode,M,I).then((e=>{U(!1),J(),O(y({componentCode:n.component.qualifiedCode,value:e}))})).catch((e=>{U(!1),console.error(e)}))},children:C("upload")}):"",l.jsx(m,{disabled:L,sx:{fontFamily:S.textStyles.text.font,fontSize:S.textStyles.text.size},variant:"text",onClick:J,children:C("cancel")})]}):"",E&&l.jsxs(o.Fragment,{children:[l.jsx("br",{}),l.jsx(h,{name:"validation_max_file_size",validation:null===(w=n.component.validation)||void 0===w?void 0:w.validation_max_file_size})]}),B&&l.jsxs(o.Fragment,{children:[l.jsx("br",{}),l.jsx(h,{name:"validation_file_types",validation:null===(z=n.component.validation)||void 0===z?void 0:z.validation_file_types})]}),L?l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(a,{}),l.jsx("br",{}),l.jsx("span",{children:C("uploading")})]}):q&&q.stored_filename?l.jsxs(o.Fragment,{children:[l.jsx("br",{}),l.jsx("br",{}),window.Android?l.jsxs(g,{target:"_blank",onClick:()=>{window.Android.previewFileUpload(q.stored_filename,q.filename)},children:[q.filename," - ",Math.round(q.size/1024),"K"]}):l.jsxs(g,{target:"_blank",href:p(q.stored_filename),children:[q.filename," - ",Math.round(q.size/1024),"K"]})]}):""]})}));const t=r("input")({display:"none"})}}}))}();
