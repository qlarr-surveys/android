import{s as k,A as I,u as R,j as s}from"./index-Dk6dJ9ej.js";import{c as T,a as m,b as A,L as F,o as L}from"./yup-Ke-idBs6.js";import{u as $,F as q,R as l,I as o,r as z}from"./Web-DQ9Pn3X4.js";import{R as B}from"./router-link-PFV7cSD7.js";import{R as C,M as E,U as H,w as O,X as V,aO as a,ar as W,T as D,I as p}from"./use-service-CuOd9RJq.js";import{u as M}from"./use-boolean-CcZ3eDor.js";import{I as u}from"./InputAdornment-73wn1e1W.js";import{L as X}from"./Link-XdUsRC_k.js";import"./Checkbox-B5kyj27j.js";import"./SwitchBase-vj41ugwS.js";import"./Tabs-BEdGyaaJ.js";import"./radioClasses-u6Ak_u_2.js";import"./tableRowClasses-CVBxymtu.js";import"./TextField-D9TfNg6R.js";import"./FormControlLabel-DbQERhmC.js";function is({confirmNewUser:t=!1}){const h=C("auth"),{t:e}=E("manage"),x=k(),w=H(),g=O(),r=M(),[f]=I(),{token:j}=R(),b=f.get("token"),v=T().shape({password:m().required(e("password_required")).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/,e("error.invalid_password")),confirmPassword:m().required(e("password_required")).oneOf([A("password")],e("error.password_should_match"))}),_={email:""},n=$({resolver:L(v),defaultValues:_}),{setError:i,handleSubmit:d,formState:{isSubmitting:y}}=n,S=d(async P=>{try{await h.resetPassword(t,t?j:b,P.password),x("/")}catch(c){i("password",{type:"manual",message:e("processed_errors.".concat(c.name))}),i("confirmPassword",{type:"manual",message:e("processed_errors.".concat(c.name))})}finally{w(V(!1))}});return s.jsx(s.Fragment,{children:s.jsx(a,{alignItems:"center",justifyContent:"center",sx:{px:2,py:12,minHeight:"100vh"},children:s.jsx(a,{spacing:4,sx:{p:4,width:1,mx:"auto",flexShrink:0,maxWidth:400,borderRadius:2,bgcolor:"background.default",boxShadow:g.customShadows.z24,textAlign:{xs:"center",md:"left"}},children:s.jsxs(a,{sx:{textAlign:"center"},children:[s.jsx(W,{alt:"reset password",src:"/ic_lock_password.svg",sx:{mb:5,width:96,height:96,mx:"auto"}}),s.jsx(D,{variant:"h3",paragraph:!0,children:e("reset_password.title")}),s.jsxs(q,{methods:n,onSubmit:d(S),children:[s.jsxs(a,{spacing:2.5,children:[s.jsx(l,{name:"password",label:e("label.new_password"),type:r.value?"text":"password",InputProps:{endAdornment:s.jsx(u,{position:"end",children:s.jsx(p,{onClick:r.onToggle,edge:"end",children:s.jsx(o,{icon:r.value?"carbon:view":"carbon:view-off"})})})}}),s.jsx(l,{name:"confirmPassword",label:e("label.confirm_new_password"),type:r.value?"text":"password",InputProps:{endAdornment:s.jsx(u,{position:"end",children:s.jsx(p,{onClick:r.onToggle,edge:"end",children:s.jsx(o,{icon:r.value?"carbon:view":"carbon:view-off"})})})}})]}),s.jsx(F,{fullWidth:!0,size:"large",color:"primary",type:"submit",variant:"contained",loading:y,sx:{mt:2.5},children:e("reset_password.reset")})]}),s.jsxs(X,{component:B,href:z.login,color:"inherit",variant:"subtitle2",sx:{mt:3,mx:"auto",alignItems:"center",display:"inline-flex"},children:[s.jsx(o,{icon:"carbon:chevron-left",width:16,sx:{mr:1}}),e("forgot_password.return_to_signin")]})]})})})})}export{is as default};
