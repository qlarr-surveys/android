import{s as L,r as R,j as e}from"./index-BdaHkdQl.js";import{d as P,c as k,a as t,b as $,o as z}from"./yup-DY16kGze.js";import{u as T,r as D,F as Z,R as i,I as h}from"./Web-Xt-AHKsA.js";import{R as C}from"./router-link-CfAjyfVJ.js";import{A as G,y as O,D as W,F as m,ao as B,T as l,am as f,I as g}from"./use-service-D09swmN7.js";import{u as H}from"./use-boolean-Bxf0TRXb.js";import{G as M,a as U}from"./index.esm-BOJiKYyZ.js";import{S as V}from"./SuccessMessage-Btsc7wz5.js";import{L as J}from"./Link-Iys5U15E.js";import{I as _}from"./InputAdornment-CMc9n4GQ.js";import{L as K}from"./LoadingButton-CeTIEj79.js";import{D as Q}from"./Divider-OC9h4qP8.js";import"./TextField-B66jFwFo.js";import"./useFormControl-BousA45m.js";import"./Checkbox-0qy6A3Vu.js";import"./SwitchBase-outpB1OY.js";import"./Tabs-CXy611xA.js";import"./radioClasses-DNdhtY0L.js";import"./tableRowClasses-D2zlaSzG.js";import"./FormControlLabel-DrGXXvQK.js";function je(){const d=G("auth"),{t:r}=O("manage"),o=H(),n=W(),x=L(),[j,w]=R.useState(!1);P(t,"noWhitespace",function(a){return this.test("no-whitespace",a,function(s){const{path:c,createError:F}=this;return s!=null&&s.trim()?!0:F({path:c,message:a})})});const b=k().shape({firstName:t().required(r("firstname_required")).noWhitespace(r("error.invalid_first_name")).max(50,r("error.first_name_too_long")).matches(/^[A-Za-z]+$/,r("error.invalid_first_name")),lastName:t().required(r("lastname_required")).noWhitespace(r("error.invalid_last_name")).max(50,r("error.last_name_too_long")).matches(/^[A-Za-z]+$/,r("error.invalid_last_name")),email:t().required(r("email_required")).matches(/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/i,r("error.invalid_email")),password:t().required(r("password_required")).matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/,r("error.invalid_password")),confirmPassword:t().required(r("password_required")).oneOf([$("password")],r("error.password_should_match"))}),v={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},p=T({resolver:z(b),defaultValues:v}),{setError:S,reset:X,handleSubmit:u,formState:{isSubmitting:y}}=p,A=u(async a=>{try{let s={email:a.email,password:a.password,lastName:a.lastName,firstName:a.firstName};n(m(!0)),await d.signup(s),w(!0)}catch(s){s.name==B.DUPLICATE_EMAIL.name&&S("email",{type:"manual",message:r("processed_errors.".concat(s.name))})}finally{n(m(!1))}}),I=a=>{n(m(!0)),d.googleSignIn(a,n).then(s=>{const{from:c}=location.state||{from:{pathname:"/"}};x(c)}).catch(s=>{}).finally(()=>{n(m(!1))})},E=e.jsxs("div",{children:[e.jsx(l,{variant:"h3",paragraph:!0,children:r("sign_up.get_started")}),e.jsxs(l,{variant:"body2",sx:{color:"text.secondary"},children:[r("sign_up.have_account"),e.jsxs(J,{component:C,href:D.login,variant:"subtitle2",color:"primary",children:[" ",r("login.login")]})]})]}),N=e.jsx(f,{direction:"row",justifyContent:"center",children:e.jsx(M,{clientId:"464768435207-e2rkf9h0fjbcnhh2egkj3e9bkvub2p4o.apps.googleusercontent.com",children:e.jsx(U,{onSuccess:I,onError:()=>{console.log("Login Failed")}})})}),q=e.jsx(Z,{methods:p,onSubmit:u(A),children:e.jsxs(f,{spacing:2.5,children:[e.jsx(i,{name:"firstName",label:r("label.first_name")}),e.jsx(i,{name:"lastName",label:r("label.last_name")}),e.jsx(i,{name:"email",label:r("label.email")}),e.jsx(i,{name:"password",label:r("label.password"),type:o.value?"text":"password",InputProps:{endAdornment:e.jsx(_,{position:"end",children:e.jsx(g,{onClick:o.onToggle,edge:"end",children:e.jsx(h,{icon:o.value?"carbon:view":"carbon:view-off"})})})}}),e.jsx(i,{name:"confirmPassword",label:r("label.confirm_new_password"),type:o.value?"text":"password",InputProps:{endAdornment:e.jsx(_,{position:"end",children:e.jsx(g,{onClick:o.onToggle,edge:"end",children:e.jsx(h,{icon:o.value?"carbon:view":"carbon:view-off"})})})}}),e.jsx(K,{fullWidth:!0,color:"primary",size:"large",type:"submit",variant:"contained",loading:y,children:r("sign_up.sign_up")})]})});return e.jsx(e.Fragment,{children:j?e.jsx(V,{t:r,message:"sign_up.success"}):e.jsxs(e.Fragment,{children:[E,q,e.jsx(Q,{children:e.jsx(l,{variant:"body2",sx:{color:"text.disabled"},children:r("sign_up.continue_with")})}),N]})})}export{je as default};
