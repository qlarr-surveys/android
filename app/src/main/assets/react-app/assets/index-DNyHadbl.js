import{j as e,s as L,r as s,B as c}from"./index-vqe_o6H9.js";import{M as D,ax as O,S as B,N as y,R as W,U as $,T as w,aL as V,aD as _,X,Z as C,aN as j}from"./use-service-d2kt1S5h.js";import{l as b}from"./DateUtils-Ce4EpQzP.js";import{S as a}from"./survey-D2pw4t3m.js";import{I as Y,T as q,a as G}from"./TextField-C6oYyR3a.js";import{K}from"./Web-C9ZT8YVq.js";import{S as P}from"./index-BLlY04Q7.js";import{C as H}from"./Card-CpAAQw08.js";import{F as Z}from"./FormGroup-D0awRfnu.js";import"./Checkbox-DhL0zY9B.js";import"./SwitchBase-Dz0Guboj.js";import"./Tabs-Tuo9qr73.js";import"./radioClasses-CQtWv4A0.js";import"./tableRowClasses-DQPZ0xYH.js";import"./FormControlLabel-BRqqeCMk.js";import"./index-BivloRg0.js";import"./dayjs.min-DYKOtYve.js";import"./DateTimePicker-Jjifo1cB.js";import"./InputAdornment-CQBqlV5P.js";const z="_mainContainer_17u7e_1",J="_createUserCard_17u7e_9",Q="_blockItem_17u7e_13",ee="_errorText_17u7e_20",o={mainContainer:z,createUserCard:J,blockItem:Q,errorText:ee};function re(n){return e.jsx(K,{...n,style:{color:"#181735"}})}const te=({surveyMode:n,onSurveyModeChanged:m})=>{const{t:r}=D("manage");return e.jsxs(O,{fullWidth:!0,children:[e.jsx(Y,{id:"survey-mode-label",children:r("label.survey_mode")}),e.jsxs(B,{labelId:"survey-mode-label",id:"demo-simple-select",value:n,label:r("label.survey_mode"),onChange:m,sx:{minWidth:"160px",borderRadius:"12px",backgroundColor:"#f7f8fc","& .MuiOutlinedInput-notchedOutline":{border:"none"}},IconComponent:re,children:[e.jsx(y,{value:a.WEB,children:r("mode.".concat(a.WEB))}),e.jsx(y,{value:a.OFFLINE,children:r("mode.".concat(a.OFFLINE))}),e.jsx(y,{value:a.MIXED,children:r("mode.".concat(a.MIXED))})]})]})};function je(){const n=W("survey"),m=L(),{t:r}=D("manage"),h=$(),[u,g]=s.useState(""),[d,i]=s.useState(""),[E,v]=s.useState(""),[S,N]=s.useState(a.MIXED),[x,I]=s.useState(null),[p,T]=s.useState(null),A=t=>{g(t.target.value),i("")},F=t=>{N(t.target.value)},M=t=>{v(""),I(t.toDate())},R=t=>{v(""),T(t.toDate())},k=()=>(i(""),u.length==0?(i(r("survey_required")),!1):!0),f=()=>{m(X.dashboard)},U=()=>{if(!k())return;h(C(!0));const t={name:u,usage:S};x&&(t.startDate=b(x)),p&&(t.endDate=b(p)),n.createSurvey(t).then(()=>{f()}).catch(l=>{l.name==j.DUPLICATE_SURVEY_NAME.name?i(r("processed_errors.".concat(l.name))):l.name==j.INVALID_SURVEY_DATES.name&&v(r("processed_errors.".concat(l.name)))}).finally(()=>{h(C(!1))})};return e.jsx(c,{className:o.mainContainer,children:e.jsxs(H,{className:o.createUserCard,children:[e.jsx(w,{variant:"h4",children:r("create_survey.title")}),e.jsxs(Z,{className:o.formGroup,children:[e.jsx(q,{sx:{maxWidth:"400px"},error:d.length>0,required:!0,value:u,id:"surveyName",label:r("label.survey_name"),name:"surveyName",onChange:A,variant:"standard"}),d&&e.jsx(G,{className:o.errorText,children:d}),e.jsxs(V,{flexDirection:"row",gap:5,sx:{mt:"40px"},children:[e.jsx(c,{className:o.blockItem,children:e.jsx(te,{surveyMode:S,onSurveyModeChanged:F})}),e.jsx(c,{className:o.blockItem,children:e.jsx(P,{error:E,surveyActiveFrom:x,surveyActiveTo:p,onSurveyActiveFromChanged:M,onSurveyActiveToChanged:R})})]})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"flex-end",mt:"40px"},children:[e.jsx(_,{onClick:f,children:r("action_btn.cancel")}),e.jsx(_,{onClick:U,children:r("action_btn.save")})]})]})})}export{je as default};
