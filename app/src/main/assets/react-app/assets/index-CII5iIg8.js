import{j as e,s as O,r as s,B as c}from"./index-Dk6dJ9ej.js";import{K as L,r as B}from"./Web-DQ9Pn3X4.js";import{M as g,av as W,S as $,N as y,R as w,U as V,T as X,aO as Y,aQ as _,X as C,aR as j}from"./use-service-CuOd9RJq.js";import{l as b}from"./DateUtils-Ce4EpQzP.js";import{S as a}from"./survey-D2pw4t3m.js";import{I as q,T as G,a as K}from"./TextField-D9TfNg6R.js";import{S as P}from"./index-DcYlLVEz.js";import{C as H}from"./Card-vFcRbAK1.js";import{F as Q}from"./FormGroup-BQ8WmqtL.js";import"./Checkbox-B5kyj27j.js";import"./SwitchBase-vj41ugwS.js";import"./Tabs-BEdGyaaJ.js";import"./radioClasses-u6Ak_u_2.js";import"./tableRowClasses-CVBxymtu.js";import"./FormControlLabel-DbQERhmC.js";import"./index-CNd-1HVJ.js";import"./dayjs.min-CgH4Saeh.js";import"./DateTimePicker-D-0LakcT.js";import"./InputAdornment-73wn1e1W.js";const z="_mainContainer_17u7e_1",J="_createUserCard_17u7e_9",Z="_blockItem_17u7e_13",ee="_errorText_17u7e_20",o={mainContainer:z,createUserCard:J,blockItem:Z,errorText:ee};function re(n){return e.jsx(L,{...n,style:{color:"#181735"}})}const te=({surveyMode:n,onSurveyModeChanged:m})=>{const{t:r}=g("manage");return e.jsxs(W,{fullWidth:!0,children:[e.jsx(q,{id:"survey-mode-label",children:r("label.survey_mode")}),e.jsxs($,{labelId:"survey-mode-label",id:"demo-simple-select",value:n,label:r("label.survey_mode"),onChange:m,sx:{minWidth:"160px",borderRadius:"12px",backgroundColor:"#f7f8fc","& .MuiOutlinedInput-notchedOutline":{border:"none"}},IconComponent:re,children:[e.jsx(y,{value:a.WEB,children:r("mode.".concat(a.WEB))}),e.jsx(y,{value:a.OFFLINE,children:r("mode.".concat(a.OFFLINE))}),e.jsx(y,{value:a.MIXED,children:r("mode.".concat(a.MIXED))})]})]})};function je(){const n=w("survey"),m=O(),{t:r}=g("manage"),h=V(),[u,D]=s.useState(""),[d,i]=s.useState(""),[E,v]=s.useState(""),[S,I]=s.useState(a.MIXED),[x,N]=s.useState(null),[p,T]=s.useState(null),A=t=>{D(t.target.value),i("")},F=t=>{I(t.target.value)},M=t=>{v(""),N(t.toDate())},R=t=>{v(""),T(t.toDate())},k=()=>(i(""),u.length==0?(i(r("survey_required")),!1):!0),f=()=>{m(B.dashboard)},U=()=>{if(!k())return;h(C(!0));const t={name:u,usage:S};x&&(t.startDate=b(x)),p&&(t.endDate=b(p)),n.createSurvey(t).then(()=>{f()}).catch(l=>{l.name==j.DUPLICATE_SURVEY_NAME.name?i(r("processed_errors.".concat(l.name))):l.name==j.INVALID_SURVEY_DATES.name&&v(r("processed_errors.".concat(l.name)))}).finally(()=>{h(C(!1))})};return e.jsx(c,{className:o.mainContainer,children:e.jsxs(H,{className:o.createUserCard,children:[e.jsx(X,{variant:"h4",children:r("create_survey.title")}),e.jsxs(Q,{className:o.formGroup,children:[e.jsx(G,{sx:{maxWidth:"400px"},error:d.length>0,required:!0,value:u,id:"surveyName",label:r("label.survey_name"),name:"surveyName",onChange:A,variant:"standard"}),d&&e.jsx(K,{className:o.errorText,children:d}),e.jsxs(Y,{flexDirection:"row",gap:5,sx:{mt:"40px"},children:[e.jsx(c,{className:o.blockItem,children:e.jsx(te,{surveyMode:S,onSurveyModeChanged:F})}),e.jsx(c,{className:o.blockItem,children:e.jsx(P,{error:E,surveyActiveFrom:x,surveyActiveTo:p,onSurveyActiveFromChanged:M,onSurveyActiveToChanged:R})})]})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"flex-end",mt:"40px"},children:[e.jsx(_,{onClick:f,children:r("action_btn.cancel")}),e.jsx(_,{onClick:U,children:r("action_btn.save")})]})]})})}export{je as default};
