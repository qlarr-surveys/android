import{r as w,m as d}from"./index-DCf9ET77.js";import{b as S,J as y,E as C,H as A,O,v as R,L as h,Q as m,N as M,K as z,V as E}from"./Android-0LfW9AkK.js";import{F as g,R as I}from"./RadioGroup-eaSTXoM3.js";import{C as q}from"./Checkbox-DBTQ9ukp.js";import"./RadioGroupContext-DfJskUDp.js";import"./SwitchBase-BDCXLIFT.js";function T(e){var i;const o=S(),c=y(),r=e.Answer.type!=="all"&&e.allSelected||e.Answer.type!=="none"&&e.noneSelected,f=C(u=>{var x;let a=u.runState.values[(x=e.Answer)==null?void 0:x.qualifiedCode];return typeof(a==null?void 0:a.relevance)>"u"||a.relevance},A),t=u=>{let a=[...e.parentValue];u.target.checked&&e.Answer.code==="Aall"?a=e.allCodes:!u.target.checked&&e.Answer.code==="Aall"?a=[]:u.target.checked&&e.Answer.code==="Anone"?a=["Anone"]:u.target.checked?a.push(e.Answer.code):a=a.filter(x=>x!==e.Answer.code),console.log(a),c(h({componentCode:e.parentCode,value:a})),c(m(u.target.name)),c(m(e.parentCode))};return f?d.jsx(g,{control:d.jsx(q,{checked:e.parentValue.indexOf(e.Answer.code)>-1||e.Answer.code==="Aall"&&e.allSelected,onChange:t,disabled:r,name:e.Answer.qualifiedCode,sx:{color:o.textStyles.text.color}}),label:d.jsx(O,{elementCode:e.Answer.code,fontFamily:o.textStyles.text.font,color:R(o.textStyles.text.color,r?.5:1),fontSize:o.textStyles.text.size,name:"label",lang:e.lang,content:(i=e.Answer.content)==null?void 0:i.label})}):""}const D=w.memo(T);function Q(e){const o=C(t=>t.runState.values[e.component.qualifiedCode].value||[],A),c=e.component.answers.filter(t=>t.type!=="all"&&t.type!=="none"&&t.type!=="other").map(t=>t.code),r=c.every(t=>o.indexOf(t)>-1),f=o.indexOf("Anone")>-1;return d.jsx(M,{component:"fieldset",children:d.jsx(I,{children:e.component.answers.map(t=>t.type==="other"?d.jsx(B,{disabled:r||f,allSelected:r,noneSelected:f,Answer:t,parentCode:e.component.qualifiedCode},t.qualifiedCode):d.jsx(D,{lang:e.lang,parentValue:o,Answer:t,allCodes:c,parentCode:e.component.qualifiedCode,allSelected:r,noneSelected:f},t.qualifiedCode))})})}function B(e){const o=S(),c=e.Answer.answers[0],r=C(n=>n.runState.values[e.parentCode].value||[],A),f=r.indexOf(e.Answer.code)>-1,t=C(n=>{var v;let l=n.runState.values[e.Answer.qualifiedCode],s=n.runState.values[c.qualifiedCode],F=n.runState.values.Survey.show_errors,V=n.templateState[c.qualifiedCode];return{showAnswer:typeof(l==null?void 0:l.relevance)>"u"||l.relevance,childInvalid:(F||V)&&(s==null?void 0:s.relevance)===!0&&(s==null?void 0:s.validity)===!1,textValue:(s==null?void 0:s.value)||"",textRelevance:(v=n.textChild)==null?void 0:v.relevance}},A),i=y(),u=n=>{let l=[...r];n.target.checked?l.push(e.Answer.code):l=l.filter(s=>s!==e.Answer.code),i(h({componentCode:e.parentCode,value:l})),i(m(n.target.name)),i(m(e.parentCode)),n.target.checked&&x.current.focus()},a=n=>{i(h({componentCode:n.target.name,value:n.target.value}))},x=w.useRef(),b=n=>{let l=[...r];l.indexOf(e.Answer.code)==-1&&(l.push(e.Answer.code),i(h({componentCode:e.parentCode,value:l})))},j=n=>{i(m(n.target.name))},k=()=>{var n,l;return d.jsx(g,{control:d.jsx(q,{checked:f,disabled:e.disabled,onChange:u,name:e.Answer.qualifiedCode,sx:{color:o.textStyles.text.color}}),label:d.jsx("div",{children:d.jsx(z,{variant:"standard",required:t.textRelevance&&((n=c.validation)==null?void 0:n.required),inputRef:x,id:c.qualifiedCode,name:c.qualifiedCode,disabled:e.disabled,label:(l=e.Answer.content)==null?void 0:l.label,onChange:a,onFocus:b,onBlur:j,sx:{label:{color:o.textStyles.text.color}},value:t.textValue,InputProps:{sx:{fontFamily:o.textStyles.text.font,color:o.textStyles.text.color,fontSize:o.textStyles.text.size}},helperText:t.childInvalid?d.jsx(E,{component:c,limit:1}):""})})})};return t.showAnswer?k():""}const N=w.memo(Q);export{N as default};
