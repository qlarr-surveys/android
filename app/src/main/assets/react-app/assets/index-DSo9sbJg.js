import{j as e,s as O,r as s,B as c}from"./index-BdaHkdQl.js";import{M as y,K as L,r as B}from"./Web-Xt-AHKsA.js";import{y as D,A as W,D as $,T as w,am as V,an as _,F as C,ao as j}from"./use-service-D09swmN7.js";import{l as b}from"./DateUtils-Ce4EpQzP.js";import{S as a}from"./survey-x3hUDjhT.js";import{F as X,I as Y,S as q,T as G,h as K}from"./TextField-B66jFwFo.js";import{S as P}from"./index-BvRqMl4F.js";import{C as H}from"./Card-DaS3BkKI.js";import{F as z}from"./FormGroup-D1wY6CsR.js";import"./Checkbox-0qy6A3Vu.js";import"./SwitchBase-outpB1OY.js";import"./useFormControl-BousA45m.js";import"./Tabs-CXy611xA.js";import"./radioClasses-DNdhtY0L.js";import"./tableRowClasses-D2zlaSzG.js";import"./FormControlLabel-DrGXXvQK.js";import"./index-CMMJWtX7.js";import"./dayjs.min-C6SlMFD4.js";import"./DateTimePicker-DiuyYDe1.js";import"./InputAdornment-CMc9n4GQ.js";const J="_mainContainer_17u7e_1",Q="_createUserCard_17u7e_9",Z="_blockItem_17u7e_13",ee="_errorText_17u7e_20",o={mainContainer:J,createUserCard:Q,blockItem:Z,errorText:ee};function re(n){return e.jsx(L,{...n,style:{color:"#181735"}})}const te=({surveyMode:n,onSurveyModeChanged:m})=>{const{t:r}=D("manage");return e.jsxs(X,{fullWidth:!0,children:[e.jsx(Y,{id:"survey-mode-label",children:r("label.survey_mode")}),e.jsxs(q,{labelId:"survey-mode-label",id:"demo-simple-select",value:n,label:r("label.survey_mode"),onChange:m,sx:{minWidth:"160px",borderRadius:"12px",backgroundColor:"#f7f8fc","& .MuiOutlinedInput-notchedOutline":{border:"none"}},IconComponent:re,children:[e.jsx(y,{value:a.WEB,children:r("mode.".concat(a.WEB))}),e.jsx(y,{value:a.OFFLINE,children:r("mode.".concat(a.OFFLINE))}),e.jsx(y,{value:a.MIXED,children:r("mode.".concat(a.MIXED))})]})]})};function be(){const n=W("survey"),m=O(),{t:r}=D("manage"),h=$(),[u,g]=s.useState(""),[d,i]=s.useState(""),[E,v]=s.useState(""),[S,I]=s.useState(a.MIXED),[x,N]=s.useState(null),[p,T]=s.useState(null),F=t=>{g(t.target.value),i("")},A=t=>{I(t.target.value)},M=t=>{v(""),N(t.toDate())},k=t=>{v(""),T(t.toDate())},R=()=>(i(""),u.length==0?(i(r("survey_required")),!1):!0),f=()=>{m(B.dashboard)},U=()=>{if(!R())return;h(C(!0));const t={name:u,usage:S};x&&(t.startDate=b(x)),p&&(t.endDate=b(p)),n.createSurvey(t).then(()=>{f()}).catch(l=>{l.name==j.DUPLICATE_SURVEY_NAME.name?i(r("processed_errors.".concat(l.name))):l.name==j.INVALID_SURVEY_DATES.name&&v(r("processed_errors.".concat(l.name)))}).finally(()=>{h(C(!1))})};return e.jsx(c,{className:o.mainContainer,children:e.jsxs(H,{className:o.createUserCard,children:[e.jsx(w,{variant:"h4",children:r("create_survey.title")}),e.jsxs(z,{className:o.formGroup,children:[e.jsx(G,{sx:{maxWidth:"400px"},error:d.length>0,required:!0,value:u,id:"surveyName",label:r("label.survey_name"),name:"surveyName",onChange:F,variant:"standard"}),d&&e.jsx(K,{className:o.errorText,children:d}),e.jsxs(V,{flexDirection:"row",gap:5,sx:{mt:"40px"},children:[e.jsx(c,{className:o.blockItem,children:e.jsx(te,{surveyMode:S,onSurveyModeChanged:A})}),e.jsx(c,{className:o.blockItem,children:e.jsx(P,{error:E,surveyActiveFrom:x,surveyActiveTo:p,onSurveyActiveFromChanged:M,onSurveyActiveToChanged:k})})]})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"flex-end",mt:"40px"},children:[e.jsx(_,{onClick:f,children:r("action_btn.cancel")}),e.jsx(_,{onClick:U,children:r("action_btn.save")})]})]})})}export{be as default};
