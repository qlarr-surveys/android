import{q as J,F as O,ab as M,Z as Q,h as N,y as S,r as w,w as Y,m as n,E as Z,W as k,a6 as G}from"./index-D3gX205L.js";import{s as P,i as X,a as ee,al as ne,x as oe,e as te,Q as ie,b as se,a2 as ae,am as le,D as B,H as re,y as L,an as q,S as ce,L as $,Y as de,J as ue}from"./Android-Bk4USwSu.js";function fe(e){return O("MuiLink",e)}const me=J("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),W={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},pe=e=>W[e]||e,xe=({theme:e,ownerState:o})=>{const i=pe(o.color),s=M(e,"palette.".concat(i),!1)||o.color,t=M(e,"palette.".concat(i,"Channel"));return"vars"in e&&t?"rgba(".concat(t," / 0.4)"):Q(s,.4)},he=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],ve=e=>{const{classes:o,component:i,focusVisible:s,underline:t}=e,c={root:["root","underline".concat(N(t)),i==="button"&&"button",s&&"focusVisible"]};return te(c,fe,o)},be=P(X,{name:"MuiLink",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:i}=e;return[o.root,o["underline".concat(N(i.underline))],i.component==="button"&&o.button]}})(({theme:e,ownerState:o})=>S({},o.underline==="none"&&{textDecoration:"none"},o.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},o.underline==="always"&&S({textDecoration:"underline"},o.color!=="inherit"&&{textDecorationColor:xe({theme:e,ownerState:o})},{"&:hover":{textDecorationColor:"inherit"}}),o.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(me.focusVisible)]:{outline:"auto"}})),H=w.forwardRef(function(o,i){const s=ee({props:o,name:"MuiLink"}),{className:t,color:c="primary",component:a="a",onBlur:b,onFocus:m,TypographyClasses:l,underline:x="always",variant:d="inherit",sx:f}=s,z=Y(s,he),{isFocusVisibleRef:h,onBlur:y,onFocus:A,ref:D}=ne(),[g,C]=w.useState(!1),V=oe(i,D),j=u=>{y(u),h.current===!1&&C(!1),b&&b(u)},_=u=>{A(u),h.current===!0&&C(!0),m&&m(u)},v=S({},s,{color:c,component:a,focusVisible:g,underline:x,variant:d}),F=ve(v);return n.jsx(be,S({color:c,className:Z(F.root,t),classes:l,component:a,onBlur:j,onFocus:_,ref:V,ownerState:v,variant:d,sx:[...Object.keys(W).includes(c)?[]:[{color:c}],...Array.isArray(f)?f:[f]]},z))}),ye=P("input")({display:"none"});function je(e){var j,_,v,F,u,R,T,U;const o=ie("run"),i=se(),{t:s}=ae("run");let t=le((_=(j=e.component.validation)==null?void 0:j.validation_file_types)==null?void 0:_.fileTypes);const c=((F=(v=e.component.validation)==null?void 0:v.validation_max_file_size)==null?void 0:F.isActive)&&((R=(u=e.component.validation)==null?void 0:u.validation_max_file_size)==null?void 0:R.max_size)||-1,a=B(r=>{let p=r.runState.values[e.component.qualifiedCode];return p==null?void 0:p.value}),b=B(r=>r.runState.preview),m=re(),[l,x]=w.useState(),[d,f]=w.useState(!1),z=()=>{window.Android.previewFileUpload(a.stored_filename,a.filename)},h=!d&&l&&t.length>0&&!t.includes(l.type),y=!d&&l&&c>0&&l.size/1024>c,A=r=>{m($(e.component.qualifiedCode)),x(r.target.files[0])},D=()=>{f(!0),de(o,e.component.qualifiedCode,b,l).then(r=>{f(!1),g(),m(ue({componentCode:e.component.qualifiedCode,value:r}))}).catch(r=>{f(!1),console.error(r)})},g=()=>{x(void 0)},C=r=>{if(window.Android){const p=e.component.qualifiedCode;r.preventDefault(),window.Android.selectFile(p,(t==null?void 0:t.join(","))||"",c||-1),window["onFileSelected"+p]=(E,I,K)=>{m($(e.component.qualifiedCode)),x({name:E,size:I,type:K})}}};let V=l&&!h&&!y;return n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"contained-button-file",children:[n.jsx(ye,{id:"contained-button-file",type:"file",accept:t?t.join(","):void 0,onChange:A}),n.jsx(L,{disabled:d,onClick:C,variant:"contained",component:"span",children:s("choose_file")})]}),l?n.jsxs(k.Fragment,{children:[n.jsxs("span",{children:["Â ",l.name," - ",Math.round(l.size/1024),"K"]}),V?n.jsx(L,{disabled:d,variant:"text",onClick:D,children:s("upload")}):"",n.jsx(L,{disabled:d,sx:{fontFamily:i.textStyles.text.font,fontSize:i.textStyles.text.size},variant:"text",onClick:g,children:s("cancel")})]}):"",y&&n.jsxs(k.Fragment,{children:[n.jsx("br",{}),n.jsx(q,{name:"validation_max_file_size",validation:(T=e.component.validation)==null?void 0:T.validation_max_file_size})]}),h&&n.jsxs(k.Fragment,{children:[n.jsx("br",{}),n.jsx(q,{name:"validation_file_types",validation:(U=e.component.validation)==null?void 0:U.validation_file_types})]}),d?n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx(G,{}),n.jsx("br",{}),n.jsx("span",{children:s("uploading")})]}):!a||!a.stored_filename?"":n.jsxs(k.Fragment,{children:[n.jsx("br",{}),n.jsx("br",{}),window.Android?n.jsxs(H,{target:"_blank",onClick:z,children:[a.filename," - ",Math.round(a.size/1024),"K"]}):n.jsxs(H,{target:"_blank",href:ce(a.stored_filename),children:[a.filename," - ",Math.round(a.size/1024),"K"]})]})]})}export{je as default};
