import{r as w,m as s}from"./index-DNbeaJsE.js";import{b as S,M as y,K as C,L as A,R as V,q as O,O as h,S as x,Q as M,N as z,V as I}from"./Android-C8RkpF_s.js";import{F as g,R as T}from"./RadioGroup-BYjClEjs.js";import{C as q}from"./Checkbox-5wtw8jDH.js";import"./RadioGroupContext-D9YZa7vY.js";import"./SwitchBase-BUubUGDJ.js";function D(e){var t;const o=S(),c=y(),i=e.Answer.type!=="all"&&e.allSelected||e.Answer.type!=="none"&&e.noneSelected,f=C(u=>{var m;let a=u.runState.values[(m=e.Answer)==null?void 0:m.qualifiedCode];return typeof(a==null?void 0:a.relevance)>"u"||a.relevance},A),r=u=>{let a=[...e.parentValue];u.target.checked&&e.Answer.code==="Aall"?a=e.allCodes:!u.target.checked&&e.Answer.code==="Aall"?a=[]:u.target.checked&&e.Answer.code==="Anone"?a=["Anone"]:u.target.checked?a.push(e.Answer.code):a=a.filter(m=>m!==e.Answer.code),console.log(a),c(h({componentCode:e.parentCode,value:a})),c(x(u.target.name)),c(x(e.parentCode))};return f?s.jsx(g,{control:s.jsx(q,{checked:e.parentValue.indexOf(e.Answer.code)>-1||e.Answer.code==="Aall"&&e.allSelected,onChange:r,disabled:i,name:e.Answer.qualifiedCode,sx:{color:o.textStyles.text.color}}),label:s.jsx(V,{elementCode:e.Answer.code,fontFamily:o.textStyles.text.font,color:O(o.textStyles.text.color,i?.5:1),fontSize:o.textStyles.text.size,name:"label",lang:e.lang,content:(t=e.Answer.content)==null?void 0:t.label})}):""}const E=w.memo(D);function Q(e){const o=C(t=>t.runState.values[e.component.qualifiedCode].value||[],A),c=e.component.answers.some(t=>t.type=="all"),i=e.component.answers.filter(t=>t.type!=="all"&&t.type!=="none"&&t.type!=="other").map(t=>t.code),f=c&&i.every(t=>o.indexOf(t)>-1),r=o.indexOf("Anone")>-1;return s.jsx(M,{component:"fieldset",children:s.jsx(T,{children:e.component.answers.map(t=>t.type==="other"?s.jsx(B,{disabled:f||r,allSelected:f,noneSelected:r,Answer:t,parentCode:e.component.qualifiedCode},t.qualifiedCode):s.jsx(E,{lang:e.lang,parentValue:o,Answer:t,allCodes:i,parentCode:e.component.qualifiedCode,allSelected:f,noneSelected:r},t.qualifiedCode))})})}function B(e){const o=S(),c=e.Answer.answers[0],i=C(n=>n.runState.values[e.parentCode].value||[],A),f=i.indexOf(e.Answer.code)>-1,r=C(n=>{var v;let l=n.runState.values[e.Answer.qualifiedCode],d=n.runState.values[c.qualifiedCode],F=n.runState.values.Survey.show_errors,R=n.templateState[c.qualifiedCode];return{showAnswer:typeof(l==null?void 0:l.relevance)>"u"||l.relevance,childInvalid:(F||R)&&(d==null?void 0:d.relevance)===!0&&(d==null?void 0:d.validity)===!1,textValue:(d==null?void 0:d.value)||"",textRelevance:(v=n.textChild)==null?void 0:v.relevance}},A),t=y(),u=n=>{let l=[...i];n.target.checked?l.push(e.Answer.code):l=l.filter(d=>d!==e.Answer.code),t(h({componentCode:e.parentCode,value:l})),t(x(n.target.name)),t(x(e.parentCode)),n.target.checked&&m.current.focus()},a=n=>{t(h({componentCode:n.target.name,value:n.target.value}))},m=w.useRef(),b=n=>{let l=[...i];l.indexOf(e.Answer.code)==-1&&(l.push(e.Answer.code),t(h({componentCode:e.parentCode,value:l})))},j=n=>{t(x(n.target.name))},k=()=>{var n,l;return s.jsx(g,{control:s.jsx(q,{checked:f,disabled:e.disabled,onChange:u,name:e.Answer.qualifiedCode,sx:{color:o.textStyles.text.color}}),label:s.jsx("div",{children:s.jsx(z,{variant:"standard",required:r.textRelevance&&((n=c.validation)==null?void 0:n.required),inputRef:m,id:c.qualifiedCode,name:c.qualifiedCode,disabled:e.disabled,label:(l=e.Answer.content)==null?void 0:l.label,onChange:a,onFocus:b,onBlur:j,sx:{label:{color:o.textStyles.text.color}},value:r.textValue,InputProps:{sx:{fontFamily:o.textStyles.text.font,color:o.textStyles.text.color,fontSize:o.textStyles.text.size}},helperText:r.childInvalid?s.jsx(I,{component:c,limit:1}):""})})})};return r.showAnswer?k():""}const H=w.memo(Q);export{H as default};
