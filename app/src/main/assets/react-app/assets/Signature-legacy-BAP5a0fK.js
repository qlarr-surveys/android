!function(){function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,r,a,s=[],u=!0,c=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(o=r.call(n)).done)&&(s.push(o.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}System.register(["./index-legacy-FvVZ9xmj.js","./Android-legacy-3_GkoeuL.js"],(function(e,n){"use strict";var o,i,r,a,s,u,c,h,l,d,f,p,v,_;return{setters:[t=>{o=t.P,t.a2,i=t.r,r=t.e,a=t.m},t=>{s=t.O,u=t.Q,c=t.D,h=t.H,l=t.R,d=t.S,f=t.U,p=t.y,v=t.W,_=t.J}],execute:function(){var n=document.createElement("style");n.textContent="._signatureCanvas_1bkvb_1{background-color:#fff;border:1px solid transparent;border-radius:4px;width:100%;margin:auto;text-align:center}._container_1bkvb_10{padding:8px}._buttonContainer_1bkvb_14{text-align:end}\n/*$vite$:1*/",document.head.appendChild(n),e("default",(function(e){const n=u("run"),o=t(i.useState(!1),2),r=o[0],s=o[1],m=t(i.useState(!1),2),y=m[0],g=m[1],x=t(i.useState(void 0),2),w=x[0],b=x[1],P=c((t=>{let n=t.runState.values[e.component.qualifiedCode];return null==n?void 0:n.value})),C=i.useRef(null),E=t(i.useState(400),2),k=E[0],S=E[1];i.useEffect((()=>{var t;S(null==C||null===(t=C.current)||void 0===t?void 0:t.offsetWidth)}),[C]),i.useEffect((()=>{const t=()=>{var t;S(null==C||null===(t=C.current)||void 0===t?void 0:t.offsetWidth)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[]);const O=c((t=>t.runState.preview)),T=i.useRef(),j=h();return i.useEffect((()=>{P&&P.stored_filename&&(g(!0),l(d(P.stored_filename)).then((t=>{s(!1),b(t)})))}),[P]),a.jsxs(a.Fragment,{children:[a.jsx(f,{sx:{backgroundColor:"background.default"},className:M.container,children:a.jsx(f,{ref:C,sx:{maxWidth:Math.min(k,400)+"px"},className:M.signatureCanvas,children:w?a.jsx("img",{src:w,style:{width:Math.min(k,400)+"px",height:"200px"}}):a.jsx(D,{penColor:"red",clearOnResize:!0,onBegin:()=>{s(!0),g(!0)},ref:T,canvasProps:{width:Math.min(k,400),height:200}})})}),a.jsx("br",{}),a.jsxs("div",{className:M.buttonContainer,children:[a.jsx(p,{onClick:()=>{return null===(t=T.current)||void 0===t||t.clear(),b(void 0),g(!1),void s(!1);var t},disabled:!y,children:"Clear"}),a.jsx(p,{onClick:()=>(()=>{const t=T.current.toDataURL("image/png");v(n,e.component.qualifiedCode,O,t,"signature.png").then((t=>{j(_({componentCode:e.component.qualifiedCode,value:t}))})).catch((t=>{console.error(t)}))})(),disabled:!r,children:"Submit"})]})]})}));var m={exports:{}};
/*!
       * Signature Pad v2.3.2
       * https://github.com/szimek/signature_pad
       *
       * Copyright 2017 Szymon Nowak
       * Released under the MIT license
       *
       * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
       * http://corner.squareup.com/2012/07/smoother-signatures.html
       *
       * Implementation of interpolation using cubic Bézier curves is taken from:
       * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
       *
       * Algorithm for approximated length of a Bézier curve is taken from:
       * http://www.lemoda.net/maths/bezier-length/index.html
       *
       */function y(t,e,n){this.x=t,this.y=e,this.time=n||(new Date).getTime()}function g(t,e,n,o){this.startPoint=t,this.control1=e,this.control2=n,this.endPoint=o}function x(t,e){var n=this,o=e||{};this.velocityFilterWeight=o.velocityFilterWeight||.7,this.minWidth=o.minWidth||.5,this.maxWidth=o.maxWidth||2.5,this.throttle="throttle"in o?o.throttle:16,this.minDistance="minDistance"in o?o.minDistance:5,this.throttle?this._strokeMoveUpdate=function(t,e,n){var o,i,r,a=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),a=null,r=t.apply(o,i),a||(o=i=null)};return function(){var c=Date.now();s||!1!==n.leading||(s=c);var h=e-(c-s);return o=this,i=arguments,h<=0||h>e?(a&&(clearTimeout(a),a=null),s=c,r=t.apply(o,i),a||(o=i=null)):a||!1===n.trailing||(a=setTimeout(u,h)),r}}(x.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=x.prototype._strokeUpdate,this.dotSize=o.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=o.penColor||"black",this.backgroundColor=o.backgroundColor||"rgba(0,0,0,0)",this.onBegin=o.onBegin,this.onEnd=o.onEnd,this._canvas=t,this._ctx=t.getContext("2d"),this.clear(),this._handleMouseDown=function(t){1===t.which&&(n._mouseButtonDown=!0,n._strokeBegin(t))},this._handleMouseMove=function(t){n._mouseButtonDown&&n._strokeMoveUpdate(t)},this._handleMouseUp=function(t){1===t.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(t))},this._handleTouchStart=function(t){if(1===t.targetTouches.length){var e=t.changedTouches[0];n._strokeBegin(e)}},this._handleTouchMove=function(t){t.preventDefault();var e=t.targetTouches[0];n._strokeMoveUpdate(e)},this._handleTouchEnd=function(t){t.target===n._canvas&&(t.preventDefault(),n._strokeEnd(t))},this.on()}y.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1},y.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},y.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.time===t.time},g.prototype.length=function(){for(var t=0,e=void 0,n=void 0,o=0;o<=10;o+=1){var i=o/10,r=this._point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this._point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(o>0){var s=r-e,u=a-n;t+=Math.sqrt(s*s+u*u)}e=r,n=a}return t},g.prototype._point=function(t,e,n,o,i){return e*(1-t)*(1-t)*(1-t)+3*n*(1-t)*(1-t)*t+3*o*(1-t)*t*t+i*t*t*t},x.prototype.clear=function(){var t=this._ctx,e=this._canvas;t.fillStyle=this.backgroundColor,t.clearRect(0,0,e.width,e.height),t.fillRect(0,0,e.width,e.height),this._data=[],this._reset(),this._isEmpty=!0},x.prototype.fromDataURL=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=new Image,i=n.ratio||window.devicePixelRatio||1,r=n.width||this._canvas.width/i,a=n.height||this._canvas.height/i;this._reset(),o.src=t,o.onload=function(){e._ctx.drawImage(o,0,0,r,a)},this._isEmpty=!1},x.prototype.toDataURL=function(t){var e;if("image/svg+xml"===t)return this._toSVG();for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return(e=this._canvas).toDataURL.apply(e,[t].concat(o))},x.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},x.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},x.prototype.isEmpty=function(){return this._isEmpty},x.prototype._strokeBegin=function(t){this._data.push([]),this._reset(),this._strokeUpdate(t),"function"==typeof this.onBegin&&this.onBegin(t)},x.prototype._strokeUpdate=function(t){var e=t.clientX,n=t.clientY,o=this._createPoint(e,n),i=this._data[this._data.length-1],r=i&&i[i.length-1],a=r&&o.distanceTo(r)<this.minDistance;if(!r||!a){var s=this._addPoint(o),u=s.curve,c=s.widths;u&&c&&this._drawCurve(u,c.start,c.end),this._data[this._data.length-1].push({x:o.x,y:o.y,time:o.time,color:this.penColor})}},x.prototype._strokeEnd=function(t){var e=this.points.length>2,n=this.points[0];if(!e&&n&&this._drawDot(n),n){var o=this._data[this._data.length-1],i=o[o.length-1];n.equals(i)||o.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(t)},x.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},x.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},x.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},x.prototype._createPoint=function(t,e,n){var o=this._canvas.getBoundingClientRect();return new y(t-o.left,e-o.top,n||(new Date).getTime())},x.prototype._addPoint=function(t){var e=this.points;if(e.push(t),e.length>2){3===e.length&&e.unshift(e[0]);var n=this._calculateCurveControlPoints(e[0],e[1],e[2]).c2,o=this._calculateCurveControlPoints(e[1],e[2],e[3]).c1,i=new g(e[1],n,o,e[2]),r=this._calculateCurveWidths(i);return e.shift(),{curve:i,widths:r}}return{}},x.prototype._calculateCurveControlPoints=function(t,e,n){var o=t.x-e.x,i=t.y-e.y,r=e.x-n.x,a=e.y-n.y,s=(t.x+e.x)/2,u=(t.y+e.y)/2,c=(e.x+n.x)/2,h=(e.y+n.y)/2,l=Math.sqrt(o*o+i*i),d=Math.sqrt(r*r+a*a),f=d/(l+d),p=c+(s-c)*f,v=h+(u-h)*f,_=e.x-p,m=e.y-v;return{c1:new y(s+_,u+m),c2:new y(c+_,h+m)}},x.prototype._calculateCurveWidths=function(t){var e=t.startPoint,n=t.endPoint,o={start:null,end:null},i=this.velocityFilterWeight*n.velocityFrom(e)+(1-this.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(i);return o.start=this._lastWidth,o.end=r,this._lastVelocity=i,this._lastWidth=r,o},x.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)},x.prototype._drawPoint=function(t,e,n){var o=this._ctx;o.moveTo(t,e),o.arc(t,e,n,0,2*Math.PI,!1),this._isEmpty=!1},x.prototype._drawCurve=function(t,e,n){var o=this._ctx,i=n-e,r=Math.floor(t.length());o.beginPath();for(var a=0;a<r;a+=1){var s=a/r,u=s*s,c=u*s,h=1-s,l=h*h,d=l*h,f=d*t.startPoint.x;f+=3*l*s*t.control1.x,f+=3*h*u*t.control2.x,f+=c*t.endPoint.x;var p=d*t.startPoint.y;p+=3*l*s*t.control1.y,p+=3*h*u*t.control2.y,p+=c*t.endPoint.y;var v=e+c*i;this._drawPoint(f,p,v)}o.closePath(),o.fill()},x.prototype._drawDot=function(t){var e=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;e.beginPath(),this._drawPoint(t.x,t.y,n),e.closePath(),e.fill()},x.prototype._fromData=function(t,e,n){for(var o=0;o<t.length;o+=1){var i=t[o];if(i.length>1)for(var r=0;r<i.length;r+=1){var a=i[r],s=new y(a.x,a.y,a.time),u=a.color;if(0===r)this.penColor=u,this._reset(),this._addPoint(s);else if(r!==i.length-1){var c=this._addPoint(s),h=c.curve,l=c.widths;h&&l&&e(h,l,u)}}else this._reset(),n(i[0])}},x.prototype._toSVG=function(){var t=this,e=this._data,n=this._canvas,o=Math.max(window.devicePixelRatio||1,1),i=n.width/o,r=n.height/o,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"width",n.width),a.setAttributeNS(null,"height",n.height),this._fromData(e,(function(t,e,n){var o=document.createElement("path");if(!(isNaN(t.control1.x)||isNaN(t.control1.y)||isNaN(t.control2.x)||isNaN(t.control2.y))){var i="M "+t.startPoint.x.toFixed(3)+","+t.startPoint.y.toFixed(3)+" C "+t.control1.x.toFixed(3)+","+t.control1.y.toFixed(3)+" "+t.control2.x.toFixed(3)+","+t.control2.y.toFixed(3)+" "+t.endPoint.x.toFixed(3)+","+t.endPoint.y.toFixed(3);o.setAttribute("d",i),o.setAttribute("stroke-width",(2.25*e.end).toFixed(3)),o.setAttribute("stroke",n),o.setAttribute("fill","none"),o.setAttribute("stroke-linecap","round"),a.appendChild(o)}}),(function(e){var n=document.createElement("circle"),o="function"==typeof t.dotSize?t.dotSize():t.dotSize;n.setAttribute("r",o),n.setAttribute("cx",e.x),n.setAttribute("cy",e.y),n.setAttribute("fill",e.color),a.appendChild(n)}));var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+i+" "+r+'" width="'+i+'" height="'+r+'">',u=a.innerHTML;if(void 0===u){var c=document.createElement("dummy"),h=a.childNodes;c.innerHTML="";for(var l=0;l<h.length;l+=1)c.appendChild(h[l].cloneNode(!0));u=c.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+u+"</svg>")},x.prototype.fromData=function(t){var e=this;this.clear(),this._fromData(t,(function(t,n){return e._drawCurve(t,n.start,n.end)}),(function(t){return e._drawDot(t)})),this._data=t},x.prototype.toData=function(){return this._data};const w=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"})),b=o(w);var P,C={exports:{}};function E(){return P||(P=1,function(t,e){t.exports=function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){function n(t){var e=t.getContext("2d"),n=t.width,o=t.height,i=e.getImageData(0,0,n,o).data,s=r(!0,n,o,i),u=r(!1,n,o,i),c=a(!0,n,o,i),h=a(!1,n,o,i)-c+1,l=u-s+1,d=e.getImageData(c,s,h,l);return t.width=h,t.height=l,e.clearRect(0,0,h,l),e.putImageData(d,0,0),t}function o(t,e,n,o){return{red:o[4*(n*e+t)],green:o[4*(n*e+t)+1],blue:o[4*(n*e+t)+2],alpha:o[4*(n*e+t)+3]}}function i(t,e,n,i){return o(t,e,n,i).alpha}function r(t,e,n,o){for(var r=t?1:-1,a=t?0:n-1;t?a<n:a>-1;a+=r)for(var s=0;s<e;s++)if(i(s,a,e,o))return a;return null}function a(t,e,n,o){for(var r=t?1:-1,a=t?0:e-1;t?a<e:a>-1;a+=r)for(var s=0;s<n;s++)if(i(a,s,e,o))return a;return null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n}])}(C)),C.exports}!function(t,e){var n,o,r,a;t.exports=(n=s,o=i,r=b,a=E(),function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var o in t)e.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),h=o(n(1)),l=n(2),d=o(l),f=o(n(3)),p=o(n(4)),v=function(t){function e(){var t,n,o;r(this,e);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=o=a(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(u))),o._sigPad=null,o._excludeOurProps=function(){var t=o.props;return t.canvasProps,t.clearOnResize,i(t,["canvasProps","clearOnResize"])},o.getCanvas=function(){return o._canvas},o.getTrimmedCanvas=function(){var t=document.createElement("canvas");return t.width=o._canvas.width,t.height=o._canvas.height,t.getContext("2d").drawImage(o._canvas,0,0),(0,p.default)(t)},o.getSignaturePad=function(){return o._sigPad},o._checkClearOnResize=function(){o.props.clearOnResize&&o._resizeCanvas()},o._resizeCanvas=function(){var t=o.props.canvasProps||{},e=t.width,n=t.height;if(!e||!n){var i=o._canvas,r=Math.max(window.devicePixelRatio||1,1);e||(i.width=i.offsetWidth*r),n||(i.height=i.offsetHeight*r),i.getContext("2d").scale(r,r),o.clear()}},o.on=function(){return window.addEventListener("resize",o._checkClearOnResize),o._sigPad.on()},o.off=function(){return window.removeEventListener("resize",o._checkClearOnResize),o._sigPad.off()},o.clear=function(){return o._sigPad.clear()},o.isEmpty=function(){return o._sigPad.isEmpty()},o.fromDataURL=function(t,e){return o._sigPad.fromDataURL(t,e)},o.toDataURL=function(t,e){return o._sigPad.toDataURL(t,e)},o.fromData=function(t){return o._sigPad.fromData(t)},o.toData=function(){return o._sigPad.toData()},a(o,n)}return s(e,t),c(e,[{key:"componentDidMount",value:function(){this._sigPad=new f.default(this._canvas,this._excludeOurProps()),this._resizeCanvas(),this.on()}},{key:"componentWillUnmount",value:function(){this.off()}},{key:"componentDidUpdate",value:function(){Object.assign(this._sigPad,this._excludeOurProps())}},{key:"render",value:function(){var t=this,e=this.props.canvasProps;return d.default.createElement("canvas",u({ref:function(e){t._canvas=e}},e))}}]),e}(l.Component);v.propTypes={velocityFilterWeight:h.default.number,minWidth:h.default.number,maxWidth:h.default.number,minDistance:h.default.number,dotSize:h.default.oneOfType([h.default.number,h.default.func]),penColor:h.default.string,throttle:h.default.number,onEnd:h.default.func,onBegin:h.default.func,canvasProps:h.default.object,clearOnResize:h.default.bool},v.defaultProps={clearOnResize:!0},e.default=v},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e){t.exports=r},function(t,e){t.exports=a}]))}(m);const D=r(m.exports),M={signatureCanvas:"_signatureCanvas_1bkvb_1",container:"_container_1bkvb_10",buttonContainer:"_buttonContainer_1bkvb_14"}}}}))}();
