import{j as e,s as O,r as s,B as c}from"./index-BPkE25ts.js";import{M as g,aw as L,S as W,N as y,Q as w,R as B,T as $,aK as V,aC as C,W as Y,Y as _,aM as j}from"./use-service-Bb7LY6Q3.js";import{l as b}from"./DateUtils-Ce4EpQzP.js";import{S as a}from"./survey-D2pw4t3m.js";import{I as K,T as X,a as q}from"./TextField-M1IR9KQb.js";import{K as G}from"./Web-BBqAH_aj.js";import{S as P}from"./index-CbJ0M9aj.js";import{C as H}from"./Card-D1gdhD1c.js";import{F as Q}from"./FormGroup-BccPKpRL.js";import"./Checkbox-Dntn-pZ4.js";import"./SwitchBase-CHSPGF-1.js";import"./Tabs-ui_O5_y9.js";import"./radioClasses-CjX8ViDh.js";import"./tableRowClasses-JqPlK2IC.js";import"./FormControlLabel-sZjcD-3I.js";import"./index-B04T1rGa.js";import"./dayjs.min-D0r0z_Uh.js";import"./DateTimePicker-Cm0iIfH5.js";import"./InputAdornment-BqPPlMsg.js";const z="_mainContainer_17u7e_1",J="_createUserCard_17u7e_9",Z="_blockItem_17u7e_13",ee="_errorText_17u7e_20",o={mainContainer:z,createUserCard:J,blockItem:Z,errorText:ee};function re(n){return e.jsx(G,{...n,style:{color:"#181735"}})}const te=({surveyMode:n,onSurveyModeChanged:m})=>{const{t:r}=g("manage");return e.jsxs(L,{fullWidth:!0,children:[e.jsx(K,{id:"survey-mode-label",children:r("label.survey_mode")}),e.jsxs(W,{labelId:"survey-mode-label",id:"demo-simple-select",value:n,label:r("label.survey_mode"),onChange:m,sx:{minWidth:"160px",borderRadius:"12px",backgroundColor:"#f7f8fc","& .MuiOutlinedInput-notchedOutline":{border:"none"}},IconComponent:re,children:[e.jsx(y,{value:a.WEB,children:r("mode.".concat(a.WEB))}),e.jsx(y,{value:a.OFFLINE,children:r("mode.".concat(a.OFFLINE))}),e.jsx(y,{value:a.MIXED,children:r("mode.".concat(a.MIXED))})]})]})};function je(){const n=w("survey"),m=O(),{t:r}=g("manage"),h=B(),[u,D]=s.useState(""),[d,i]=s.useState(""),[E,v]=s.useState(""),[S,I]=s.useState(a.MIXED),[x,N]=s.useState(null),[p,T]=s.useState(null),A=t=>{D(t.target.value),i("")},F=t=>{I(t.target.value)},M=t=>{v(""),N(t.toDate())},R=t=>{v(""),T(t.toDate())},k=()=>(i(""),u.length==0?(i(r("survey_required")),!1):!0),f=()=>{m(Y.dashboard)},U=()=>{if(!k())return;h(_(!0));const t={name:u,usage:S};x&&(t.startDate=b(x)),p&&(t.endDate=b(p)),n.createSurvey(t).then(()=>{f()}).catch(l=>{l.name==j.DUPLICATE_SURVEY_NAME.name?i(r("processed_errors.".concat(l.name))):l.name==j.INVALID_SURVEY_DATES.name&&v(r("processed_errors.".concat(l.name)))}).finally(()=>{h(_(!1))})};return e.jsx(c,{className:o.mainContainer,children:e.jsxs(H,{className:o.createUserCard,children:[e.jsx($,{variant:"h4",children:r("create_survey.title")}),e.jsxs(Q,{className:o.formGroup,children:[e.jsx(X,{sx:{maxWidth:"400px"},error:d.length>0,required:!0,value:u,id:"surveyName",label:r("label.survey_name"),name:"surveyName",onChange:A,variant:"standard"}),d&&e.jsx(q,{className:o.errorText,children:d}),e.jsxs(V,{flexDirection:"row",gap:5,sx:{mt:"40px"},children:[e.jsx(c,{className:o.blockItem,children:e.jsx(te,{surveyMode:S,onSurveyModeChanged:F})}),e.jsx(c,{className:o.blockItem,children:e.jsx(P,{error:E,surveyActiveFrom:x,surveyActiveTo:p,onSurveyActiveFromChanged:M,onSurveyActiveToChanged:R})})]})]}),e.jsxs(c,{sx:{display:"flex",justifyContent:"flex-end",mt:"40px"},children:[e.jsx(C,{onClick:f,children:r("action_btn.cancel")}),e.jsx(C,{onClick:U,children:r("action_btn.save")})]})]})})}export{je as default};
