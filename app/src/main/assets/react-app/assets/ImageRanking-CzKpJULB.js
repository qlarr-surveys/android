import{r as d,m as o,a7 as g,a4 as b}from"./index-DCf9ET77.js";import{E as x,H as v,J as w,a8 as E,Q as f,L as C,a9 as q}from"./Android-0LfW9AkK.js";const W="_imageContainer_r4g8r_5",H="_rankContainer_r4g8r_12",R="_rankValue_r4g8r_21",z="_imageFlexContainer_r4g8r_27",h={imageContainer:W,rankContainer:H,rankValue:R,imageFlexContainer:z};function M(e){const n=x(t=>{let a={};return e.component.answers.forEach(r=>{a[r.qualifiedCode]=t.runState.values[r.qualifiedCode].value}),a},v),s=w(),i=d.useRef(null),[u,c]=d.useState(800);d.useEffect(()=>{var t;c((t=i==null?void 0:i.current)==null?void 0:t.offsetWidth)},[i]);const m=(u-e.component.columns*e.component.spacing*2)/e.component.columns,l=m/(e.component.imageAspectRatio||1);d.useEffect(()=>{const t=()=>{var a;c((a=i==null?void 0:i.current)==null?void 0:a.offsetWidth)};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[]);const k=t=>{if(s(f(e.component.qualifiedCode)),s(f(e.parentCode)),+n[t]>0)s(C({componentCode:t,undefined:void 0}));else{let r=Object.keys(n),_=r.map(S=>n[S]);for(var a=1;a<=r.length;a++)if(!_.includes(a)){s(C({componentCode:t,value:a}));return}}},y=x(t=>t.runState.values.Survey.lang),j=q.includes(y);return o.jsx(g,{sx:{gap:"".concat(e.component.spacing,"px"),justifyContent:j?"flex-end":"flex-start"},className:h.imageFlexContainer,children:e.component.answers.map(t=>o.jsx(I,{option:t,spacing:e.component.spacing,columns:e.component.columns,hideText:e.component.hideText,onClick:()=>k(t.qualifiedCode),parentCode:e.component.qualifiedCode,imageHeight:l,imageWidth:m},t.qualifiedCode))})}function I(e){var u,c;const n=b(),s=x(m=>{let l=m.runState.values[e.option.qualifiedCode];return{showAnswer:typeof(l==null?void 0:l.relevance)>"u"||l.relevance,value:(l==null?void 0:l.value)||0}},v),i=(u=e.option.resources)!=null&&u.image?"url('".concat(E(e.option.resources.image),"')"):"url('/placeholder-image.jpg')";return o.jsxs(g,{sx:{flex:"0 1 calc(".concat(100/e.columns,"% - ").concat(e.spacing,"px)"),cursor:"pointer"},children:[o.jsx(g,{className:h.imageContainer,onClick:()=>e.onClick(),display:"flex",justifyContent:"center",alignItems:"center",style:{paddingTop:100/e.aspectRatio+"%",backgroundImage:i,borderRadius:"4px",boxShadow:2,height:e.imageHeight+"px",border:s.checked?"2px solid ".concat(n.palette.primary.main):"2px solid transparent"},children:s.value>0&&o.jsx("div",{style:{height:Math.min(e.imageHeight,e.imageWidth)+"px",width:Math.min(e.imageHeight,e.imageWidth)+"px",borderRadius:Math.min(e.imageHeight,e.imageWidth)/2+"px",fontSize:Math.min(e.imageHeight,e.imageWidth)/2+"px",background:n.palette.primary.main},className:h.rankContainer,children:o.jsx("span",{className:h.rankValue,style:{color:n.textStyles.text.color},children:s.value})})}),!e.hideText&&o.jsx(g,{sx:{fontFamily:n.textStyles.text.font,color:n.textStyles.text.color,fontSize:n.textStyles.text.size},children:(c=e.option.content)==null?void 0:c.label})]},e.option.code)}export{M as default};
