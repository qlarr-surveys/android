import{s as A,j as o}from"./index-BdaHkdQl.js";import{c as F,a as g,o as k}from"./yup-DY16kGze.js";import{u as E,r as D,F as T,R as h,I as G}from"./Web-Xt-AHKsA.js";import{u as $}from"./use-boolean-Bxf0TRXb.js";import{A as q,y as z,D as C,F as n,T as i,am as f,I as O,ao as P}from"./use-service-D09swmN7.js";import{G as B,a as N}from"./index.esm-BOJiKYyZ.js";import{R as x}from"./router-link-CfAjyfVJ.js";import{L as j}from"./Link-Iys5U15E.js";import{I as Z}from"./InputAdornment-CMc9n4GQ.js";import{L as H}from"./LoadingButton-CeTIEj79.js";import{D as V}from"./Divider-OC9h4qP8.js";import"./TextField-B66jFwFo.js";import"./useFormControl-BousA45m.js";import"./Checkbox-0qy6A3Vu.js";import"./SwitchBase-outpB1OY.js";import"./Tabs-CXy611xA.js";import"./radioClasses-DNdhtY0L.js";import"./tableRowClasses-D2zlaSzG.js";import"./FormControlLabel-DrGXXvQK.js";function po(){const l=q("auth"),{t:e}=z("manage"),t=$(),s=C(),c=A(),v=F().shape({email:g().required(e("email_required")).matches(/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/i,e("error.invalid_email")),password:g().required(e("password_required"))}),y={email:"",password:""},m=E({resolver:k(v),defaultValues:y}),{setError:d,handleSubmit:p,formState:{isSubmitting:b}}=m,u=a=>{a.name==P.WRONG_CREDENTIALS.name&&(d("email",{type:"manual",message:e("processed_errors.".concat(a.name))}),d("password",{type:"manual",message:e("processed_errors.".concat(a.name))}))},w=p(async a=>{s(n(!0));try{await l.login(a.email,a.password);const{from:r}=location.state||{from:{pathname:"/"}};c(r)}catch(r){u(r)}finally{s(n(!1))}}),S=a=>{s(n(!0)),l.googleSignIn(a).then(r=>{const{from:R}=location.state||{from:{pathname:"/"}};c(R)}).catch(r=>{u(r)}).finally(()=>{s(n(!1))})},_=o.jsxs("div",{children:[o.jsx(i,{variant:"h3",paragraph:!0,children:e("login.login")}),o.jsxs(i,{variant:"body2",sx:{color:"text.secondary"},children:[e("login.dont_have_acc"),o.jsxs(j,{component:x,href:D.signup,variant:"subtitle2",color:"primary",children:[" ",e("sign_up.get_started")]})]})]}),I=o.jsx(f,{direction:"row",justifyContent:"center",children:o.jsx(B,{clientId:"464768435207-e2rkf9h0fjbcnhh2egkj3e9bkvub2p4o.apps.googleusercontent.com",children:o.jsx(N,{onSuccess:S,onError:()=>{console.log("Login Failed")}})})}),L=o.jsx(T,{methods:m,onSubmit:p(w),children:o.jsxs(f,{spacing:2.5,alignItems:"flex-end",children:[o.jsx(h,{name:"email",label:e("label.email")}),o.jsx(h,{name:"password",label:e("label.password"),type:t.value?"text":"password",InputProps:{endAdornment:o.jsx(Z,{position:"end",children:o.jsx(O,{onClick:t.onToggle,edge:"end",children:o.jsx(G,{icon:t.value?"carbon:view":"carbon:view-off"})})})}}),o.jsx(j,{component:x,href:"/forgot-password",variant:"body2",underline:"always",color:"text.secondary",children:e("login.forgot_password")}),o.jsx(H,{fullWidth:!0,color:"primary",size:"large",type:"submit",variant:"contained",loading:b,children:e("login.login")})]})});return o.jsxs(o.Fragment,{children:[_,L,o.jsx(V,{children:o.jsx(i,{variant:"body2",sx:{color:"text.disabled"},children:e("sign_up.continue_with")})}),I]})}export{po as default};
