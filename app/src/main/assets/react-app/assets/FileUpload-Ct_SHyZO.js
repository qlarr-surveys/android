import{V as J,U as Q,ai as K,a0 as ee,r as k,w as ne,y as S,m as n,D as oe,Y as F,ac as te}from"./index-DNbeaJsE.js";import{a as ie,ar as se,w as ae,s as O,h as G,c as le,g as re,a1 as ce,b as de,ac as ue,as as fe,K as E,M as me,y as R,at as N,a3 as pe,O as P,S as H,a7 as xe}from"./Android-C8RkpF_s.js";function he(e){return Q("MuiLink",e)}const ve=J("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),X={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ye=e=>X[e]||e,be=({theme:e,ownerState:o})=>{const s=ye(o.color),a=K(e,"palette.".concat(s),!1)||o.color,t=K(e,"palette.".concat(s,"Channel"));return"vars"in e&&t?"rgba(".concat(t," / 0.4)"):ee(a,.4)},ge=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],_e=e=>{const{classes:o,component:s,focusVisible:a,underline:t}=e,u={root:["root","underline".concat(G(t)),s==="button"&&"button",a&&"focusVisible"]};return le(u,he,o)},Ce=O(re,{name:"MuiLink",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e;return[o.root,o["underline".concat(G(s.underline))],s.component==="button"&&o.button]}})(({theme:e,ownerState:o})=>S({},o.underline==="none"&&{textDecoration:"none"},o.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},o.underline==="always"&&S({textDecoration:"underline"},o.color!=="inherit"&&{textDecorationColor:be({theme:e,ownerState:o})},{"&:hover":{textDecorationColor:"inherit"}}),o.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(ve.focusVisible)]:{outline:"auto"}})),W=k.forwardRef(function(o,s){const a=ie({props:o,name:"MuiLink"}),{className:t,color:u="primary",component:v="a",onBlur:r,onFocus:l,TypographyClasses:z,underline:x="always",variant:c="inherit",sx:f}=a,p=ne(a,ge),{isFocusVisibleRef:h,onBlur:w,onFocus:A,ref:D}=se(),[M,y]=k.useState(!1),T=ae(s,D),V=m=>{w(m),h.current===!1&&y(!1),r&&r(m)},_=m=>{A(m),h.current===!0&&y(!0),l&&l(m)},b=S({},a,{color:u,component:v,focusVisible:M,underline:x,variant:c}),C=_e(b);return n.jsx(Ce,S({color:u,className:oe(C.root,t),classes:z,component:v,onBlur:V,onFocus:_,ref:T,ownerState:b,variant:c,sx:[...Object.keys(X).includes(u)?[]:[{color:u}],...Array.isArray(f)?f:[f]]},p))}),je=O("input")({display:"none"});function Se(e){var _,b,C,m,L,U,$,q;const o=ce("run"),s=de(),{t:a}=ue("run");let t=fe((b=(_=e.component.validation)==null?void 0:_.validation_file_types)==null?void 0:b.fileTypes);const u=((m=(C=e.component.validation)==null?void 0:C.validation_max_file_size)==null?void 0:m.isActive)&&((U=(L=e.component.validation)==null?void 0:L.validation_max_file_size)==null?void 0:U.max_size)||-1,v=10240,r=u>0?Math.min(u,v):v,l=E(d=>{let i=d.runState.values[e.component.qualifiedCode];return i==null?void 0:i.value}),z=E(d=>d.runState.preview),x=me(),[c,f]=k.useState(),[p,h]=k.useState(!1),w=()=>{window.Android.previewFileUpload(l.stored_filename,l.filename)},A=!p&&c&&t.length>0&&!t.includes(c.type),D=!p&&c&&r>0&&c.size/1024>r,M=d=>{var g;const i=(g=d.target.files)==null?void 0:g[0];if(!i)return;x(H(e.component.qualifiedCode)),f(i);const B=t.length>0&&!t.includes(i.type),j=r>0&&i.size/1024>r;!B&&!j&&y(i)},y=d=>{d&&(h(!0),xe(o,e.component.qualifiedCode,z,d).then(i=>{h(!1),f(void 0),x(P({componentCode:e.component.qualifiedCode,value:i}))}).catch(i=>{h(!1),console.error(i)}))},T=()=>{f(void 0)},V=d=>{if(window.Android){d.preventDefault();const i=e.component.qualifiedCode;window.Android.selectFile(i,(t==null?void 0:t.join(","))||"",r||-1),window["onFileSelected"+i]=(B,j,g)=>{const I={name:B,size:j,type:g};x(H(i)),f(I);const Y=t.length>0&&!t.includes(g),Z=r>0&&j/1024>r;!Y&&!Z&&y(I)}}};return n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"contained-button-file",children:[n.jsx(je,{id:"contained-button-file",type:"file",accept:t?t.join(","):void 0,onChange:M}),n.jsx(R,{disabled:p,onClick:V,variant:"contained",component:"span",children:a("choose_file")})]}),c?n.jsxs(F.Fragment,{children:[n.jsxs("span",{children:["Â ",c.name," - ",Math.round(c.size/1024),"K"]}),n.jsx(R,{disabled:p,sx:{fontFamily:s.textStyles.text.font,fontSize:s.textStyles.text.size},variant:"text",onClick:T,children:a("cancel")})]}):"",D&&n.jsxs(F.Fragment,{children:[n.jsx("br",{}),n.jsx(N,{name:"validation_max_file_size",validation:($=e.component.validation)==null?void 0:$.validation_max_file_size})]}),A&&n.jsxs(F.Fragment,{children:[n.jsx("br",{}),n.jsx(N,{name:"validation_file_types",validation:(q=e.component.validation)==null?void 0:q.validation_file_types})]}),p?n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx(te,{}),n.jsx("br",{}),n.jsx("span",{children:a("uploading")})]}):!l||!l.stored_filename?"":n.jsxs(F.Fragment,{children:[n.jsx("br",{}),n.jsx("br",{}),window.Android?n.jsxs(W,{target:"_blank",onClick:w,children:[l.filename," - ",Math.round(l.size/1024),"K"]}):n.jsxs(W,{target:"_blank",href:pe(l.stored_filename),children:[l.filename," - ",Math.round(l.size/1024),"K"]}),n.jsx(R,{variant:"text",size:"small",onClick:()=>x(P({componentCode:e.component.qualifiedCode,value:null})),children:a("remove_file","Remove")})]})]})}export{Se as default};
