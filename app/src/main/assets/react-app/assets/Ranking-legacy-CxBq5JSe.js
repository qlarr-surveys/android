!function(){function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function r(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,d=[],s=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(d.push(n.value),d.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return d}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./index-legacy-DY8KI8wT.js","./Android-legacy-Dij8smpC.js"],(function(e,r){"use strict";var o,i,a,d,s,l,u,c,f,p,g,h,m,C,y,T,v,b,I,O;return{setters:[e=>{o=e.r,i=e.a4,a=e.m},e=>{d=e.ad,s=e.ae,l=e.af,u=e.ag,c=e.ah,f=e.ai,p=e.aj,g=e.ak,h=e.al,m=e.J,C=e.E,y=e.H,T=e.a2,v=e.L,b=e.am,I=e.an,O=e.O}],execute:function(){var r=document.createElement("style");r.textContent="._dragContainer_5yuyr_1{border:1px solid transparent;border-radius:4px;height:100%;display:flex;flex-direction:column;margin:auto 8px}._rankingItem_5yuyr_10{margin:0 8px;padding:8px}\n/*$vite$:1*/",document.head.appendChild(r),e("default",(function(e){const r=m(),n=i(),o=e.lang,d=C((t=>{let r={};return e.component.answers.forEach((e=>{r[e.qualifiedCode]=t.runState.values[e.qualifiedCode].value})),r}),y),s=e=>isNaN(d[e])?"unsorted":"sorted",l=C((t=>{let r={};return e.component.answers.forEach((e=>{t.runState.order?r[e.qualifiedCode]=t.runState.order[e.qualifiedCode]:r[e.qualifiedCode]=t.runState.values[e.qualifiedCode].order+1})),r}),y),u=e.component.answers.filter((e=>!d[e.qualifiedCode])).sort((function(e,t){return l[e.qualifiedCode]-l[t.qualifiedCode]})),c=e.component.answers.filter((e=>+d[e.qualifiedCode]>0)).sort((function(e,t){return d[e.qualifiedCode]-d[t.qualifiedCode]})),f=(e,n,o)=>{const i=t({},l);if("sorted"==o&&"unsorted"==s(e.qualifiedCode)){const t=n+1;for(let e in d)d.hasOwnProperty(e)&&d[e]>=t&&r(v({componentCode:e,value:d[e]+1}));r(v({componentCode:e.qualifiedCode,value:t})),e.index=n;const o=i[e.qualifiedCode];u.forEach((e=>{i[e.qualifiedCode]>=o&&(i[e.qualifiedCode]=i[e.qualifiedCode]-1)})),r(b(i))}else if("unsorted"==o&&"sorted"==s(e.qualifiedCode)){const t=d[e.qualifiedCode];for(let e in d)d.hasOwnProperty(e)&&d[e]>=t&&r(v({componentCode:e,value:d[e]-1}));r(v({componentCode:e.qualifiedCode,value:void 0})),e.index=n;const o=n+1;u.forEach((e=>{i[e.qualifiedCode]>=o&&(i[e.qualifiedCode]=i[e.qualifiedCode]+1)})),i[e.qualifiedCode]=o,r(b(i))}},p=e=>{"unsorted"==s(e.qualifiedCode)?f(e,c.length,"sorted"):f(e,u.length,"unsorted")},g=(e,n,o,i)=>{const a=t({},l);if("unsorted"==o&&"unsorted"==s(e.qualifiedCode)){const t=a[e.qualifiedCode];a[e.qualifiedCode]=a[n.qualifiedCode],a[n.qualifiedCode]=t,r(b(a)),e.index=i}else"sorted"==o&&"sorted"==s(e.qualifiedCode)&&(r(v({componentCode:e.qualifiedCode,value:d[n.qualifiedCode]})),r(v({componentCode:n.qualifiedCode,value:d[e.qualifiedCode]})),e.index=i)};return a.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[a.jsx(H,{styles:M,lang:o,theme:n,ordererLength:c.length,unordererLength:u.length,onHover:g,order:l,onItemTransfer:f,onDoubleClick:p,itemType:"unsorted",options:u}),a.jsx(H,{styles:M,lang:o,theme:n,onHover:g,onItemTransfer:f,onDoubleClick:p,ordererLength:c.length,unordererLength:u.length,order:l,itemType:"sorted",options:c})]})}));let x=!1;class D{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;d(!x,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return x=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{x=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}class q{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!s(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=l({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,u(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function j(e){return o.useMemo((()=>e.hooks.dropTarget()),[e])}class S{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function k(e,t,r){const i=c(),a=function(e,t){const r=o.useMemo((()=>new S(e,t)),[t]);return o.useEffect((()=>{r.spec=e}),[e]),r}(e,t),s=function(e){const t=e.accept;return o.useMemo((()=>(d(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t])),[t])}(e);f((function(){const e=n(p(s,a,i),2),o=e[0],d=e[1];return t.receiveHandlerId(o),r.receiveHandlerId(o),d}),[i,t,a,r,s.map((e=>e.toString())).join("|")])}function w(e,t){const r=g(e),n=function(){const e=c();return o.useMemo((()=>new D(e)),[e])}(),i=function(e){const t=c(),r=o.useMemo((()=>new q(t.getBackend())),[t]);return f((()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget())),[e]),r}(r.options);return k(r,n,i),[h(r.collect,n,i),j(i)]}const M={dragContainer:"_dragContainer_5yuyr_1",rankingItem:"_rankingItem_5yuyr_10"};function H({styles:e,itemType:t,lang:r,theme:n,options:i,onItemTransfer:d,onDoubleClick:s,onHover:l}){const u=o.useRef(null);return a.jsxs(T,{ref:u,className:e.dragContainer,sx:{backgroundColor:"background.default"},children:[i.map(((i,u)=>a.jsxs(o.Fragment,{children:[a.jsx(R,{itemType:t,index:u,onItemTransfer:d},"drop"+i.code),a.jsx(P,{lang:r,theme:n,index:u,onHover:l,itemType:t,option:i,rankingItemStyle:e.rankingItem,onDoubleClick:s},i.code)]},i.code))),a.jsx(R,{itemType:t,index:i.length,fillParent:!0,onItemTransfer:d},"last")]})}function P({lang:e,theme:t,option:r,onDoubleClick:i,rankingItemStyle:d,index:s,onHover:l,itemType:u}){var c;const f=o.useRef(),p={index:s,qualifiedCode:r.qualifiedCode},g=n(I({type:"rankingOption",item:p,collect:e=>{var t;return(null===(t=e.getItem())||void 0===t?void 0:t.qualifiedCode)===r.qualifiedCode}}),3),h=g[0],m=g[1],C=g[2],y=n(w({accept:"rankingOption",collect:e=>({handlerId:e.getHandlerId()}),hover(e,t){var n;if(!f.current||!t.isOver({shallow:!0})||!e)return;const o=e.index,i=s;if(o===i)return;const a=null===(n=f.current)||void 0===n?void 0:n.getBoundingClientRect(),d=(a.bottom-a.top)/2,c=t.getClientOffset().y-a.top;o<i&&c<d||o>i&&c>d||l(e,r,u,s)}}),2),v=y[0].handlerId;return(0,y[1])(C(f)),a.jsx("div",{ref:m,children:a.jsx(T,{ref:f,"data-handler-id":v,style:{opacity:h?"0.2":"1"},onDoubleClick:()=>i(p),className:d,sx:{backgroundColor:"background.paper"},children:a.jsx(O,{elementCode:r.code,fontFamily:t.textStyles.text.font,color:t.textStyles.text.color,fontSize:t.textStyles.text.size,name:"label",lang:e,content:null===(c=r.content)||void 0===c?void 0:c.label})})})}function R({index:e,onItemTransfer:t,itemType:r,fillParent:i}){const d=o.useRef(),s=n(w({accept:"rankingOption",collect:e=>({handlerId:e.getHandlerId()}),hover(n,o){d.current&&o.isOver({shallow:!0})&&n&&t(n,e,r)}}),2),l=s[0].handlerId;return(0,s[1])(d),a.jsx("div",{style:{flex:i?1:"inherit",minHeight:"12px"},ref:d,"data-handler-id":l})}}}}))}();
