import{V as J,U as O,ae as B,a0 as Q,r as z,w as Y,y as w,m as n,D as G,Y as k,a8 as X}from"./index-GpgTsJG-.js";import{a as Z,ap as ee,y as ne,s as P,e as E,g as oe,j as te,$ as ie,b as se,aa as ae,aq as le,E as M,J as re,z as L,ar as $,a1 as ce,Q as q,a5 as de,L as ue}from"./Android-VO6a0haY.js";function fe(e){return O("MuiLink",e)}const me=J("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),H={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},pe=e=>H[e]||e,xe=({theme:e,ownerState:o})=>{const i=pe(o.color),s=B(e,"palette.".concat(i),!1)||o.color,t=B(e,"palette.".concat(i,"Channel"));return"vars"in e&&t?"rgba(".concat(t," / 0.4)"):Q(s,.4)},he=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],ve=e=>{const{classes:o,component:i,focusVisible:s,underline:t}=e,c={root:["root","underline".concat(E(t)),i==="button"&&"button",s&&"focusVisible"]};return oe(c,fe,o)},ye=P(te,{name:"MuiLink",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:i}=e;return[o.root,o["underline".concat(E(i.underline))],i.component==="button"&&o.button]}})(({theme:e,ownerState:o})=>w({},o.underline==="none"&&{textDecoration:"none"},o.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},o.underline==="always"&&w({textDecoration:"underline"},o.color!=="inherit"&&{textDecorationColor:xe({theme:e,ownerState:o})},{"&:hover":{textDecorationColor:"inherit"}}),o.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},["&.".concat(me.focusVisible)]:{outline:"auto"}})),N=z.forwardRef(function(o,i){const s=Z({props:o,name:"MuiLink"}),{className:t,color:c="primary",component:a="a",onBlur:y,onFocus:m,TypographyClasses:l,underline:x="always",variant:d="inherit",sx:f}=s,S=Y(s,he),{isFocusVisibleRef:h,onBlur:b,onFocus:A,ref:D}=ee(),[g,j]=z.useState(!1),V=ne(i,D),C=u=>{b(u),h.current===!1&&j(!1),y&&y(u)},_=u=>{A(u),h.current===!0&&j(!0),m&&m(u)},v=w({},s,{color:c,component:a,focusVisible:g,underline:x,variant:d}),F=ve(v);return n.jsx(ye,w({color:c,className:G(F.root,t),classes:l,component:a,onBlur:C,onFocus:_,ref:V,ownerState:v,variant:d,sx:[...Object.keys(H).includes(c)?[]:[{color:c}],...Array.isArray(f)?f:[f]]},S))}),be=P("input")({display:"none"});function Ce(e){var C,_,v,F,u,R,T,U;const o=ie("run"),i=se(),{t:s}=ae("run");let t=le((_=(C=e.component.validation)==null?void 0:C.validation_file_types)==null?void 0:_.fileTypes);const c=((F=(v=e.component.validation)==null?void 0:v.validation_max_file_size)==null?void 0:F.isActive)&&((R=(u=e.component.validation)==null?void 0:u.validation_max_file_size)==null?void 0:R.max_size)||-1,a=M(r=>{let p=r.runState.values[e.component.qualifiedCode];return p==null?void 0:p.value}),y=M(r=>r.runState.preview),m=re(),[l,x]=z.useState(),[d,f]=z.useState(!1),S=()=>{window.Android.previewFileUpload(a.stored_filename,a.filename)},h=!d&&l&&t.length>0&&!t.includes(l.type),b=!d&&l&&c>0&&l.size/1024>c,A=r=>{m(q(e.component.qualifiedCode)),x(r.target.files[0])},D=()=>{f(!0),de(o,e.component.qualifiedCode,y,l).then(r=>{f(!1),g(),m(ue({componentCode:e.component.qualifiedCode,value:r}))}).catch(r=>{f(!1),console.error(r)})},g=()=>{x(void 0)},j=r=>{if(window.Android){const p=e.component.qualifiedCode;r.preventDefault(),window.Android.selectFile(p,(t==null?void 0:t.join(","))||"",c),window["onFileSelected"+p]=(I,K,W)=>{m(q(e.component.qualifiedCode)),x({name:I,size:K,type:W})}}};let V=l&&!h&&!b;return n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"contained-button-file",children:[n.jsx(be,{id:"contained-button-file",type:"file",accept:t?t.join(","):void 0,onChange:A}),n.jsx(L,{disabled:d,onClick:j,variant:"contained",component:"span",children:s("choose_file")})]}),l?n.jsxs(k.Fragment,{children:[n.jsxs("span",{children:["Â ",l.name," - ",Math.round(l.size/1024),"K"]}),V?n.jsx(L,{disabled:d,variant:"text",onClick:D,children:s("upload")}):"",n.jsx(L,{disabled:d,sx:{fontFamily:i.textStyles.text.font,fontSize:i.textStyles.text.size},variant:"text",onClick:g,children:s("cancel")})]}):"",b&&n.jsxs(k.Fragment,{children:[n.jsx("br",{}),n.jsx($,{name:"validation_max_file_size",validation:(T=e.component.validation)==null?void 0:T.validation_max_file_size})]}),h&&n.jsxs(k.Fragment,{children:[n.jsx("br",{}),n.jsx($,{name:"validation_file_types",validation:(U=e.component.validation)==null?void 0:U.validation_file_types})]}),d?n.jsxs("div",{style:{textAlign:"center"},children:[n.jsx(X,{}),n.jsx("br",{}),n.jsx("span",{children:s("uploading")})]}):!a||!a.stored_filename?"":n.jsxs(k.Fragment,{children:[n.jsx("br",{}),n.jsx("br",{}),window.Android?n.jsxs(N,{target:"_blank",onClick:S,children:[a.filename," - ",Math.round(a.size/1024),"K"]}):n.jsxs(N,{target:"_blank",href:ce(a.stored_filename),children:[a.filename," - ",Math.round(a.size/1024),"K"]})]})]})}export{Ce as default};
