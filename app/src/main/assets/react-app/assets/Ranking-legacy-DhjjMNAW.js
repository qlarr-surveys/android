!function(){function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){r(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function r(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,d=[],s=!0,l=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(d.push(n.value),d.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw o}}return d}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./index-legacy-B14W8d4e.js","./Android-legacy-DrCb6Xg_.js"],(function(e,r){"use strict";var o,i,a,d,s,l,u,c,f,p,g,h,m,C,y,T,v,b;return{setters:[e=>{o=e.r,i=e.m},e=>{a=e.a9,d=e.aa,s=e.ab,l=e.ac,u=e.ad,c=e.ae,f=e.af,p=e.ag,g=e.ah,h=e.H,m=e.D,C=e.E,y=e.U,T=e.ai,v=e.J,b=e.aj}],execute:function(){var r=document.createElement("style");r.textContent="._dragContainer_5yuyr_1{border:1px solid transparent;border-radius:4px;height:100%;display:flex;flex-direction:column;margin:auto 8px}._rankingItem_5yuyr_10{margin:0 8px;padding:8px}\n/*$vite$:1*/",document.head.appendChild(r),e("default",(function(e){const r=h(),n=m((t=>{let r={};return e.component.answers.forEach((e=>{r[e.qualifiedCode]=t.runState.values[e.qualifiedCode].value})),r}),C),o=e=>isNaN(n[e])?"unsorted":"sorted",a=m((t=>{let r={};return e.component.answers.forEach((e=>{t.runState.order?r[e.qualifiedCode]=t.runState.order[e.qualifiedCode]:r[e.qualifiedCode]=t.runState.values[e.qualifiedCode].order+1})),r}),C),d=e.component.answers.filter((e=>!n[e.qualifiedCode])).sort((function(e,t){return a[e.qualifiedCode]-a[t.qualifiedCode]})),s=e.component.answers.filter((e=>+n[e.qualifiedCode]>0)).sort((function(e,t){return n[e.qualifiedCode]-n[t.qualifiedCode]})),l=(e,i,s)=>{const l=t({},a);if("sorted"==s&&"unsorted"==o(e.qualifiedCode)){const t=i+1;for(let e in n)n.hasOwnProperty(e)&&n[e]>=t&&r(v({componentCode:e,value:n[e]+1}));r(v({componentCode:e.qualifiedCode,value:t})),e.index=i;const o=l[e.qualifiedCode];d.forEach((e=>{l[e.qualifiedCode]>=o&&(l[e.qualifiedCode]=l[e.qualifiedCode]-1)})),r(b(l))}else if("unsorted"==s&&"sorted"==o(e.qualifiedCode)){const t=n[e.qualifiedCode];for(let e in n)n.hasOwnProperty(e)&&n[e]>=t&&r(v({componentCode:e,value:n[e]-1}));r(v({componentCode:e.qualifiedCode,value:void 0})),e.index=i;const o=i+1;d.forEach((e=>{l[e.qualifiedCode]>=o&&(l[e.qualifiedCode]=l[e.qualifiedCode]+1)})),l[e.qualifiedCode]=o,r(b(l))}},u=e=>{"unsorted"==o(e.qualifiedCode)?l(e,s.length,"sorted"):l(e,d.length,"unsorted")},c=(e,i,d,s)=>{const l=t({},a);if("unsorted"==d&&"unsorted"==o(e.qualifiedCode)){const t=l[e.qualifiedCode];l[e.qualifiedCode]=l[i.qualifiedCode],l[i.qualifiedCode]=t,r(b(l)),e.index=s}else"sorted"==d&&"sorted"==o(e.qualifiedCode)&&(r(v({componentCode:e.qualifiedCode,value:n[i.qualifiedCode]})),r(v({componentCode:i.qualifiedCode,value:n[e.qualifiedCode]})),e.index=s)};return i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[i.jsx(S,{styles:w,ordererLength:s.length,unordererLength:d.length,onHover:c,order:a,onItemTransfer:l,onDoubleClick:u,itemType:"unsorted",options:d}),i.jsx(S,{styles:w,onHover:c,onItemTransfer:l,onDoubleClick:u,ordererLength:s.length,unordererLength:d.length,order:a,itemType:"sorted",options:s})]})}));let I=!1;class O{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;a(!I,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return I=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{I=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}class D{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!d(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=s({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,l(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function q(e){return o.useMemo((()=>e.hooks.dropTarget()),[e])}class x{canDrop(){const e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function j(e,t,r){const i=u(),d=function(e,t){const r=o.useMemo((()=>new x(e,t)),[t]);return o.useEffect((()=>{r.spec=e}),[e]),r}(e,t),s=function(e){const t=e.accept;return o.useMemo((()=>(a(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t])),[t])}(e);c((function(){const e=n(f(s,d,i),2),o=e[0],a=e[1];return t.receiveHandlerId(o),r.receiveHandlerId(o),a}),[i,t,d,r,s.map((e=>e.toString())).join("|")])}function k(e,t){const r=p(e),n=function(){const e=u();return o.useMemo((()=>new O(e)),[e])}(),i=function(e){const t=u(),r=o.useMemo((()=>new D(t.getBackend())),[t]);return c((()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget())),[e]),r}(r.options);return j(r,n,i),[g(r.collect,n,i),q(i)]}const w={dragContainer:"_dragContainer_5yuyr_1",rankingItem:"_rankingItem_5yuyr_10"};function S({styles:e,itemType:t,options:r,onItemTransfer:n,onDoubleClick:a,onHover:d}){const s=o.useRef(null);return i.jsxs(y,{ref:s,className:e.dragContainer,sx:{backgroundColor:"background.default"},children:[r.map(((r,s)=>i.jsxs(o.Fragment,{children:[i.jsx(H,{itemType:t,index:s,onItemTransfer:n},"drop"+r.code),i.jsx(M,{index:s,onHover:d,itemType:t,option:r,rankingItemStyle:e.rankingItem,onDoubleClick:a},r.code)]},r.code))),i.jsx(H,{itemType:t,index:r.length,fillParent:!0,onItemTransfer:n},"last")]})}function M({option:e,onDoubleClick:t,rankingItemStyle:r,index:a,onHover:d,itemType:s}){var l;const u=o.useRef(),c={index:a,qualifiedCode:e.qualifiedCode},f=n(T({type:"rankingOption",item:c,collect:t=>{var r;return(null===(r=t.getItem())||void 0===r?void 0:r.qualifiedCode)===e.qualifiedCode}}),3),p=f[0],g=f[1],h=f[2],m=n(k({accept:"rankingOption",collect:e=>({handlerId:e.getHandlerId()}),hover(t,r){var n;if(!u.current||!r.isOver({shallow:!0})||!t)return;const o=t.index,i=a;if(o===i)return;const l=null===(n=u.current)||void 0===n?void 0:n.getBoundingClientRect(),c=(l.bottom-l.top)/2,f=r.getClientOffset().y-l.top;o<i&&f<c||o>i&&f>c||d(t,e,s,a)}}),2),C=m[0].handlerId;return(0,m[1])(h(u)),i.jsx("div",{ref:g,children:i.jsx(y,{ref:u,"data-handler-id":C,style:{opacity:p?"0.2":"1"},onDoubleClick:()=>t(c),className:r,sx:{backgroundColor:"background.paper"},children:null===(l=e.content)||void 0===l?void 0:l.label})})}function H({index:e,onItemTransfer:t,itemType:r,fillParent:a}){const d=o.useRef(),s=n(k({accept:"rankingOption",collect:e=>({handlerId:e.getHandlerId()}),hover(n,o){d.current&&o.isOver({shallow:!0})&&n&&t(n,e,r)}}),2),l=s[0].handlerId;return(0,s[1])(d),i.jsx("div",{style:{flex:a?1:"inherit",minHeight:"12px"},ref:d,"data-handler-id":l})}}}}))}();
