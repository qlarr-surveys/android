var W=Object.freeze,he=Object.defineProperty;var $=(e,n)=>W(he(e,"raw",{value:W(n||e.slice())}));import{Y as d,r as K,m as y,a7 as me,a4 as ye}from"./index-DCf9ET77.js";import{N as G,R as q,S as z,U as J,W as Q,X as o,s as xe,K as be,E as ve,H as _e,J as Ce,O as Fe,L as Ve}from"./Android-0LfW9AkK.js";var Oe=e=>e.type==="checkbox",Se=e=>e instanceof Date,se=e=>e==null;const je=e=>typeof e=="object";var I=e=>!se(e)&&!Array.isArray(e)&&je(e)&&!Se(e),ke=e=>I(e)&&e.target?Oe(e.target)?e.target.checked:e.target.value:e,Me=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Re=(e,n)=>e.has(Me(n)),Te=e=>{const n=e.constructor&&e.constructor.prototype;return I(n)&&n.hasOwnProperty("isPrototypeOf")},we=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ae(e){let n;const t=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)n=new Date(e);else if(!(we&&(e instanceof Blob||a))&&(t||I(e)))if(n=t?[]:{},!t&&!Te(e))n=e;else for(const r in e)e.hasOwnProperty(r)&&(n[r]=ae(e[r]));else return e;return n}var oe=e=>/^\w*$/.test(e),L=e=>e===void 0,Ae=e=>Array.isArray(e)?e.filter(Boolean):[],le=e=>Ae(e.replace(/["|']|\]/g,"").split(/\.|\[/)),_=(e,n,t)=>{if(!n||!I(e))return t;const a=(oe(n)?[n]:le(n)).reduce((r,c)=>se(r)?r:r[c],e);return L(a)||a===e?L(e[n])?t:e[n]:a},B=e=>typeof e=="boolean",X=(e,n,t)=>{let a=-1;const r=oe(n)?[n]:le(n),c=r.length,u=c-1;for(;++a<c;){const i=r[a];let f=t;if(a!==u){const h=e[i];f=I(h)||Array.isArray(h)?h:isNaN(+r[a+1])?{}:[]}if(i==="__proto__"||i==="constructor"||i==="prototype")return;e[i]=f,e=e[i]}};const Y={BLUR:"blur",CHANGE:"change"},Z={all:"all"},ie=d.createContext(null);ie.displayName="HookFormContext";const E=()=>d.useContext(ie);var De=(e,n,t,a=!0)=>{const r={defaultValues:n._defaultValues};for(const c in e)Object.defineProperty(r,c,{get:()=>{const u=c;return n._proxyFormState[u]!==Z.all&&(n._proxyFormState[u]=!a||Z.all),t&&(t[u]=!0),e[u]}});return r};const ue=typeof window<"u"?K.useLayoutEffect:K.useEffect;function Ie(e){const n=E(),{control:t=n.control,disabled:a,name:r,exact:c}=e||{},[u,i]=d.useState(t._formState),f=d.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return ue(()=>t._subscribe({name:r,formState:f.current,exact:c,callback:h=>{!a&&i({...t._formState,...h})}}),[r,a,c]),d.useEffect(()=>{f.current.isValid&&t._setValid(!0)},[t]),d.useMemo(()=>De(u,t,f.current,!1),[u,t])}var Ee=e=>typeof e=="string",Pe=(e,n,t,a,r)=>Ee(e)?_(t,e,r):Array.isArray(e)?e.map(c=>_(t,c)):t;function Ne(e){const n=E(),{control:t=n.control,name:a,defaultValue:r,disabled:c,exact:u}=e||{},i=d.useRef(r),[f,h]=d.useState(t._getWatch(a,i.current));return ue(()=>t._subscribe({name:a,formState:{values:!0},exact:u,callback:V=>!c&&h(Pe(a,t._names,V.values||t._formValues,!1,i.current))}),[a,t,c,u]),d.useEffect(()=>t._removeUnmounted()),f}function Be(e){const n=E(),{name:t,disabled:a,control:r=n.control,shouldUnregister:c}=e,u=Re(r._names.array,t),i=Ne({control:r,name:t,defaultValue:_(r._formValues,t,_(r._defaultValues,t,e.defaultValue)),exact:!0}),f=Ie({control:r,name:t,exact:!0}),h=d.useRef(e),V=d.useRef(r.register(t,{...e.rules,value:i,...B(e.disabled)?{disabled:e.disabled}:{}})),w=d.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!_(f.errors,t)},isDirty:{enumerable:!0,get:()=>!!_(f.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!_(f.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!_(f.validatingFields,t)},error:{enumerable:!0,get:()=>_(f.errors,t)}}),[f,t]),O=d.useCallback(x=>V.current.onChange({target:{value:ke(x),name:t},type:Y.CHANGE}),[t]),j=d.useCallback(()=>V.current.onBlur({target:{value:_(r._formValues,t),name:t},type:Y.BLUR}),[t,r._formValues]),F=d.useCallback(x=>{const T=_(r._fields,t);T&&x&&(T._f.ref={focus:()=>x.focus&&x.focus(),select:()=>x.select&&x.select(),setCustomValidity:k=>x.setCustomValidity(k),reportValidity:()=>x.reportValidity()})},[r._fields,t]),v=d.useMemo(()=>({name:t,value:i,...B(a)||f.disabled?{disabled:f.disabled||a}:{},onChange:O,onBlur:j,ref:F}),[t,a,f.disabled,O,j,F,i]);return d.useEffect(()=>{const x=r._options.shouldUnregister||c;r.register(t,{...h.current.rules,...B(h.current.disabled)?{disabled:h.current.disabled}:{}});const T=(k,P)=>{const b=_(r._fields,k);b&&b._f&&(b._f.mount=P)};if(T(t,!0),x){const k=ae(_(r._options.defaultValues,t));X(r._defaultValues,t,k),L(_(r._formValues,t))&&X(r._formValues,t,k)}return!u&&r.register(t),()=>{(u?x&&!r._state.action:x)?r.unregister(t):T(t,!1)}},[t,r,u,c]),d.useEffect(()=>{r._setDisabledField({disabled:a,name:t})},[a,t,r]),d.useMemo(()=>({field:v,formState:f,fieldState:w}),[v,f,w])}const Le=e=>e.render(Be(e));function ce({name:e,native:n,maxHeight:t=220,helperText:a,children:r,PaperPropsSx:c,label:u,onChange:i,value:f,...h}){const V=E();if(!V)return y.jsxs(G,{fullWidth:!0,...h,children:[y.jsx(q,{children:u}),y.jsx(z,{value:f,sx:{borderRadius:"12px","& .MuiOutlinedInput-notchedOutline":{border:"1px solid #d7d7d7"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid #181735"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#181735"},"& .MuiOutlinedInput-input":{padding:".5rem"}},onChange:i,label:u,children:d.Children.map(r,(O,j)=>y.jsx(J,{value:O.props.value,children:O.props.children},j))}),y.jsx(Q,{children:a})]});const{control:w}=V;return y.jsx(Le,{name:e,control:w,render:({field:O,fieldState:{error:j}})=>y.jsxs(G,{fullWidth:!0,...O,children:[y.jsx(q,{children:u}),y.jsx(z,{...O,sx:{borderRadius:"12px","& .MuiOutlinedInput-notchedOutline":{border:"1px solid #d7d7d7"},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid #181735"},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"#181735"},"& .MuiOutlinedInput-input":{padding:".5rem"}},error:!!j,label:u,...h,children:d.Children.map(r,(F,v)=>y.jsx(J,{value:F.props.value,children:F.props.children},v))}),y.jsx(Q,{children:a})]})})}ce.propTypes={PaperPropsSx:o.object,children:o.node,helperText:o.object,maxHeight:o.number,name:o.string,native:o.bool};o.bool,o.bool,o.object,o.string,o.string,o.array,o.string;o.string,o.string;o.string,o.string,o.string,o.array,o.bool,o.number,o.object;o.node,o.object,o.func;var ne;const He=xe(be)(ne||(ne=$(["\n  input {\n    text-align: center;\n  }\n"]))),Ue={TextFieldStyled:He},We=e=>y.jsx(Ue.TextFieldStyled,{...e}),D={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function $e(e,n){return e<=0?[]:Array.from({length:e},n)}function Ke(e,n,t){return e.map((a,r)=>n===r?t:a)}function ee(e){return e.join("")}function te(e,n){return[...e,n]}function Ge(e,n,t){return e.reduce((a,r,c)=>{const{characters:u,restArrayMerged:i}=a;if(c<t)return{restArrayMerged:i,characters:te(u,r)};const[f,...h]=i;return{restArrayMerged:h,characters:te(u,f||"")}},{restArrayMerged:n,characters:[]}).characters}function qe(e){return e.split("")}function re(e){const n=d.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return d.useInsertionEffect(()=>{n.current=e}),d.useCallback((...t)=>{var a;return(a=n.current)==null?void 0:a.call(n,...t)},[])}const ze=()=>!0;d.forwardRef((e,n)=>{const{value:t="",length:a=4,autoFocus:r=!1,onChange:c,TextFieldsProps:u,onComplete:i,validateChar:f=ze,className:h,onBlur:V,...w}=e,O=d.useRef(t),j=re(i),F=re(s=>{const l=s.slice(0,a);return{isCompleted:l.length===a,finalValue:l}});d.useEffect(()=>{const{isCompleted:s,finalValue:l}=F(O.current);s&&j(l)},[a,j,F]);const v=$e(a,(s,l)=>({character:t[l]||"",inputRef:d.createRef()})),x=s=>v.findIndex(({inputRef:l})=>l.current===s),T=()=>v.map(({character:s})=>s),k=(s,l)=>{const p=Ke(T(),s,l);return ee(p)},P=s=>{var l,p;(p=(l=v[s])==null?void 0:l.inputRef.current)==null||p.focus()},b=s=>{var l,p;(p=(l=v[s])==null?void 0:l.inputRef.current)==null||p.select()},H=s=>{s+1!==a&&(v[s+1].character?b(s+1):P(s+1))},U=(s,l)=>typeof f!="function"?!0:f(s,l),de=s=>{const l=x(s.target);if(l===0&&s.target.value.length>1){const{finalValue:R,isCompleted:A}=F(s.target.value);c==null||c(R),A&&(i==null||i(R)),b(R.length-1);return}const p=s.target.value[0]||"";let C=p;C&&!U(C,l)&&(C="");const g=k(l,C);c==null||c(g);const{isCompleted:M,finalValue:S}=F(g);M&&(i==null||i(S)),C!==""?g.length-1<l?b(g.length):H(l):p===""&&g.length<=l&&b(l-1)},fe=s=>{const l=s.target,p=l.selectionStart,C=l.selectionEnd,g=x(l),M=p===0&&C===0;if(l.value===s.key)s.preventDefault(),H(g);else if(D.backspace===s.key){if(!l.value)s.preventDefault(),b(g-1);else if(M){s.preventDefault();const S=k(g,"");c==null||c(S),S.length<=g&&b(g-1)}}else D.left===s.key?(s.preventDefault(),b(g-1)):D.right===s.key?(s.preventDefault(),b(g+1)):D.home===s.key?(s.preventDefault(),b(0)):D.end===s.key&&(s.preventDefault(),b(v.length-1))},pe=s=>{const l=s.clipboardData.getData("text/plain"),p=s.target,C=v.findIndex(({character:m,inputRef:N})=>m===""||N.current===p),g=T(),M=Ge(g,qe(l),C).map((m,N)=>U(m,N)?m:""),S=ee(M);c==null||c(S);const{isCompleted:R,finalValue:A}=F(S);R?(i==null||i(A),b(a-1)):b(S.length)},ge=s=>{if(!v.some(({inputRef:l})=>l.current===s.relatedTarget)){const{isCompleted:l,finalValue:p}=F(t);V==null||V(p,l)}};return y.jsx(me,{display:"flex",gap:"20px",alignItems:"center",ref:n,className:"MuiOtpInput-Box ".concat(h||""),...w,children:v.map(({character:s,inputRef:l},p)=>{const{onPaste:C,onFocus:g,onKeyDown:M,className:S,onBlur:R,...A}=typeof u=="function"?u(p)||{}:u||{};return y.jsx(We,{autoFocus:r?p===0:!1,autoComplete:"one-time-code",value:s,inputRef:l,className:"MuiOtpInput-TextField MuiOtpInput-TextField-".concat(p+1," ").concat(S||""),onPaste:m=>{m.preventDefault(),pe(m),C==null||C(m)},onFocus:m=>{m.preventDefault(),m.target.select(),g==null||g(m)},onChange:de,onKeyDown:m=>{fe(m),M==null||M(m)},onBlur:m=>{R==null||R(m),ge(m)},...A},p)})})});o.string;o.string,o.string;o.string,o.string;o.string,o.string,o.string;o.string,o.string,o.string,o.array,o.bool,o.number;o.string,o.string,o.string,o.node,o.bool,o.string;function Ye({lang:e,component:n}){const t=ye(),a=ve(u=>{let i=u.runState.values[n.qualifiedCode];return{value:(i==null?void 0:i.value)||""}},_e),r=Ce(),c=u=>{r(Ve({componentCode:n.qualifiedCode,value:u.target.value}))};return y.jsx(ce,{sx:{width:"50%"},name:n.qualifiedCode,value:a.value,onChange:c,children:n.answers.map(u=>{var i;return y.jsx("option",{value:u.code,children:y.jsx(Fe,{elementCode:u.code,fontFamily:t.textStyles.text.font,color:t.textStyles.text.color,fontSize:t.textStyles.text.size,name:"label",lang:e,content:(i=u.content)==null?void 0:i.label})},u.code)})})}export{Ye as default};
