!function(){function e(e,t,r,a,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(a,n)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function r(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?t(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var a,n,o,i,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(a=o.call(r)).done)&&(s.push(a.value),s.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw n}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}System.register(["./index-legacy-z8WAiyjY.js","./use-service-legacy-DoYgXERf.js","./Image-legacy-DKJdMQpU.js","./DateUtils-legacy-BTmsWpOC.js","./Web-legacy-Dz-SFdTk.js","./dayjs.min-legacy-DvWfQd8S.js","./Delete-legacy-MzreWGjP.js","./common-legacy-B-WyRKJ2.js","./TextField-legacy-D6Q451tj.js","./Check-legacy-D-Snpfy_.js","./Card-legacy-CChnSgv3.js","./Close-legacy-ib1k4FqX.js","./Divider-legacy-DSbk0vHb.js","./yup-legacy-Bqdsra_v.js","./survey-legacy-BBPrODqM.js","./TablePagination-legacy-D3JX-1xa.js","./Checkbox-legacy-BaYVgtdy.js","./SwitchBase-legacy-B0lowptr.js","./Tabs-legacy-NAzkEbva.js","./radioClasses-legacy-BlR7uqLF.js","./tableRowClasses-legacy-DaFKeYPP.js","./FormControlLabel-legacy-nx1jJyxs.js","./TableCell-legacy-BCalByND.js","./Toolbar-legacy-Dx7zgcKI.js"],(function(t,a){"use strict";var o,i,s,l,c,d,u,p,m,h,g,_,v,f,x,y,b,j,k,C,w,S,I,z,O,N,T,D,$,P,E,A,B,M,R,W,F,U,H,V,G,L,Y,Q,Z,q,K,X,J,ee,te,re,ae,ne,oe,ie,se,le,ce,de,ue,pe,me,he,ge,_e,ve,fe,xe,ye;return{setters:[e=>{o=e.h,i=e.r,s=e.b,l=e._,c=e.d,d=e.j,u=e.q,p=e.B,m=e.s,h=e.y,g=e.A},e=>{_=e.f,v=e.j,f=e.x,x=e.c,y=e.e,b=e.K,j=e.I,k=e.T,C=e.bc,w=e.M,S=e.R,I=e.U,z=e.aL,O=e.Z,N=e.aN,T=e.bd,D=e.V,$=e.aK,P=e.aD,E=e.aX,A=e.J},e=>{B=e.u,M=e.d,R=e.a,W=e.D},e=>{F=e.s,U=e.l},e=>{H=e.b,V=e.g,G=e.C,L=e.E,Y=e.S,Q=e.a,Z=e.A,q=e.i,K=e.d,X=e.c,J=e.e,ee=e.u,te=e.F,re=e.R,ae=e.f,ne=e.h,oe=e.j},e=>{ie=e.d},e=>{se=e.d},e=>{le=e.b},e=>{ce=e.T},e=>{de=e.C},e=>{ue=e.C},e=>{pe=e.C,me=e.a},e=>{he=e.D},e=>{ge=e.c,_e=e.a,ve=e.o,fe=e.L},e=>{xe=e.S},e=>{ye=e.T},null,null,null,null,null,null,null,null],execute:function(){var a=document.createElement("style");a.textContent="._mainContainer_1kl2v_1{margin:auto;min-width:300px;height:calc(100vh - 64px);overflow:auto}._newSurveysButton_1kl2v_8{margin-bottom:48px;justify-content:flex-start}._content_1kl2v_13{display:flex;flex-direction:column;gap:.5rem;margin-top:30px}._loadingWrapper_1kl2v_20{width:100%;height:100%;text-align:center;padding-top:50px}._allButton_1kl2v_27{margin-top:2rem!important;background-color:#16205b!important;color:#fff!important;border-radius:50px!important;font-size:1.5rem!important;padding:.25rem 6rem!important;text-transform:none!important}@media only screen and (max-width: 1024px){._content_1kl2v_13{padding:0 1rem}}._surveyCardsContainer_1kl2v_43{margin-top:24px;padding:16px;border:2px dashed #ccc;border-radius:8px;background-color:#f9f9f9}._noSurveys_1kl2v_51{text-align:center}._surveyHeader_k7hfg_1{padding:5px;color:#fff;text-transform:capitalize}._contentCard_k7hfg_7{padding:5px}._actionBtn_k7hfg_11{margin-top:30px;display:flex;justify-content:space-between}._card_k7hfg_17{border-radius:5px!important;box-shadow:none!important}._cardContent_k7hfg_22{display:flex;align-items:center;gap:2rem}._imageContainer_k7hfg_28{padding:1rem;background-color:#f7f8fc;display:flex;justify-content:center}._surveyContent_k7hfg_35{display:flex;align-items:center;gap:7rem;flex:1;width:100%}._surveyTitle_k7hfg_43{width:13rem;color:#181735}._surveyStatus_k7hfg_48{display:flex;align-items:center;gap:.5rem;width:5rem}._badge_k7hfg_55{height:.5rem;width:.5rem;border-radius:99999px}._textTransform_k7hfg_61{text-transform:capitalize}._surveyResponse_k7hfg_65{display:flex;align-items:center;width:9rem;gap:.5rem}._surveyActions_k7hfg_72{display:flex;flex-direction:row!important;justify-content:flex-start;gap:.5rem;margin-right:1rem;flex:auto;width:15rem}._iconButton_k7hfg_82{border:2px solid #d7d7d7!important;border-radius:14px!important;padding:.3rem 1rem!important;height:fit-content;width:6rem}@media only screen and (max-width: 1024px){._cardContent_k7hfg_22{flex-direction:column;padding:0rem 1rem 1rem}._surveyContent_k7hfg_35{flex-direction:column;gap:1rem;align-items:flex-start}._imageContainer_k7hfg_28,._surveyActions_k7hfg_72{width:100%}}@media only screen and (min-width: 1024px) and (max-width: 1440px){._surveyContent_k7hfg_35{gap:2rem}._surveyResponse_k7hfg_65{width:7rem}}._logo_k7hfg_126{display:flex;justify-content:center;align-items:center}._logo_k7hfg_126 img{margin:auto;display:block;object-fit:contain}._logoImageWrapper_k7hfg_139{position:relative}._imageOverlay_k7hfg_143{position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);opacity:1;transition:opacity .3s ease}._cameraIconWrapper_k7hfg_155{position:absolute;top:8px;right:8px;opacity:0;transition:opacity .3s ease;z-index:1}._logoImageWrapper_k7hfg_139:hover ._cameraIconWrapper_k7hfg_155{opacity:1}._cameraIcon_k7hfg_155{color:#fff;pointer-events:none}._logoImageWrapper_k7hfg_139{position:relative;display:inline-block;flex:1}._relativeContainer_k7hfg_182{position:relative;background-color:rgba(0,0,0,.4)}._absoluteOverlay_k7hfg_187{width:100%;position:absolute;z-index:99999;bottom:0;color:#fff}._container_k7hfg_200{display:flex;flex-direction:column;width:100%}._truncatedText_k7hfg_206{overflow:hidden;text-overflow:ellipsis;display:inline-block;line-height:1.5em;max-height:4.5em;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;line-clamp:3;white-space:normal;word-wrap:break-word}._exampleTruncatedText_k7hfg_220{overflow:hidden;text-overflow:ellipsis;display:inline-block;line-height:1.5em;max-height:15em;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:10;line-clamp:10;white-space:normal;word-wrap:break-word}._titleContainer_k7hfg_235{display:flex;align-items:center;width:100%;justify-content:space-between;position:relative}._surveyLink_k7hfg_243{flex-grow:1;color:inherit}._nameIcon_k7hfg_248{position:absolute!important;right:3px;opacity:0}._titleContainer_k7hfg_235:hover ._nameIcon_k7hfg_248{opacity:1}._descriptionContainer_k7hfg_259{display:flex;align-items:center;width:100%;justify-content:space-between;position:relative}._truncatedText_k7hfg_206{flex-grow:1;color:inherit}._descriptionIcon_k7hfg_272{opacity:0;transition:opacity .2s ease-in-out}._descriptionContainer_k7hfg_259:hover ._descriptionIcon_k7hfg_272{opacity:1}._photoIcon_k7hfg_281{position:absolute;top:5px;right:5px;opacity:0;cursor:pointer}._logoImageWrapper_k7hfg_139:hover ._photoIcon_k7hfg_281{opacity:1}._exampleSurveysContainer_apkeh_1{background-color:#f7f7f9;padding:16px;margin-bottom:48px;border-radius:8px}._createUserCard_zrfc2_1._createUserCard_zrfc2_1{padding:2rem;border-radius:20px;box-shadow:rgba(0,0,0,.1) 0 4px 6px -1px,rgba(0,0,0,.06) 0 2px 4px -1px;margin-bottom:50px}._formGroup_zrfc2_9._formGroup_zrfc2_9{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:2rem}._rightContainer_zrfc2_16._rightContainer_zrfc2_16{display:flex;flex-direction:row;gap:2.5rem;flex:auto;justify-content:flex-end}._createButton_zrfc2_24._createButton_zrfc2_24{text-transform:none;color:#fff;padding:.75rem 7rem;background-color:#04bdf3;border-radius:20px;height:fit-content;transition:background-color .3s ease,color .3s ease,border .3s ease}._createButton_zrfc2_24._createButton_zrfc2_24:hover{border:1px solid #04bdf3;color:#04bdf3;background-color:#fff}._surveyNameInput_zrfc2_39{padding-left:14px}@media only screen and (max-width: 768px){._createUserCard_zrfc2_1._createUserCard_zrfc2_1{padding:1rem}._formGroup_zrfc2_9._formGroup_zrfc2_9{flex-direction:column}._rightContainer_zrfc2_16._rightContainer_zrfc2_16{width:100%;flex-direction:column;gap:2rem}._selectInput_zrfc2_55{width:100%!important}._surveyNameInput_zrfc2_39._surveyNameInput_zrfc2_39{width:100%}}._errorText_zrfc2_63{color:#eb5757!important;padding-left:14px}\n/*$vite$:1*/",document.head.appendChild(a),t("default",(function(){var e,t;const a=S("survey"),o=n(i.useState(null),2),s=o[0],l=o[1],c=n(i.useState(!0),2),u=c[0],m=c[1],h=n(i.useState(1),2),_=h[0],v=h[1],f=n(i.useState(5),2),x=f[0],y=f[1],b=n(i.useState("all"),2),C=b[0],T=b[1],B=n(i.useState("last_modified_desc"),2),M=B[0],R=B[1],F=n(i.useState(!1),2),U=F[0],H=F[1],V=n(i.useState(),2),G=V[0],L=V[1],Y=I(),Q=w("manage").t,Z=()=>{a.getAllSurveys(_,x,C,M).then((e=>{e&&(m(!1),l(e))})).catch((e=>{m(!1)}))};i.useEffect((()=>{Z()}),[_,x,M,C]);const q=(e,t)=>{l((a=>r(r({},a),{},{surveys:a.surveys.map((a=>a.id===e?r(r({},a),{},{status:t}):a))})))},K=()=>{const e=A.getUser().roles;return e.indexOf(oe.SUPER_ADMIN)>-1||e.indexOf(oe.SURVEY_ADMIN)>-1},X=n(i.useState(""),2),J=X[0],ee=X[1],te=n(i.useState(""),2),re=te[0],ie=te[1],se=n(i.useState(null),2),le=se[0],ce=se[1],de=n(i.useState(!1),2),ue=de[0],pe=de[1],he=n(i.useState(Q("action_btn.delete")),2),ge=he[0],_e=he[1],ve=n(i.useState(!1),2),fe=ve[0],xe=ve[1],be=n(i.useState(!1),2),je=be[0],ke=be[1],Ce=n(i.useState(!1),2),ze=Ce[0],Ne=Ce[1],Te=e=>{L(e),H(!0)},De=e=>{Y(O(!0)),a.deleteSurvey(e).then((()=>{Z()})).catch((e=>{Y(O(!1))})).finally((()=>{Y(O(!1))}))},$e=e=>{Y(O(!0)),a.closeSurvey(e).then((t=>{q(e,"closed")})).catch((e=>{e.name==N.INVALID_SURVEY_DATES.name&&setSurveyDateError(Q(`processed_errors.${processed.name}`))})).finally((()=>{Y(O(!1))}))},Pe=(e,t)=>{l((a=>{const n=a.surveys.map((a=>a.id===e?r(r({},a),{},{name:t}):a));return r(r({},a),{},{surveys:n})}))},Ee=(e,t)=>{l((a=>{const n=a.surveys.map((a=>a.id===e?r(r({},a),{},{description:t}):a));return r(r({},a),{},{surveys:n})}))},Ae=(e,t)=>{l((a=>{const n=a.surveys.map((a=>a.id===e?r(r({},a),{},{image:t}):a));return r(r({},a),{},{surveys:n})}))},Be=D();return d.jsxs(p,{className:Oe.mainContainer,children:[d.jsx($,{children:d.jsxs(p,{className:Oe.content,children:[d.jsxs(z,{className:Oe.newSurveysButton,direction:"row",spacing:2,children:[K()&&!fe&&d.jsx(P,{variant:"contained",color:"primary",startIcon:d.jsx(we,{}),onClick:()=>{xe(!0)},children:Q("create_new_survey")}),K()&&!je&&d.jsx(P,{variant:"contained",color:"primary",startIcon:d.jsx(Se,{}),onClick:()=>{ke(!0)},children:Q("copy_example_surveys")}),K()&&d.jsx(P,{variant:"contained",color:"primary",startIcon:d.jsx(ae,{}),onClick:()=>{Ne(!0),H(!0)},children:Q("import_survey")})]}),fe&&d.jsx(E,{in:fe,timeout:300,children:d.jsxs("div",{style:{position:"relative"},children:[d.jsx(j,{onClick:()=>{xe(!1)},"aria-label":"close",style:r(r({position:"absolute",top:0},"ltr"===Be?{right:0}:{left:0}),{},{color:"black",zIndex:1}),children:d.jsx(me,{color:"#000"})}),d.jsx(st,{onSurveyCreated:Z})]})}),je&&d.jsx(E,{in:je,timeout:300,children:d.jsxs("div",{style:{position:"relative"},children:[d.jsx(j,{onClick:()=>{ke(!1)},"aria-label":"close",style:r(r({position:"absolute",top:0},"ltr"===Be?{right:0}:{left:0}),{},{color:"black",zIndex:1}),children:d.jsx(me,{color:"#000"})}),d.jsx(nt,{onClone:e=>Te(e)})]})}),d.jsx(rt,{filter:C,onFilterSelected:e=>{v(1),T(e.target.value)},sort:M,onSortSelected:e=>{v(1),R(e.target.value)}}),d.jsx(p,{className:Oe.surveyCardsContainer,children:u?d.jsx(g,{}):d.jsx(d.Fragment,{children:(null==s||null===(e=s.surveys)||void 0===e?void 0:e.length)>0?d.jsx(p,{sx:{mt:3,columnGap:2,display:"grid",rowGap:{xs:4,md:5},gridTemplateColumns:{xs:"1fr",sm:"repeat(auto-fit, minmax(280px, 1fr))",md:"repeat(auto-fit, minmax(330px, 350px))"}},children:null==s||null===(t=s.surveys)||void 0===t?void 0:t.map((e=>d.jsx(tt,{survey:e,onStatusChange:q,onClone:()=>Te(e),onDelete:()=>(e=>{ie("delete"),_e(Q("action_btn.delete")),ce(e),ee(Q("edit_survey.delete_survey",{survey_name:e.name})),pe(!0)})(e),onClose:()=>(e=>{ie("close"),_e(Q("action_btn.close")),ce(e),ee(Q("edit_survey.close_survey",{survey_name:e.name})),pe(!0)})(e),onUpdateTitle:Pe,onUpdateDescription:Ee,onUpdateImage:Ae},e.id)))}):d.jsxs("div",{className:Oe.noSurveys,children:[d.jsx(Ie,{sx:{fontSize:48,color:"#ccc"}}),d.jsx(k,{variant:"h6",color:"textSecondary",sx:{mt:2},children:Q("create_survey.empty_state_message")})]})})}),s&&d.jsx(ye,{rowsPerPageOptions:[5,10,20,50],component:"div",labelDisplayedRows:({from:e,to:t,count:r,page:a})=>Q("responses.label_displayed_rows",{from:e,to:t,count:r}),labelRowsPerPage:Q("responses.label_surveys_per_page"),count:null==s?void 0:s.totalCount,rowsPerPage:x,page:_-1,onPageChange:(e,t)=>{v(t+1)},onRowsPerPageChange:e=>{y(parseInt(e.target.value,10)),v(1)}})]})}),d.jsx(ne,{importSurvey:ze,open:U,onClose:e=>{H(!1),Ne(!1),e&&Z()},survey:G}),d.jsx(W,{open:ue,description:J,handleClose:()=>pe(!1),handleDelete:()=>{"delete"===re?(De(le.id),pe(!1)):"close"===re&&($e(le.id),pe(!1))},title:ge})]})}));const be=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],je=_("span",{name:"MuiBadge",slot:"Root",overridesResolver:(e,t)=>t.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),ke=_("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(e,t)=>{const r=e.ownerState;return[t.badge,t[r.variant],t[`anchorOrigin${o(r.anchorOrigin.vertical)}${o(r.anchorOrigin.horizontal)}${o(r.overlap)}`],"default"!==r.color&&t[`color${o(r.color)}`],r.invisible&&t.invisible]}})((({theme:e})=>{var t;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen}),variants:[...Object.keys((null!=(t=e.vars)?t:e).palette).filter((t=>{var r,a;return(null!=(r=e.vars)?r:e).palette[t].main&&(null!=(a=e.vars)?a:e).palette[t].contrastText})).map((t=>({props:{color:t},style:{backgroundColor:(e.vars||e).palette[t].main,color:(e.vars||e).palette[t].contrastText}}))),{props:{variant:"dot"},style:{borderRadius:4,height:8,minWidth:8,padding:0}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${H.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${H.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${H.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"rectangular"===e.overlap,style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${H.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${H.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"right"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${H.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>"top"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${H.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>"bottom"===e.anchorOrigin.vertical&&"left"===e.anchorOrigin.horizontal&&"circular"===e.overlap,style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${H.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}]}})),Ce=i.forwardRef((function(e,t){var r,a,n,i,u,p;const m=v({props:e,name:"MuiBadge"}),h=m.anchorOrigin,g=void 0===h?{vertical:"top",horizontal:"right"}:h,_=m.className,y=m.component,b=m.components,j=void 0===b?{}:b,k=m.componentsProps,C=void 0===k?{}:k,w=m.children,S=m.overlap,I=void 0===S?"rectangular":S,z=m.color,O=void 0===z?"default":z,N=m.invisible,T=void 0!==N&&N,D=m.max,$=void 0===D?99:D,P=m.badgeContent,E=m.slots,A=m.slotProps,M=m.showZero,R=void 0!==M&&M,W=m.variant,F=void 0===W?"standard":W,U=s(m,be),H=function(e){const t=e.badgeContent,r=e.invisible,a=void 0!==r&&r,n=e.max,o=void 0===n?99:n,i=e.showZero,s=void 0!==i&&i,l=B({badgeContent:t,max:o});let c=a;!1!==a||0!==t||s||(c=!0);const d=c?l:e,u=d.badgeContent,p=d.max,m=void 0===p?o:p;return{badgeContent:u,invisible:c,max:m,displayValue:u&&Number(u)>m?`${m}+`:u}}({max:$,invisible:T,badgeContent:P,showZero:R}),G=H.badgeContent,L=H.invisible,Y=H.max,Q=H.displayValue,Z=B({anchorOrigin:g,color:O,overlap:I,variant:F,badgeContent:P}),q=L||null==G&&"dot"!==F,K=q?Z:m,X=K.color,J=void 0===X?O:X,ee=K.overlap,te=void 0===ee?I:ee,re=K.anchorOrigin,ae=void 0===re?g:re,ne=K.variant,oe=void 0===ne?F:ne,ie="dot"!==oe?Q:void 0,se=l({},m,{badgeContent:G,invisible:q,max:Y,displayValue:ie,showZero:R,anchorOrigin:ae,color:J,overlap:te,variant:oe}),le=(e=>{const t=e.color,r=e.anchorOrigin,a=e.invisible,n=e.overlap,i=e.variant,s=e.classes,l=void 0===s?{}:s,c={root:["root"],badge:["badge",i,a&&"invisible",`anchorOrigin${o(r.vertical)}${o(r.horizontal)}`,`anchorOrigin${o(r.vertical)}${o(r.horizontal)}${o(n)}`,`overlap${o(n)}`,"default"!==t&&`color${o(t)}`]};return x(c,V,l)})(se),ce=null!=(r=null!=(a=null==E?void 0:E.root)?a:j.Root)?r:je,de=null!=(n=null!=(i=null==E?void 0:E.badge)?i:j.Badge)?n:ke,ue=null!=(u=null==A?void 0:A.root)?u:C.root,pe=null!=(p=null==A?void 0:A.badge)?p:C.badge,me=f({elementType:ce,externalSlotProps:ue,externalForwardedProps:U,additionalProps:{ref:t,as:y},ownerState:se,className:c(null==ue?void 0:ue.className,le.root,_)}),he=f({elementType:de,externalSlotProps:pe,ownerState:se,className:c(le.badge,null==pe?void 0:pe.className)});return d.jsxs(ce,l({},me,{children:[w,d.jsx(de,l({},he,{children:ie}))]}))})),we=y(d.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Se=y(d.jsx("path",{d:"M18 2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H9V4h9zM3 15v-2h2v2zm0-5.5h2v2H3zM10 20h2v2h-2zm-7-1.5v-2h2v2zM5 22c-1.1 0-2-.9-2-2h2zm3.5 0h-2v-2h2zm5 0v-2h2c0 1.1-.9 2-2 2M5 6v2H3c0-1.1.9-2 2-2"}),"CopyAll"),Ie=y(d.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description"),ze=y(d.jsx("path",{d:"M6 6h12v12H6z"}),"Stop"),Oe={mainContainer:"_mainContainer_1kl2v_1",newSurveysButton:"_newSurveysButton_1kl2v_8",content:"_content_1kl2v_13",loadingWrapper:"_loadingWrapper_1kl2v_20",allButton:"_allButton_1kl2v_27",surveyCardsContainer:"_surveyCardsContainer_1kl2v_43",noSurveys:"_noSurveys_1kl2v_51"};var Ne={},Te=u;Object.defineProperty(Ne,"__esModule",{value:!0});var De=Ne.default=void 0,$e=Te(b()),Pe=d;De=Ne.default=(0,$e.default)((0,Pe.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Article");const Ee={surveyHeader:"_surveyHeader_k7hfg_1",contentCard:"_contentCard_k7hfg_7",actionBtn:"_actionBtn_k7hfg_11",card:"_card_k7hfg_17",cardContent:"_cardContent_k7hfg_22",imageContainer:"_imageContainer_k7hfg_28",surveyContent:"_surveyContent_k7hfg_35",surveyTitle:"_surveyTitle_k7hfg_43",surveyStatus:"_surveyStatus_k7hfg_48",badge:"_badge_k7hfg_55",textTransform:"_textTransform_k7hfg_61",surveyResponse:"_surveyResponse_k7hfg_65",surveyActions:"_surveyActions_k7hfg_72",iconButton:"_iconButton_k7hfg_82",logo:"_logo_k7hfg_126",logoImageWrapper:"_logoImageWrapper_k7hfg_139",imageOverlay:"_imageOverlay_k7hfg_143",cameraIconWrapper:"_cameraIconWrapper_k7hfg_155",cameraIcon:"_cameraIcon_k7hfg_155",relativeContainer:"_relativeContainer_k7hfg_182",absoluteOverlay:"_absoluteOverlay_k7hfg_187",container:"_container_k7hfg_200",truncatedText:"_truncatedText_k7hfg_206",exampleTruncatedText:"_exampleTruncatedText_k7hfg_220",titleContainer:"_titleContainer_k7hfg_235",surveyLink:"_surveyLink_k7hfg_243",nameIcon:"_nameIcon_k7hfg_248",descriptionContainer:"_descriptionContainer_k7hfg_259",descriptionIcon:"_descriptionIcon_k7hfg_272",photoIcon:"_photoIcon_k7hfg_281"};function Ae(e,t){return e?ie(e).format("DD MMM YYYY"):""}var Be={},Me=u;Object.defineProperty(Be,"__esModule",{value:!0});var Re=Be.default=void 0,We=Me(b()),Fe=d;Re=Be.default=(0,We.default)((0,Fe.jsx)("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"}),"FormatQuote");var Ue={},He=u;Object.defineProperty(Ue,"__esModule",{value:!0});var Ve=Ue.default=void 0,Ge=He(b()),Le=d;Ve=Ue.default=(0,Ge.default)((0,Le.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");const Ye=({survey:e,onSave:t,isEditable:r=!0})=>{const a=n(i.useState(!1),2),o=a[0],s=a[1],l=n(i.useState(e.name),2),c=l[0],u=l[1],m=()=>{""===c.trim()?u(e.name):c!==e.name&&t(c,(()=>u(e.name))),s(!1)};return d.jsx(p,{className:Ee.titleContainer,children:o?d.jsxs(d.Fragment,{children:[d.jsx(ce,{sx:{px:3,flexGrow:1},value:c,onChange:e=>{const t=e.target.value;t.length<=50&&u(t)},onKeyDown:e=>{"Enter"===e.key&&m()},autoFocus:!0,variant:"standard",fullWidth:!0,InputProps:{style:{color:"white"}}}),d.jsx(j,{className:Ee.saveIcon,onClick:m,sx:{ml:1},children:d.jsx(de,{sx:{color:"white"}})})]}):d.jsxs(d.Fragment,{children:[c.length>20?d.jsx(G,{title:c,showIcon:!1,children:d.jsx(k,{variant:"h4",sx:{px:3},noWrap:!0,children:C(c,18)})}):d.jsx(k,{variant:"h4",sx:{px:3},noWrap:!0,children:C(c,18)}),r&&d.jsx(j,{className:Ee.nameIcon,onClick:e=>{e.stopPropagation(),s(!0)},sx:{ml:1},children:d.jsx(L,{sx:{color:"white"}})})]})})},Qe=({survey:e,onSave:t,isEditable:r=!0,isExample:a})=>{const o=n(i.useState(!1),2),s=o[0],l=o[1],c=n(i.useState(e.description),2),u=c[0],m=c[1],h=a?450:125,g=()=>{u!==e.description&&t(u,(()=>m(e.description))),l(!1)};return d.jsx(p,{className:Ee.descriptionContainer,children:s?d.jsxs(d.Fragment,{children:[d.jsx(ce,{sx:{px:3},value:u,onChange:e=>{m(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&g()},autoFocus:!0,variant:"standard",fullWidth:!0,multiline:!0,rows:3}),d.jsx(j,{className:`${Ee.saveIcon}`,onClick:g,sx:{ml:1},children:d.jsx(de,{sx:{color:"gray"}})})]}):d.jsxs(d.Fragment,{children:[(null==u?void 0:u.length)>h?d.jsx(G,{title:u,showIcon:!1,children:d.jsx(k,{variant:"caption",sx:{px:3,color:u?"inherit":"gray",flexGrow:1},className:`${a?Ee.exampleTruncatedText:Ee.truncatedText}`,children:C(u,h)||"Click to add a description..."})}):d.jsx(k,{variant:"caption",sx:{px:3,color:u?"inherit":"gray",flexGrow:1},className:`${a?Ee.exampleTruncatedText:Ee.truncatedText}`,children:C(u,h)||"Click to add a description..."}),r&&d.jsx(j,{className:`${Ee.descriptionIcon}`,onClick:e=>{e.stopPropagation(),l(!0)},sx:{ml:1},children:d.jsx(L,{sx:{color:"gray"}})})]})})},Ze="draft",qe="closed",Ke="active",Xe="expired",Je="scheduled",et=e=>{switch(e){case Ze:return"#e9db3e";case qe:return"#d32f2f";case Xe:return"#9d4435";case Je:return"#607d8b";case Ke:return"#669834";default:return}},tt=({survey:e,example:t=!1,onClone:a,onDelete:o,onClose:s,onUpdateTitle:l,onUpdateDescription:c,onUpdateImage:u})=>{const g=w("manage").t,_=(e=>{switch(e.status){case"draft":default:return Ze;case"closed":return qe;case"active":return e.endDate&&F(e.endDate)<Date.now()?Xe:e.startDate&&F(e.startDate)>Date.now()?Je:Ke}})(e),v=S("survey"),f=S("design"),x=n(i.useState(!1),2),y=x[0],b=x[1],C=n(i.useState(null),2),T=C[0],D=C[1],$=m(),P=I(),E=h(),A=()=>{b(!1)};return d.jsxs(d.Fragment,{children:[d.jsx(Y,{}),d.jsx(Q,{open:y,autoHideDuration:6e3,onClose:A,children:d.jsx(Z,{onClose:A,severity:"error",children:T})}),d.jsxs(ue,{sx:{"&:hover":{boxShadow:e=>e.customShadows.z24}},children:[d.jsxs(z,{sx:{pb:0},children:[d.jsxs(z,{spacing:.5,sx:{mb:1},children:[d.jsxs(p,{className:Ee.relativeContainer,children:[d.jsx(p,{className:Ee.absoluteOverlay,children:d.jsx(Ye,{survey:e,onSave:(t,a)=>{P(O(!0)),v.putSurvey(r(r({},e),{},{name:t}),e.id).then((()=>{l(e.id,t)})).catch((e=>{e.name==N.DUPLICATE_SURVEY_NAME.name&&(D(g(`processed_errors.${e.name}`)),b(!0),a())})).finally((()=>{P(O(!1))}))},isEditable:q()&&!t})}),d.jsxs(p,{className:Ee.logo,children:[d.jsxs(p,{className:`${Ee.logoImageWrapper}`,children:[d.jsx(pe,{component:"img",image:e.image?le(e.image,e.id,t):"/qlarr.png",height:"150"}),d.jsx(p,{className:Ee.imageOverlay}),q()&&!e.example&&d.jsx(p,{className:Ee.photoIcon,onClick:t=>{t.stopPropagation(),document.getElementById(`imageInput-${e.id}`).click()},children:d.jsx(M,{className:Ee.cameraIcon})})]}),d.jsx("input",{id:`imageInput-${e.id}`,type:"file",accept:"image/*",style:{display:"none"},onChange:t=>{const r=t.target.files[0],a=new FileReader;a.onload=()=>{f.uploadResource(r,e.id).then((t=>{v.putSurvey({image:t.name},e.id).then((r=>{u(e.id,t.name)})).catch((e=>{D(g(`processed_errors.${e.name}`)),b(!0)})).finally((()=>{P(O(!1))}))})).catch((e=>{D(g(`processed_errors.${e.name}`)),b(!0)})).finally((()=>{P(O(!1))}))},a.readAsDataURL(r)}})]})]}),d.jsx(Qe,{survey:e,isExample:t,onSave:t=>{P(O(!0)),v.putSurvey(r(r({},e),{},{description:t}),e.id).then((()=>{c(e.id,t)})).catch((e=>{})).finally((()=>{P(O(!1))}))},isEditable:q()&&!t}),!t&&d.jsxs(d.Fragment,{children:[d.jsxs(z,{direction:"row",alignItems:"center",spacing:.5,sx:{px:3,typography:"body2",color:"text.secondary"},children:[d.jsx("span",{style:{backgroundColor:et(_)},className:Ee.badge})," ",d.jsx(k,{variant:"subtitle2",className:Ee.textTransform,children:g(`status.${_}`)})]}),d.jsxs(p,{sx:{px:3,display:"flex",gap:2,my:.5},children:[!t&&"closed"!==e.status&&!1===e.latestVersion.published&&d.jsx(G,{title:"Has unpublished changes",showIcon:!1,children:d.jsx(Ve,{sx:{color:"text.secondary"}})}),d.jsx(G,{showIcon:!1,title:`Complete Responses: ${e.completeResponseCount}`,children:d.jsx(Ce,{badgeContent:e.completeResponseCount,color:"primary",anchorOrigin:{vertical:"top",horizontal:"right"},children:d.jsx(K,{sx:{color:"text.secondary"}})})}),d.jsx(G,{showIcon:!1,title:e.surveyQuota>0?`Quota: ${e.surveyQuota}`:"No Quota",children:d.jsx(Ce,{badgeContent:e.surveyQuota>0?e.surveyQuota:0,color:"primary",anchorOrigin:{vertical:"top",horizontal:"right"},children:d.jsx(Re,{sx:{color:"text.secondary"}})})})]})]})]}),d.jsxs(k,{variant:"caption",sx:{px:3,color:"text.disabled"},children:[d.jsx("strong",{children:g("edit_survey.metadata.created")}),":"," ",Ae(e.creationDate)]}),d.jsxs(k,{variant:"caption",sx:{px:3,color:"text.disabled"},children:[d.jsx("strong",{children:g("edit_survey.metadata.last_modified")}),":"," ",Ae(e.lastModified)]}),!t&&e.startDate&&d.jsxs(k,{variant:"caption",sx:{px:3,color:"text.disabled"},children:[d.jsx("strong",{children:g("edit_survey.metadata.start_date")}),":"," ",Ae(e.startDate)]}),!t&&e.endDate&&d.jsxs(k,{variant:"caption",sx:{px:3,color:"text.disabled"},children:[d.jsx("strong",{children:g("edit_survey.metadata.end_date")}),":"," ",Ae(e.endDate)]})]}),d.jsx(he,{sx:{borderStyle:"dashed",my:1}}),d.jsxs(z,{sx:{p:3,pt:0,typography:"body2",color:"text.secondary",textTransform:"capitalize"},className:Ee.surveyActions,children:[d.jsx(j,{className:Ee.iconButton,sx:{backgroundColor:E.palette.primary.main,"&:hover":{backgroundColor:E.palette.primary.main}},"aria-label":"redirect",size:"large",onClick:t=>{t.stopPropagation();const r=e.example?`/guest/preview/${e.id}`:`/design-survey/${e.id}`;$(r)},children:t?d.jsx(R,{sx:{color:"#fff"}}):d.jsx(De,{sx:{color:"#fff"}})}),q()&&!t&&"active"===e.status&&d.jsx(G,{showIcon:!1,title:g("edit_survey.close_title"),children:d.jsx(j,{className:Ee.iconButton,"aria-label":"stop",size:"large",onClick:()=>s(e.id),children:d.jsx(ze,{color:"primary"})})}),q()&&d.jsx(G,{showIcon:!1,title:g("edit_survey.clone_survey"),children:d.jsx(j,{className:Ee.iconButton,"aria-label":"clone",size:"large",onClick:a,children:d.jsx(X,{color:"primary"})})}),!t&&e.status!==Ke&&d.jsx(G,{showIcon:!1,title:g("action_btn.delete"),children:d.jsx(j,{className:Ee.iconButton,"aria-label":"delete",size:"large",onClick:()=>o(e.id),children:d.jsx(se,{color:"primary"})})})]})]})]})},rt=({sort:e,filter:t,onFilterSelected:r,onSortSelected:a})=>{const n=[{value:"all",label:"status.all"},{value:Ke,label:`status.${Ke}`},{value:Je,label:`status.${Je}`},{value:Ze,label:`status.${Ze}`},{value:Xe,label:`status.${Xe}`},{value:qe,label:`status.${qe}`}],o=w("manage").t;return d.jsxs(p,{rowGap:2.5,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:[d.jsx(k,{variant:"h5",flex:"1",textTransform:"uppercase",fontWeight:"600",children:o("my_surveys")}),d.jsxs(z,{width:"100%",spacing:2.5,direction:{xs:"column",md:"row"},alignItems:"center",children:[d.jsx(J,{onChange:a,native:!0,value:e,name:"Status",label:o("label.sort_by"),children:[{value:"responses_desc",label:"survey_sort_options.responses_desc"},{value:"last_modified_desc",label:"survey_sort_options.last_modified_desc"}].map((e=>d.jsx("option",{value:e.value,children:o(e.label)},e.value)))}),d.jsx(J,{onChange:r,native:!0,value:t,name:"Status",label:o("edit_survey.status"),children:n.map((e=>d.jsx("option",{value:e.value,children:o(e.label)},e.value)))})]})]})},at="_exampleSurveysContainer_apkeh_1",nt=({onClone:e})=>{const t=w("manage").t,a=n(i.useState(!1),2),o=a[0],s=a[1],l=n(i.useState([]),2),c=l[0],u=l[1],m=S("survey");return i.useEffect((()=>{s(!0),m.getGuestsSurveys().then((e=>{if(s(!1),e){const t=e.map((e=>r(r({},e),{},{example:!0})));u(t)}})).catch((e=>{s(!1),T(e)}))}),[]),d.jsxs(d.Fragment,{children:[d.jsx(k,{variant:"h5",marginBottom:2,fontWeight:600,textTransform:"uppercase",children:t("example_surveys")}),o?d.jsx(g,{}):d.jsx(p,{className:at,sx:{mt:3,columnGap:4,display:"grid",rowGap:{xs:4,md:5},gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"}},children:null==c?void 0:c.map((t=>d.jsx(tt,{survey:t,onClone:()=>e(t),example:!0},t.id)))})]})},ot={createUserCard:"_createUserCard_zrfc2_1",formGroup:"_formGroup_zrfc2_9",rightContainer:"_rightContainer_zrfc2_16",createButton:"_createButton_zrfc2_24",surveyNameInput:"_surveyNameInput_zrfc2_39",selectInput:"_selectInput_zrfc2_55",errorText:"_errorText_zrfc2_63"},it=[{value:xe.WEB,label:`mode.${xe.WEB}`},{value:xe.OFFLINE,label:`mode.${xe.OFFLINE}`},{value:xe.MIXED,label:`mode.${xe.MIXED}`}];function st({onSurveyCreated:t}){const r=S("survey"),a=w("manage").t,n=I(),o={surveyName:"",surveyMode:xe.MIXED,surveyActiveFrom:"",surveyActiveTo:""},i=ge().shape({surveyName:_e().required(a("survey_required")).max(50,a("survey_too_long"))}),s=ee({resolver:ve(i),defaultValues:o}),l=s.setError,c=s.reset,u=s.handleSubmit,m=s.formState.isSubmitting,h=u(function(){var o,i=(o=function*(e){n(O(!0));const o={name:e.surveyName,usage:e.surveyMode};e.surveyActiveFrom&&(o.startDate=U(surveyActiveFrom)),e.surveyActiveTo&&(o.endDate=U(surveyActiveTo)),r.createSurvey(o).then((()=>{t&&(t(),c())})).catch((e=>{e.name==N.DUPLICATE_SURVEY_NAME.name?l("surveyName",{type:"manual",message:a(`processed_errors.${e.name}`)}):e.name==N.INVALID_SURVEY_DATES.name&&l("surveyActiveFrom",{type:"manual",message:a(`processed_errors.${e.name}`)})})).finally((()=>{n(O(!1))}))},function(){var t=this,r=arguments;return new Promise((function(a,n){var i=o.apply(t,r);function s(t){e(i,a,n,s,l,"next",t)}function l(t){e(i,a,n,s,l,"throw",t)}s(void 0)}))});return function(e){return i.apply(this,arguments)}}());return d.jsx(ue,{className:ot.createUserCard,children:d.jsx(te,{methods:s,onSubmit:h,children:d.jsxs(p,{rowGap:2.5,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(3, 1fr)"},children:[d.jsx(re,{name:"surveyName",label:a("label.survey_name")}),d.jsx(J,{name:"surveyMode",label:a("label.survey_mode"),children:it.map((e=>d.jsx("option",{value:e.value,children:a(e.label)},e.value)))}),d.jsx(fe,{fullWidth:!0,size:"large",color:"primary",type:"submit",variant:"contained",loading:m,children:a("action_btn.create")})]})})})}}}}))}();
