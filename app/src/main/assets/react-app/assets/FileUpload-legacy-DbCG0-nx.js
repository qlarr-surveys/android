!function(){function e(e,i){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var t,l,o,a,r=[],d=!0,s=!1;try{if(o=(i=i.call(e)).next,0===n){if(Object(i)!==i)return;d=!1}else for(;!(d=(t=o.call(i)).done)&&(r.push(t.value),r.length!==n);d=!0);}catch(e){s=!0,l=e}finally{try{if(!d&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(s)throw l}}return r}}(e,i)||function(e,i){if(e){if("string"==typeof e)return n(e,i);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,i):void 0}}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,t=Array(n);i<n;i++)t[i]=e[i];return t}System.register(["./index-legacy-Bv2eXh2I.js","./use-service-legacy-BhwPSb5M.js","./index-legacy-DfNw2gDF.js","./Link-legacy-CoFbqxzt.js","./isTouchDevice-legacy-CASrAKNe.js","./common-legacy-CbMEUs9u.js","./Close-legacy-C5_q_DGr.js","./Card-legacy-PAZ1B7n8.js","./Toolbar-legacy-CEJ92uAj.js"],(function(n,i){"use strict";var t,l,o,a,r,d,s,c,u,f,v,m,x,j,p,y,h,b;return{setters:[e=>{t=e.r,l=e.j,o=e.R,a=e.z},e=>{r=e.f,d=e.R,s=e.w,c=e.M,u=e.be,f=e.H,v=e.U,m=e.aQ,x=e.b3,j=e.b1,p=e.b5,y=e.aV},e=>{h=e.a},e=>{b=e.L},null,null,null,null,null],execute:function(){n("default",(function(n){var r,g,_,w,C;const S=d("run"),z=s(),A=c("run").t;let F=u(null===(r=n.component.validation)||void 0===r||null===(r=r.validation_file_types)||void 0===r?void 0:r.fileTypes);const k=(null===(g=n.component.validation)||void 0===g||null===(g=g.validation_max_file_size)||void 0===g?void 0:g.isActive)&&(null===(_=n.component.validation)||void 0===_||null===(_=_.validation_max_file_size)||void 0===_?void 0:_.max_size)||-1,q=f((e=>{let i=e.runState.values[n.component.qualifiedCode];return null==i?void 0:i.value})),M=f((e=>e.runState.preview)),T=v(),I=e(t.useState(),2),K=I[0],O=I[1],U=e(t.useState(!1),2),D=U[0],L=U[1],R=!D&&K&&F.length>0&&!F.includes(K.type),$=!D&&K&&k>0&&K.size/1024>k,E=()=>{O(void 0)};let H=K&&!R&&!$;return l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"contained-button-file",children:[l.jsx(i,{id:"contained-button-file",type:"file",accept:F?F.join(","):void 0,onChange:e=>{T(j(n.component.qualifiedCode)),O(e.target.files[0])}}),l.jsx(m,{disabled:D,onClick:e=>{if(window.Android){const i=n.component.qualifiedCode;e.preventDefault(),window.Android.selectFile(i,(null==F?void 0:F.join(","))||"",k||-1),window["onFileSelected"+i]=(e,i,t)=>{T(j(n.component.qualifiedCode)),O({name:e,size:i,type:t})}}},variant:"contained",component:"span",children:A("choose_file")})]}),K?l.jsxs(o.Fragment,{children:[l.jsxs("span",{children:["Â ",K.name," - ",Math.round(K.size/1024),"K"]}),H?l.jsx(m,{disabled:D,variant:"text",onClick:()=>{L(!0),p(S,n.component.qualifiedCode,M,K).then((e=>{L(!1),E(),T(y({componentCode:n.component.qualifiedCode,value:e}))})).catch((e=>{L(!1),console.error(e)}))},children:A("upload")}):"",l.jsx(m,{disabled:D,sx:{fontFamily:z.textStyles.text.font,fontSize:z.textStyles.text.size},variant:"text",onClick:E,children:A("cancel")})]}):"",$&&l.jsxs(o.Fragment,{children:[l.jsx("br",{}),l.jsx(h,{name:"validation_max_file_size",validation:null===(w=n.component.validation)||void 0===w?void 0:w.validation_max_file_size})]}),R&&l.jsxs(o.Fragment,{children:[l.jsx("br",{}),l.jsx(h,{name:"validation_file_types",validation:null===(C=n.component.validation)||void 0===C?void 0:C.validation_file_types})]}),D?l.jsxs("div",{style:{textAlign:"center"},children:[l.jsx(a,{}),l.jsx("br",{}),l.jsx("span",{children:A("uploading")})]}):q&&q.stored_filename?l.jsxs(o.Fragment,{children:[l.jsx("br",{}),l.jsx("br",{}),window.Android?l.jsxs(b,{target:"_blank",onClick:()=>{window.Android.previewFileUpload(q.stored_filename,q.filename)},children:[q.filename," - ",Math.round(q.size/1024),"K"]}):l.jsxs(b,{target:"_blank",href:x(q.stored_filename),children:[q.filename," - ",Math.round(q.size/1024),"K"]})]}):""]})}));const i=r("input")({display:"none"})}}}))}();
