{"version":3,"file":"ImageMcq-D_692Pnp.js","sources":["../../src/components/Questions/ImageMcq/ImageMcq.jsx"],"sourcesContent":["import React from \"react\";\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\nimport { valueChange } from \"~/state/runState\";\nimport { useTheme } from \"@emotion/react\";\nimport { Box, Checkbox } from \"@mui/material\";\nimport { buildResourceUrl } from \"~/networking/common\";\nimport styles from \"./ImageMcq.module.css\";\nimport { setDirty } from \"~/state/templateState\";\nimport { rtlLanguage } from \"~/utils/common\";\n\nfunction ImageMcq(props) {\n  const lang = useSelector((state) => {\n    return state.runState.values[\"Survey\"].lang;\n  });\n\n  const parentValue = useSelector((state) => {\n    return state.runState.values[props.component.qualifiedCode].value || [];\n  }, shallowEqual);\n  const isRtl = rtlLanguage.includes(lang);\n\n  const runValues = useSelector((s) => s.runState.values);\n\n  return (\n    <Box\n      sx={{\n        gap: `${props.component.spacing}px`,\n        justifyContent: isRtl ? \"flex-end\" : \"flex-start\",\n      }}\n      className={styles.imageFlexContainer}\n    >\n      {props.component.answers.map((option) => {\n        const relevance = runValues[option.qualifiedCode]?.relevance ?? true;\n        if (!relevance) return null;\n\n        return (\n          <ImageMcqItem\n            option={option}\n            parentValue={parentValue}\n            aspectRatio={props.component.imageAspectRatio}\n            columns={props.component.columns || 3}\n            spacing={props.component.spacing || 8}\n            hideText={props.component.hideText}\n            parentCode={props.component.qualifiedCode}\n            key={option.qualifiedCode}\n          />\n        );\n      })}\n    </Box>\n  );\n}\n\nfunction ImageMcqItem(props) {\n  const theme = useTheme();\n  const state = useSelector((state) => {\n    let answerState = state.runState.values[props.option.qualifiedCode];\n    return {\n      showAnswer:\n        typeof answerState?.relevance == \"undefined\" || answerState.relevance,\n    };\n  }, shallowEqual);\n\n  const dispatch = useDispatch();\n  const handleChange = (componentCode, value) => {\n    let parentValue = [...props.parentValue];\n    if (value) {\n      parentValue.push(props.option.code);\n    } else {\n      parentValue = parentValue.filter((el) => el !== props.option.code);\n    }\n    dispatch(\n      valueChange({\n        componentCode: props.parentCode,\n        value: parentValue,\n      })\n    );\n    dispatch(setDirty(componentCode));\n    dispatch(setDirty(props.parentCode));\n  };\n  const backgroundImage = props.option.resources?.image\n    ? `url('${buildResourceUrl(props.option.resources?.image)}')`\n    : `url('/placeholder-image.jpg')`;\n\n  return (\n    <Box\n      key={props.option.code}\n      sx={{\n        flex: `0 1 calc(${100 / props.columns}% - ${props.spacing}px)`,\n        cursor: \"pointer\",\n      }}\n    >\n      <Box\n        className={styles.imageContainer}\n        onClick={() => handleChange(props.option.qualifiedCode, !state.checked)}\n        style={{\n          paddingTop: 100 / props.aspectRatio + \"%\",\n          backgroundImage: backgroundImage,\n          borderRadius: \"4px\",\n          border: state.checked\n            ? `4px solid ${theme.palette.primary.main}`\n            : \"4px solid transparent\",\n        }}\n      >\n        <div className={styles.selection}>\n          <Checkbox\n            onChange={(event) =>\n              handleChange(props.option.qualifiedCode, !state.checked)\n            }\n            size=\"large\"\n            sx={{\n              m: \"5px\",\n            }}\n            className={styles.radioCheck}\n            checked={\n              props.parentValue.indexOf(props.option.code) > -1 \n            }\n          />\n        </div>\n      </Box>\n      {!props.hideText && (\n        <Box\n          sx={{\n            fontFamily: theme.textStyles.text.font,\n            color: theme.textStyles.text.color,\n            fontSize: theme.textStyles.text.size,\n          }}\n        >\n          {props.option.content?.label}\n        </Box>\n      )}\n    </Box>\n  );\n}\n\nexport default ImageMcq;\n"],"names":["jsx","state","jsxs"],"mappings":"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"}