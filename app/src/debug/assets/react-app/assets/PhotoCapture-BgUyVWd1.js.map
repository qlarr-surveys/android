<<<<<<<< HEAD:app/src/debug/assets/react-app/assets/PhotoCapture-BZb8HmRv.js.map
{"version":3,"file":"PhotoCapture-BZb8HmRv.js","sources":["../../src/components/Questions/PhotoCapture/PhotoCapture.jsx"],"sourcesContent":["import { Box } from \"@mui/system\";\nimport { useDispatch } from \"react-redux\";\nimport { useSelector } from \"react-redux\";\nimport { previewUrl, uploadFile } from \"~/networking/run\";\nimport { valueChange } from \"~/state/runState\";\nimport styles from \"./PhotoCapture.module.css\";\nimport { getFileFromPath } from '~/networking/common';\nimport { useService } from \"~/hooks/use-service\";\n\nfunction PhotoCapture(props) {\n  const runService = useService(\"run\");\n  const component = props.component;\n  const state = useSelector((state) => {\n    return state.runState.values[component.qualifiedCode];\n  });\n  const preview = useSelector((state) => {\n    return state.runState.preview;\n  });\n\n  const mode = useSelector((state) => {\n    return state.runState.values.Survey.mode;\n  });\n\n  const dispatch = useDispatch();\n\n  const onImageClick = () => {\n    const code = component.qualifiedCode;\n    const maxFileSize = (component.validation?.validation_max_file_size?.isActive &&\n      component.validation?.validation_max_file_size?.max_size) || -1;\n    if (preview && mode == \"offline\") {\n      getFileFromPath(\"/dummy_image.png\").then((response) => {\n        uploadFile(runService, code, preview, response)\n          .then((response) => {\n            dispatch(\n              valueChange({\n                componentCode: props.component.qualifiedCode,\n                value: response,\n              })\n            );\n          })\n          .catch((err) => {\n            console.error(err);\n          });\n      });\n    } else if (window[\"Android\"]) {\n      window[\"Android\"].capturePhoto(code, maxFileSize);\n      window[\"onPhotoCaptured\" + code] = (value) => {\n        dispatch(\n          valueChange({\n            componentCode: code,\n            value,\n          })\n        );\n      };\n    } else {\n      console.debug(\"no android device!!\");\n    }\n  };\n\n  return (\n    <Box className={styles.container} sx={{ maxHeight: \"400px\" }}>\n      {!state.value || !state.value.stored_filename ? (\n        <img\n          onClick={onImageClick}\n          src=\"/camera.png\"\n          style={{\n            maxHeight: \"200px\",\n            maxWidth: \"100%\",\n          }}\n        />\n      ) : (\n        <img\n          onClick={onImageClick}\n          src={previewUrl(state.value.stored_filename)}\n          style={{\n            maxHeight: \"400px\",\n            maxWidth: \"100%\",\n          }}\n        />\n      )}\n      <br />\n      {component.showHint && <span>{component.content?.hint}</span>}\n    </Box>\n\n\n\n\n  );\n}\n\nexport default PhotoCapture;\n"],"names":["state","_a","response","jsxs","jsx"],"mappings":";;;;;;AASA,SAAS,aAAa,OAAO;;AACrB,QAAA,aAAa,WAAW,KAAK;AACnC,QAAM,YAAY,MAAM;AAClB,QAAA,QAAQ,YAAY,CAACA,WAAU;AACnC,WAAOA,OAAM,SAAS,OAAO,UAAU,aAAa;AAAA,EAAA,CACrD;AACK,QAAA,UAAU,YAAY,CAACA,WAAU;AACrC,WAAOA,OAAM,SAAS;AAAA,EAAA,CACvB;AAEK,QAAA,OAAO,YAAY,CAACA,WAAU;AAC3BA,WAAAA,OAAM,SAAS,OAAO,OAAO;AAAA,EAAA,CACrC;AAED,QAAM,WAAW;AAEjB,QAAM,eAAe,MAAM;;AACzB,UAAM,OAAO,UAAU;AACjB,UAAA,gBAAe,MAAAC,MAAA,UAAU,eAAV,gBAAAA,IAAsB,6BAAtB,mBAAgD,eACnE,qBAAU,eAAV,mBAAsB,6BAAtB,mBAAgD,aAAa;AAC3D,QAAA,WAAW,QAAQ,WAAW;AAChC,sBAAgB,kBAAkB,EAAE,KAAK,CAAC,aAAa;AACrD,mBAAW,YAAY,MAAM,SAAS,QAAQ,EAC3C,KAAK,CAACC,cAAa;AAClB;AAAA,YACE,YAAY;AAAA,cACV,eAAe,MAAM,UAAU;AAAA,cAC/B,OAAOA;AAAAA,YAAA,CACR;AAAA,UAAA;AAAA,QACH,CACD,EACA,MAAM,CAAC,QAAQ;AACd,kBAAQ,MAAM,GAAG;AAAA,QAAA,CAClB;AAAA,MAAA,CACJ;AAAA,IAAA,WACQ,OAAO,SAAS,GAAG;AAC5B,aAAO,SAAS,EAAE,aAAa,MAAM,WAAW;AAChD,aAAO,oBAAoB,IAAI,IAAI,CAAC,UAAU;AAC5C;AAAA,UACE,YAAY;AAAA,YACV,eAAe;AAAA,YACf;AAAA,UAAA,CACD;AAAA,QAAA;AAAA,MACH;AAAA,IACF,OACK;AACL,cAAQ,MAAM,qBAAqB;AAAA,IACrC;AAAA,EAAA;AAIA,SAAAC,uCAAC,OAAI,WAAW,OAAO,WAAW,IAAI,EAAE,WAAW,QAAA,GAChD,UAAA;AAAA,IAAA,CAAC,MAAM,SAAS,CAAC,MAAM,MAAM,kBAC5BC,kCAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS;AAAA,QACT,KAAI;AAAA,QACJ,OAAO;AAAA,UACL,WAAW;AAAA,UACX,UAAU;AAAA,QACZ;AAAA,MAAA;AAAA,IAAA,IAGFA,kCAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS;AAAA,QACT,KAAK,WAAW,MAAM,MAAM,eAAe;AAAA,QAC3C,OAAO;AAAA,UACL,WAAW;AAAA,UACX,UAAU;AAAA,QACZ;AAAA,MAAA;AAAA,IACF;AAAA,0CAED,MAAG,EAAA;AAAA,IACH,UAAU,YAAYA,kCAAAA,IAAC,QAAM,EAAA,WAAA,eAAU,YAAV,mBAAmB,MAAK;AAAA,EACxD,EAAA,CAAA;AAMJ;"}
========
{"version":3,"file":"PhotoCapture-BgUyVWd1.js","sources":["../../src/components/Questions/PhotoCapture/PhotoCapture.jsx"],"sourcesContent":["import { Box } from \"@mui/system\";\nimport { useDispatch } from \"react-redux\";\nimport { useSelector } from \"react-redux\";\nimport { previewUrl, uploadFile } from \"~/networking/run\";\nimport { valueChange } from \"~/state/runState\";\nimport styles from \"./PhotoCapture.module.css\";\nimport { getFileFromPath } from '~/networking/common';\nimport { useService } from \"~/hooks/use-service\";\n\nfunction PhotoCapture(props) {\n  const runService = useService(\"run\");\n  const component = props.component;\n  const state = useSelector((state) => {\n    return state.runState.values[component.qualifiedCode];\n  });\n  const preview = useSelector((state) => {\n    return state.runState.preview;\n  });\n\n  const mode = useSelector((state) => {\n    return state.runState.values.Survey.mode;\n  });\n\n  const dispatch = useDispatch();\n\n  const onImageClick = () => {\n    const code = component.qualifiedCode;\n    const maxFileSize = (component.validation?.validation_max_file_size?.isActive &&\n      component.validation?.validation_max_file_size?.max_size) || -1;\n    if (preview && mode == \"offline\") {\n      getFileFromPath(\"/dummy_image.png\").then((response) => {\n        uploadFile(runService, code, preview, response)\n          .then((response) => {\n            dispatch(\n              valueChange({\n                componentCode: props.component.qualifiedCode,\n                value: response,\n              })\n            );\n          })\n          .catch((err) => {\n            console.error(err);\n          });\n      });\n    } else if (window[\"Android\"]) {\n      window[\"Android\"].capturePhoto(code, maxFileSize);\n      window[\"onPhotoCaptured\" + code] = (value) => {\n        dispatch(\n          valueChange({\n            componentCode: code,\n            value,\n          })\n        );\n      };\n    } else {\n      console.debug(\"no android device!!\");\n    }\n  };\n\n  return (\n    <Box className={styles.container} sx={{ maxHeight: \"400px\" }}>\n      {!state.value || !state.value.stored_filename ? (\n        <img\n          onClick={onImageClick}\n          src=\"/camera.png\"\n          style={{\n            maxHeight: \"200px\",\n            maxWidth: \"100%\",\n          }}\n        />\n      ) : (\n        <img\n          onClick={onImageClick}\n          src={previewUrl(state.value.stored_filename)}\n          style={{\n            maxHeight: \"400px\",\n            maxWidth: \"100%\",\n          }}\n        />\n      )}\n      <br />\n      {component.showHint && <span>{component.content?.hint}</span>}\n    </Box>\n\n\n\n\n  );\n}\n\nexport default PhotoCapture;\n"],"names":["state","_a","response","jsxs","jsx"],"mappings":";;;;;;;;;;;;AASA,SAAS,aAAa,OAAO;;AACrB,QAAA,aAAa,WAAW,KAAK;AACnC,QAAM,YAAY,MAAM;AAClB,QAAA,QAAQ,YAAY,CAACA,WAAU;AACnC,WAAOA,OAAM,SAAS,OAAO,UAAU,aAAa;AAAA,EAAA,CACrD;AACK,QAAA,UAAU,YAAY,CAACA,WAAU;AACrC,WAAOA,OAAM,SAAS;AAAA,EAAA,CACvB;AAEK,QAAA,OAAO,YAAY,CAACA,WAAU;AAC3BA,WAAAA,OAAM,SAAS,OAAO,OAAO;AAAA,EAAA,CACrC;AAED,QAAM,WAAW;AAEjB,QAAM,eAAe,MAAM;;AACzB,UAAM,OAAO,UAAU;AACjB,UAAA,gBAAe,MAAAC,MAAA,UAAU,eAAV,gBAAAA,IAAsB,6BAAtB,mBAAgD,eACnE,qBAAU,eAAV,mBAAsB,6BAAtB,mBAAgD,aAAa;AAC3D,QAAA,WAAW,QAAQ,WAAW;AAChC,sBAAgB,kBAAkB,EAAE,KAAK,CAAC,aAAa;AACrD,mBAAW,YAAY,MAAM,SAAS,QAAQ,EAC3C,KAAK,CAACC,cAAa;AAClB;AAAA,YACE,YAAY;AAAA,cACV,eAAe,MAAM,UAAU;AAAA,cAC/B,OAAOA;AAAAA,YAAA,CACR;AAAA,UAAA;AAAA,QACH,CACD,EACA,MAAM,CAAC,QAAQ;AACd,kBAAQ,MAAM,GAAG;AAAA,QAAA,CAClB;AAAA,MAAA,CACJ;AAAA,IAAA,WACQ,OAAO,SAAS,GAAG;AAC5B,aAAO,SAAS,EAAE,aAAa,MAAM,WAAW;AAChD,aAAO,oBAAoB,IAAI,IAAI,CAAC,UAAU;AAC5C;AAAA,UACE,YAAY;AAAA,YACV,eAAe;AAAA,YACf;AAAA,UAAA,CACD;AAAA,QAAA;AAAA,MACH;AAAA,IACF,OACK;AACL,cAAQ,MAAM,qBAAqB;AAAA,IACrC;AAAA,EAAA;AAIA,SAAAC,uCAAC,OAAI,WAAW,OAAO,WAAW,IAAI,EAAE,WAAW,QAAA,GAChD,UAAA;AAAA,IAAA,CAAC,MAAM,SAAS,CAAC,MAAM,MAAM,kBAC5BC,kCAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS;AAAA,QACT,KAAI;AAAA,QACJ,OAAO;AAAA,UACL,WAAW;AAAA,UACX,UAAU;AAAA,QACZ;AAAA,MAAA;AAAA,IAAA,IAGFA,kCAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,SAAS;AAAA,QACT,KAAK,WAAW,MAAM,MAAM,eAAe;AAAA,QAC3C,OAAO;AAAA,UACL,WAAW;AAAA,UACX,UAAU;AAAA,QACZ;AAAA,MAAA;AAAA,IACF;AAAA,0CAED,MAAG,EAAA;AAAA,IACH,UAAU,YAAYA,kCAAAA,IAAC,QAAM,EAAA,WAAA,eAAU,YAAV,mBAAmB,MAAK;AAAA,EACxD,EAAA,CAAA;AAMJ;"}
>>>>>>>> main:app/src/debug/assets/react-app/assets/PhotoCapture-BgUyVWd1.js.map
