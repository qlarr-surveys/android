{"version":3,"file":"ImageScq-legacy-C2yB8H2Y.js","sources":["../../src/components/Questions/ImageScq/ImageScq.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\nimport styles from \"./ImageScq.module.css\";\nimport { valueChange } from \"~/state/runState\";\nimport { useTheme } from \"@emotion/react\";\nimport { Box, Card, Grid, Radio } from \"@mui/material\";\nimport { buildResourceUrl } from \"~/networking/common\";\nimport { rtlLanguage } from \"~/utils/common\";\n\nfunction ImageScq(props) {\n  const theme = useTheme();\n  const state = useSelector((state) => {\n    let questionState = state.runState.values[props.component.qualifiedCode];\n    let show_errors = state.runState.values.Survey.show_errors;\n    let isDirty = state.templateState[props.component.qualifiedCode];\n    return {\n      value: questionState?.value || \"\",\n      showValidation:\n        (show_errors || isDirty) && questionState?.validity === false,\n    };\n  }, shallowEqual);\n  const dispatch = useDispatch();\n\n  const handleChange = (componentCode, value) => {\n    dispatch(valueChange({ componentCode, value }));\n  };\n\n  const lang = useSelector((state) => {\n    return state.runState.values[\"Survey\"].lang;\n  });\n  const isRtl = rtlLanguage.includes(lang);\n\n  const runValues = useSelector((s) => s.runState.values);\n\n  return (\n    <Box\n      sx={{\n        gap: `${props.component.spacing}px`,\n        justifyContent: isRtl ? \"flex-end\" : \"flex-start\",\n      }}\n      className={styles.imageFlexContainer}\n    >\n      {props.component.answers.map((option) => {\n        const backgroundImage = option.resources?.image\n          ? `url('${buildResourceUrl(option.resources?.image)}')`\n          : `url('/placeholder-image.jpg')`;\n\n        const relevance = runValues[option.qualifiedCode]?.relevance ?? true;\n        if (!relevance) return null;\n        return (\n          <Box\n            key={option.code}\n            sx={{\n              flex: `0 1 calc(${100 / props.component.columns}% - ${props.component.spacing}px)`,\n              cursor: \"pointer\",\n            }}\n            onClick={() =>\n              handleChange(props.component.qualifiedCode, option.code)\n            }\n          >\n            <Box\n              className={styles.imageContainer}\n              style={{\n                paddingTop: `${100 / props.component.imageAspectRatio}%`,\n                borderRadius: \"4px\",\n                backgroundImage: backgroundImage,\n                border:\n                  state.value === option.code\n                    ? `4px solid ${theme.palette.primary.main}`\n                    : \"4px solid transparent\",\n              }}\n            >\n              <div className={styles.selection}>\n                <Radio\n                  checked={state.value === option.code}\n                  onChange={(event) =>\n                    handleChange(event.target.name, event.target.value)\n                  }\n                  value={option.code}\n                  className={styles.radioCheck}\n                  name={props.component.qualifiedCode}\n                  size=\"large\"\n                  sx={{\n                    m:'5px',\n                    color: theme.textStyles.text.color,\n                  }}\n                />\n              </div>\n            </Box>\n            {!props.component.hideText && (\n              <Box\n                sx={{\n                  fontFamily: theme.textStyles.text.font,\n                  color: theme.textStyles.text.color,\n                  fontSize: theme.textStyles.text.size,\n                  textAlign: \"center\",\n                  marginTop: \"8px\",\n                }}\n              >\n                {option.content?.label}\n              </Box>\n            )}\n          </Box>\n        );\n      })}\n    </Box>\n  );\n}\n\nexport default ImageScq;\n"],"names":["ImageScq","props","theme","useTheme","state","useSelector","questionState","runState","values","component","qualifiedCode","show_errors","Survey","isDirty","templateState","value","showValidation","validity","shallowEqual","dispatch","useDispatch","handleChange","componentCode","valueChange","lang","isRtl","rtlLanguage","includes","runValues","s","jsx","Box","sx","gap","spacing","justifyContent","className","styles","imageFlexContainer","children","answers","map","option","_option$resources","_option$resources2","_runValues$option$qua","_runValues$option$qua2","_option$content","backgroundImage","resources","image","buildResourceUrl","relevance","jsxs","flex","columns","cursor","onClick","code","imageContainer","style","paddingTop","imageAspectRatio","borderRadius","border","palette","primary","main","selection","Radio","checked","onChange","event","target","name","radioCheck","size","m","color","textStyles","text","hideText","fontFamily","font","fontSize","textAlign","marginTop","content","label"],"mappings":"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"}