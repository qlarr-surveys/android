{"version":3,"file":"SCQIconArray-BD5byBnN.js","sources":["../../src/components/Questions/SCQArray/SCQIconArray.jsx"],"sourcesContent":["import React from \"react\";\nimport Table from \"@mui/material/Table\";\nimport TableBody from \"@mui/material/TableBody\";\nimport TableCell from \"@mui/material/TableCell\";\nimport TableContainer from \"@mui/material/TableContainer\";\nimport TableRow from \"@mui/material/TableRow\";\nimport { useTheme } from \"@emotion/react\";\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { valueChange } from \"~/state/runState\";\nimport Validation from \"~/components/run/Validation\";\nimport DynamicSvg from \"~/components/DynamicSvg\";\nimport { buildResourceUrl } from \"~/networking/common\";\nimport { TableHead } from \"@mui/material\";\nimport { columnMinWidth } from '~/utils/design/utils';\n\nfunction SCQIconArray(props) {\n  const theme = useTheme();\n  const width = columnMinWidth()\n\n  let columns = props.component.answers.filter(\n    (answer) => answer.type == \"column\"\n  );\n  let rows = props.component.answers.filter((answer) => answer.type == \"row\");\n\n  return (\n    <TableContainer\n      sx={{\n        overflowX: \"auto\",\n        maxWidth: \"100%\",\n      }}\n    >\n      <Table\n        sx={{ tableLayout: \"fixed\", minWidth: `${columns.length * width}px` }}\n      >\n        <TableHead>\n          <TableRow>\n            <TableCell\n              key=\"content\"\n              sx={{\n                width: width,\n                padding: \"0px\",\n              }}\n            ></TableCell>\n            {columns.map((option) => {\n              return (\n                <TableCell\n                  sx={{\n                    fontFamily: theme.textStyles.text.font,\n                    color: theme.textStyles.text.color,\n                    fontSize: theme.textStyles.text.size,\n                    textAlign: \"center\",\n                    width: width,\n                  }}\n                  key={option.qualifiedCode}\n                >\n                  {option.content?.label}\n                </TableCell>\n              );\n            })}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {rows.map((answer) => {\n            return (\n              <React.Fragment key={answer.qualifiedCode}>\n                <SCQArrayRow\n                  key={answer.qualifiedCode}\n                  answer={answer}\n                  choices={columns}\n                  width={width}\n                />\n              </React.Fragment>\n            );\n          })}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  );\n}\n\nfunction SCQArrayRow(props) {\n  const theme = useTheme();\n\n  const isDirty = useSelector(\n    (state) => state.templateState[props.answer.qualifiedCode]?.isDirty\n  );\n  const show_errors = useSelector(\n    (state) => state.runState.values.Survey.show_errors\n  );\n  const state = useSelector(\n    (state) => state.runState.values[props.answer.qualifiedCode]\n  );\n  const validity = React.useMemo(() => state?.validity, [state]);\n  const value = React.useMemo(() => state?.value, [state]);\n  const relevance = React.useMemo(() => state?.relevance, [state]);\n\n  const dispatch = useDispatch();\n\n  const handleChange = (value) => {\n    dispatch(\n      valueChange({\n        componentCode: props.answer.qualifiedCode,\n        value: value,\n      })\n    );\n  };\n\n  const invalid = (show_errors || isDirty) && validity === false;\n\n  return typeof relevance === \"undefined\" || relevance ? (\n    <React.Fragment>\n      <TableRow key={props.answer.code}>\n        <TableCell\n          sx={{\n            fontFamily: theme.textStyles.text.font,\n            color: theme.textStyles.text.color,\n            fontSize: theme.textStyles.text.size,\n            borderBottom: invalid ? \"0\" : \"\",\n            padding: \"2px\",\n          }}\n        >\n          {props.answer.content?.label}\n        </TableCell>\n        {props.choices.map((option) => {\n          return (\n            <TableCell\n              key={option.code}\n              component=\"th\"\n              scope=\"row\"\n              sx={{\n                borderBottom: invalid ? \"0\" : \"\",\n                padding: \"2px\",\n                width: props.width,\n              }}\n            >\n              <DynamicSvg\n                onIconClick={() => handleChange(option.code)}\n                imageHeight={\"64px\"}\n                isSelected={value == option.code}\n                theme={theme}\n                svgUrl={\n                  option?.resources?.icon\n                    ? buildResourceUrl(option?.resources?.icon)\n                    : undefined\n                }\n              />\n            </TableCell>\n          );\n        })}\n      </TableRow>\n      {invalid ? (\n        <TableRow>\n          <TableCell\n            sx={{ padding: \"2px\" }}\n            colSpan={props.choices ? props.choices.length + 1 : 1}\n          >\n            <Validation component={props.answer} />\n          </TableCell>\n        </TableRow>\n      ) : (\n        \"\"\n      )}\n    </React.Fragment>\n  ) : (\n    \"\"\n  );\n}\n\nexport default SCQIconArray;\n"],"names":["jsx","jsxs","state","value","_a"],"mappings":"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"}