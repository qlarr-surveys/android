{"version":3,"file":"ImageMcq-legacy-C3ylZ-eu.js","sources":["../../src/components/Questions/ImageMcq/ImageMcq.jsx"],"sourcesContent":["import React from \"react\";\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\nimport { valueChange } from \"~/state/runState\";\nimport { useTheme } from \"@emotion/react\";\nimport { Box, Checkbox } from \"@mui/material\";\nimport { buildResourceUrl } from \"~/networking/common\";\nimport styles from \"./ImageMcq.module.css\";\nimport { setDirty } from \"~/state/templateState\";\nimport { rtlLanguage } from \"~/utils/common\";\n\nfunction ImageMcq(props) {\n  const lang = useSelector((state) => {\n    return state.runState.values[\"Survey\"].lang;\n  });\n\n  const parentValue = useSelector((state) => {\n    return state.runState.values[props.component.qualifiedCode].value || [];\n  }, shallowEqual);\n  const isRtl = rtlLanguage.includes(lang);\n\n  const runValues = useSelector((s) => s.runState.values);\n\n  return (\n    <Box\n      sx={{\n        gap: `${props.component.spacing}px`,\n        justifyContent: isRtl ? \"flex-end\" : \"flex-start\",\n      }}\n      className={styles.imageFlexContainer}\n    >\n      {props.component.answers.map((option) => {\n        const relevance = runValues[option.qualifiedCode]?.relevance ?? true;\n        if (!relevance) return null;\n\n        return (\n          <ImageMcqItem\n            option={option}\n            parentValue={parentValue}\n            aspectRatio={props.component.imageAspectRatio}\n            columns={props.component.columns || 3}\n            spacing={props.component.spacing || 8}\n            hideText={props.component.hideText}\n            parentCode={props.component.qualifiedCode}\n            key={option.qualifiedCode}\n          />\n        );\n      })}\n    </Box>\n  );\n}\n\nfunction ImageMcqItem(props) {\n  const theme = useTheme();\n  const state = useSelector((state) => {\n    let answerState = state.runState.values[props.option.qualifiedCode];\n    return {\n      showAnswer:\n        typeof answerState?.relevance == \"undefined\" || answerState.relevance,\n    };\n  }, shallowEqual);\n\n  const dispatch = useDispatch();\n  const handleChange = (componentCode, value) => {\n    let parentValue = [...props.parentValue];\n    if (value) {\n      parentValue.push(props.option.code);\n    } else {\n      parentValue = parentValue.filter((el) => el !== props.option.code);\n    }\n    dispatch(\n      valueChange({\n        componentCode: props.parentCode,\n        value: parentValue,\n      })\n    );\n    dispatch(setDirty(componentCode));\n    dispatch(setDirty(props.parentCode));\n  };\n  const backgroundImage = props.option.resources?.image\n    ? `url('${buildResourceUrl(props.option.resources?.image)}')`\n    : `url('/placeholder-image.jpg')`;\n\n  return (\n    <Box\n      key={props.option.code}\n      sx={{\n        flex: `0 1 calc(${100 / props.columns}% - ${props.spacing}px)`,\n        cursor: \"pointer\",\n      }}\n    >\n      <Box\n        className={styles.imageContainer}\n        onClick={() => handleChange(props.option.qualifiedCode, !state.checked)}\n        style={{\n          paddingTop: 100 / props.aspectRatio + \"%\",\n          backgroundImage: backgroundImage,\n          borderRadius: \"4px\",\n          border: state.checked\n            ? `4px solid ${theme.palette.primary.main}`\n            : \"4px solid transparent\",\n        }}\n      >\n        <div className={styles.selection}>\n          <Checkbox\n            onChange={(event) =>\n              handleChange(props.option.qualifiedCode, !state.checked)\n            }\n            size=\"large\"\n            sx={{\n              m: \"5px\",\n            }}\n            className={styles.radioCheck}\n            checked={\n              props.parentValue.indexOf(props.option.code) > -1 \n            }\n          />\n        </div>\n      </Box>\n      {!props.hideText && (\n        <Box\n          sx={{\n            fontFamily: theme.textStyles.text.font,\n            color: theme.textStyles.text.color,\n            fontSize: theme.textStyles.text.size,\n          }}\n        >\n          {props.option.content?.label}\n        </Box>\n      )}\n    </Box>\n  );\n}\n\nexport default ImageMcq;\n"],"names":["ImageMcq","props","lang","useSelector","state","runState","values","parentValue","component","qualifiedCode","value","shallowEqual","isRtl","rtlLanguage","includes","runValues","s","jsx","Box","sx","gap","spacing","justifyContent","className","styles","imageFlexContainer","children","answers","map","option","_runValues$option$qua","_runValues$option$qua2","relevance","ImageMcqItem","aspectRatio","imageAspectRatio","columns","hideText","parentCode","_props$option$resourc","_props$option$resourc2","_props$option$content","theme","useTheme","answerState","showAnswer","dispatch","useDispatch","handleChange","componentCode","push","code","filter","el","valueChange","setDirty","backgroundImage","resources","image","buildResourceUrl","jsxs","flex","cursor","imageContainer","onClick","checked","style","paddingTop","borderRadius","border","palette","primary","main","selection","Checkbox","onChange","event","size","m","radioCheck","indexOf","fontFamily","textStyles","text","font","color","fontSize","content","label"],"mappings":"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"}