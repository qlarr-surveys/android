{"version":3,"file":"Scq-CXk0WAZE.js","sources":["../../src/components/Questions/Scq/Scq.jsx"],"sourcesContent":["import React, { useRef } from \"react\";\nimport TextField from \"@mui/material/TextField\";\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\nimport { useTheme } from \"@mui/material/styles\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport Validation from \"~/components/run/Validation\";\nimport Radio from \"@mui/material/Radio\";\nimport { valueChange } from \"~/state/runState\";\nimport FormControl from \"@mui/material/FormControl\";\nimport RadioGroup from \"@mui/material/RadioGroup\";\nimport { Box } from \"@mui/material\";\nimport { setDirty } from \"~/state/templateState\";\n\nfunction SCQ(props) {\n  const state = useSelector((state) => {\n    let questionState = state.runState.values[props.component.qualifiedCode];\n    return {\n      value: questionState?.value || \"\",\n    };\n  }, shallowEqual);\n  const dispatch = useDispatch();\n\n  const handleChange = (event) => {\n    dispatch(\n      valueChange({\n        componentCode: event.target.name,\n        value: event.target.value,\n      })\n    );\n  };\n  return (\n    <FormControl component=\"fieldset\">\n      <RadioGroup\n        name={props.component.qualifiedCode}\n        value={state.value}\n        onChange={handleChange}\n      >\n        {props.component.answers.map((option) => {\n          if (option.type === \"other\") {\n            return (\n              <ScqChoiceOther\n                parentCode={props.component.qualifiedCode}\n                key={option.qualifiedCode}\n                Choice={option}\n              />\n            );\n          } else {\n            return <ScqChoice key={option.qualifiedCode} Choice={option} />;\n          }\n        })}\n      </RadioGroup>\n    </FormControl>\n  );\n}\n\nfunction ScqChoice(props) {\n  const theme = useTheme();\n\n  const showChoice = () => {\n    return (\n      <FormControlLabel\n        key={props.Choice.qualifiedCode}\n        control={\n          <Radio\n            sx={{\n              color: theme.textStyles.text.color,\n            }}\n          />\n        }\n        label={\n          <Box\n            sx={{\n              fontFamily: theme.textStyles.text.font,\n              color: theme.textStyles.text.color,\n              fontSize: theme.textStyles.text.size,\n            }}\n          >\n            {props.Choice.content?.label}\n          </Box>\n        }\n        value={props.Choice.code}\n      />\n    );\n  };\n\n  return showChoice ? showChoice() : \"\";\n}\n\nfunction ScqChoiceOther(props) {\n  const theme = useTheme();\n  const nestedTextChild = props.Choice.answers[0];\n  const state = useSelector((state) => {\n    let choiceState = state.runState.values[props.Choice.qualifiedCode];\n    let childState = state.runState.values[nestedTextChild.qualifiedCode];\n    let show_errors = state.runState.values.Survey.show_errors;\n    let isChildDirty = state.templateState[nestedTextChild.qualifiedCode];\n    return {\n      showChoice:\n        typeof choiceState?.relevance === \"undefined\" || choiceState.relevance,\n      childInvalid:\n        (show_errors || isChildDirty) &&\n        childState?.relevance === true &&\n        childState?.validity === false,\n      value: childState?.value || \"\",\n    };\n  }, shallowEqual);\n  const dispatch = useDispatch();\n\n  const handleChange = (event) => {\n    dispatch(\n      valueChange({\n        componentCode: event.target.name,\n        value: event.target.value,\n      })\n    );\n  };\n\n  const handleFocus = (event) => {\n    dispatch(\n      valueChange({ componentCode: props.parentCode, value: props.Choice.code })\n    );\n  };\n\n  const lostFocus = (event) => {\n    dispatch(setDirty(event.target.name));\n  };\n\n  const textInput = useRef();\n  const onButtonClick = (event) => {\n    if (event.target.checked) {\n      textInput.current.focus();\n    }\n  };\n\n  const showChoice = () => {\n    return (\n      <div className=\"text-left d-flex\">\n        <FormControlLabel\n          key={props.Choice.qualifiedCode}\n          control={<Radio\n            sx={{\n              color: theme.textStyles.text.color,\n            }}\n          />}\n          label={\n            <div className=\"w-100\">\n              <TextField\n                variant=\"standard\"\n                required={\n                  state.textChild?.relevance &&\n                  nestedTextChild.validation?.required\n                }\n                sx={{\n                  label: { color: theme.textStyles.text.color },\n                }}\n                inputRef={textInput}\n                id={nestedTextChild.qualifiedCode}\n                name={nestedTextChild.qualifiedCode}\n                label={props.Choice.content?.label}\n                onChange={handleChange}\n                onFocus={handleFocus}\n                onBlur={lostFocus}\n                value={state.value}\n                InputProps={{\n                  sx: {\n                    fontFamily: theme.textStyles.text.font,\n                    color: theme.textStyles.text.color,\n                    fontSize: theme.textStyles.text.size,\n                  },\n                }}\n                helperText={\n                  state.childInvalid ? (\n                    <Validation component={nestedTextChild} limit={1} />\n                  ) : (\n                    \"\"\n                  )\n                }\n              />\n            </div>\n          }\n          onChange={onButtonClick}\n          value={props.Choice.code}\n        />\n        <p />\n      </div>\n    );\n  };\n\n  return state.showChoice ? showChoice() : \"\";\n}\n\nexport default SCQ;\n"],"names":["state","jsx","useRef","jsxs"],"mappings":"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"}