{"version":3,"file":"common-legacy-Cdw-XyXm.js","sources":["../../src/networking/common.js"],"sourcesContent":["import {\n  BACKEND_BASE_URL,\n  CLOUD_URL,\n  FRONT_END_HOST,\n  PROTOCOL,\n} from \"~/constants/networking\";\n\nexport const buildResourceUrl = (fileName, surveyId = null, example = null) => {\n\n  if (!surveyId) {\n    surveyId = sessionStorage.getItem(\"surveyId\");\n  }\n  if (example == null) {\n    example = sessionStorage.getItem(\"isGuest\") == 1;\n  }\n  if(example){\n    return `${CLOUD_URL}/survey/${surveyId}/resource/${fileName}`;\n  } else {\n    return `${BACKEND_BASE_URL}/survey/${surveyId}/resource/${fileName}`;\n  }\n\n};\n\n\nexport const sharingUrl = (surveyId, preview, lang) => {\n  let segment = \"run-survey\";\n  if (preview) {\n    segment = \"preview-survey\";\n  }\n  let searchParams = \"\";\n  if (lang) {\n    searchParams = `?lang=${lang}`;\n  }\n  return `${PROTOCOL}://${FRONT_END_HOST}/${segment}/${surveyId}${searchParams}`;\n};\n\nexport async function getFileFromPath(filePath) {\n  const response = await fetch(filePath);\n  const blob = await response.blob();\n  const fileName = filePath.substring(filePath.lastIndexOf(\"/\") + 1);\n  return new File([blob], fileName);\n}\n"],"names":["buildResourceUrl","exports","fileName","surveyId","example","sessionStorage","getItem","CLOUD_URL","BACKEND_BASE_URL","sharingUrl","preview","lang","segment","searchParams","PROTOCOL","FRONT_END_HOST","getFileFromPath","_x","_getFileFromPath","apply","arguments","_asyncToGenerator","filePath","response","fetch","blob","substring","lastIndexOf","File"],"mappings":";;;;;;;;;;;;;;;;;QAOY,MAACA,gBAAgB,GAAAC,OAAA,CAAA,GAAA,EAAG,CAACC,QAAQ,EAAEC,QAAQ,GAAG,IAAI,EAAEC,OAAO,GAAG,IAAI,KAAK;UAE7E,IAAI,CAACD,QAAQ,EAAE;YACbA,QAAQ,GAAGE,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC;UAC9C;UACD,IAAIF,OAAO,IAAI,IAAI,EAAE;YACnBA,OAAO,GAAGC,cAAc,CAACC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC;UACjD;UACD,IAAGF,OAAO,EAAC;YACT,OAAO,GAAGG,SAAS,WAAWJ,QAAQ,aAAaD,QAAQ,EAAE;UACjE,CAAG,MAAM;YACL,OAAO,GAAGM,gBAAgB,WAAWL,QAAQ,aAAaD,QAAQ,EAAE;UACrE;QAEH,CAAE,CAAA;QAGW,MAAAO,UAAU,gBAAG,CAACN,QAAQ,EAAEO,OAAO,EAAEC,IAAI,KAAK;UACrD,IAAIC,OAAO,GAAG,YAAY;UAI1B,IAAIC,YAAY,GAAG,EAAE;UAIrB,OAAO,GAAGC,QAAQ,MAAMC,cAAc,IAAIH,OAAO,IAAIT,QAAQ,GAAGU,YAAY,EAAE;QAChF,CAAE,CAAA;QAAA,SAEoBG,eAAeA,CAAAC,EAAA;UAAA,OAAAC,gBAAA,CAAAC,KAAA,OAAAC,SAAA;QAAA;QAAA,SAAAF,iBAAA;UAAAA,gBAAA,GAAAG,iBAAA,CAA9B,WAA+BC,QAAQ,EAAE;YAC9C,MAAMC,QAAQ,SAASC,KAAK,CAACF,QAAQ,CAAC;YACtC,MAAMG,IAAI,SAASF,QAAQ,CAACE,IAAI,EAAE;YAClC,MAAMvB,QAAQ,GAAGoB,QAAQ,CAACI,SAAS,CAACJ,QAAQ,CAACK,WAAW,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAClE,OAAO,IAAIC,IAAI,CAAC,CAACH,IAAI,CAAC,EAAEvB,QAAQ,CAAC;UACnC,CAAA;UAAA,OAAAgB,gBAAA,CAAAC,KAAA,OAAAC,SAAA;QAAA;;;;"}