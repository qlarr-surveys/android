{"version":3,"file":"Scq-BMdsKMvA.js","sources":["../../src/components/Questions/Scq/Scq.jsx"],"sourcesContent":["import React, { useRef } from \"react\";\nimport TextField from \"@mui/material/TextField\";\nimport { useDispatch, useSelector, shallowEqual } from \"react-redux\";\nimport { useTheme } from \"@mui/material/styles\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport Validation from \"~/components/run/Validation\";\nimport Radio from \"@mui/material/Radio\";\nimport { valueChange } from \"~/state/runState\";\nimport FormControl from \"@mui/material/FormControl\";\nimport RadioGroup from \"@mui/material/RadioGroup\";\nimport { Box } from \"@mui/material\";\nimport { setDirty } from \"~/state/templateState\";\nimport Content from '~/components/run/Content';\n\nfunction SCQ(props) {\n  const state = useSelector((state) => {\n    let questionState = state.runState.values[props.component.qualifiedCode];\n    return {\n      value: questionState?.value || \"\",\n    };\n  }, shallowEqual);\n  const dispatch = useDispatch();\n\n  const handleChange = (event) => {\n    dispatch(\n      valueChange({\n        componentCode: event.target.name,\n        value: event.target.value,\n      })\n    );\n  };\n  return (\n    <FormControl component=\"fieldset\">\n      <RadioGroup\n        name={props.component.qualifiedCode}\n        value={state.value}\n        onChange={handleChange}\n      >\n        {props.component.answers.map((option) => {\n          if (option.type === \"other\") {\n            return (\n              <ScqChoiceOther\n                lang={props.lang}\n                parentCode={props.component.qualifiedCode}\n                key={option.qualifiedCode}\n                Choice={option}\n              />\n            );\n          } else {\n            return <ScqChoice key={option.qualifiedCode} Choice={option} />;\n          }\n        })}\n      </RadioGroup>\n    </FormControl>\n  );\n}\n\nfunction ScqChoice(props) {\n  const theme = useTheme();\n\n  const showChoice = () => {\n    return (\n      <FormControlLabel\n        key={props.Choice.qualifiedCode}\n        control={\n          <Radio\n          />\n        }\n        label={\n            <Content\n                elementCode={props.Choice.code}\n                fontFamily={theme.textStyles.text.font}\n                color={theme.textStyles.text.color}\n                fontSize={theme.textStyles.text.size}\n                name=\"label\"\n                lang={props.lang}\n                content={props.Choice.content?.label}\n              />\n\n        }\n        value={props.Choice.code}\n      />\n    );\n  };\n\n  return showChoice ? showChoice() : \"\";\n}\n\nfunction ScqChoiceOther(props) {\n  const theme = useTheme();\n  const nestedTextChild = props.Choice.answers[0];\n  const state = useSelector((state) => {\n    let choiceState = state.runState.values[props.Choice.qualifiedCode];\n    let childState = state.runState.values[nestedTextChild.qualifiedCode];\n    let show_errors = state.runState.values.Survey.show_errors;\n    let isChildDirty = state.templateState[nestedTextChild.qualifiedCode];\n    return {\n      showChoice:\n        typeof choiceState?.relevance === \"undefined\" || choiceState.relevance,\n      childInvalid:\n        (show_errors || isChildDirty) &&\n        childState?.relevance === true &&\n        childState?.validity === false,\n      value: childState?.value || \"\",\n    };\n  }, shallowEqual);\n  const dispatch = useDispatch();\n\n  const handleChange = (event) => {\n    dispatch(\n      valueChange({\n        componentCode: event.target.name,\n        value: event.target.value,\n      })\n    );\n  };\n\n  const handleFocus = (event) => {\n    dispatch(\n      valueChange({ componentCode: props.parentCode, value: props.Choice.code })\n    );\n  };\n\n  const lostFocus = (event) => {\n    dispatch(setDirty(event.target.name));\n  };\n\n  const textInput = useRef();\n  const onButtonClick = (event) => {\n    if (event.target.checked) {\n      textInput.current.focus();\n    }\n  };\n\n  const showChoice = () => {\n    return (\n      <div className=\"text-left d-flex\">\n        <FormControlLabel\n          key={props.Choice.qualifiedCode}\n          control={<Radio\n            sx={{\n              color: theme.textStyles.text.color,\n            }}\n          />}\n          label={\n              <TextField\n                variant=\"standard\"\n                fullWidth\n                required={\n                  state.textChild?.relevance &&\n                  nestedTextChild.validation?.required\n                }\n                sx={{\n                  label: { color: theme.textStyles.text.color },\n                }}\n                inputRef={textInput}\n                id={nestedTextChild.qualifiedCode}\n                name={nestedTextChild.qualifiedCode}\n                label={props.Choice.content?.label}\n                onChange={handleChange}\n                onFocus={handleFocus}\n                onBlur={lostFocus}\n                value={state.value}\n                InputProps={{\n                  sx: {\n                    fontFamily: theme.textStyles.text.font,\n                    color: theme.textStyles.text.color,\n                    fontSize: theme.textStyles.text.size,\n                  },\n                }}\n                helperText={\n                  state.childInvalid ? (\n                    <Validation component={nestedTextChild} limit={1} />\n                  ) : (\n                    \"\"\n                  )\n                }\n              />\n          }\n          onChange={onButtonClick}\n          value={props.Choice.code}\n        />\n        <p />\n      </div>\n    );\n  };\n\n  return state.showChoice ? showChoice() : \"\";\n}\n\nexport default SCQ;\n"],"names":["state","jsx","useRef","jsxs"],"mappings":"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"}